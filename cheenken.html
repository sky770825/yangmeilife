<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes" />
  <title>æ¥µå“é¹½æ°´é›ï½œç·šä¸Šé è¨‚</title>
  <style>
    :root{
      --bg: linear-gradient(135deg, #fef9f3 0%, #faf5ed 100%);
      --card:#ffffff;
      --text:#1a1a1a;
      --primary:#d97706;
      --primary-dark:#b45309;
      --accent:#f59e0b;
      --success:#059669;
      --danger:#dc2626;
      --muted:#6b7280;
      --border:#e5e7eb;
      --shadow: 0 4px 20px rgba(0,0,0,.06);
      --shadow-lg: 0 10px 40px rgba(0,0,0,.12);
      --radius: clamp(10px, 2vw, 16px);
    }
    *{box-sizing:border-box; -webkit-tap-highlight-color:transparent}
    body{
      margin:0; 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: #fef9f3;
      background: var(--bg);
      color:var(--text); 
      line-height:1.6;
      font-size: clamp(15px, 3.5vw, 16px);
      letter-spacing: 0.3px;
      padding-bottom: 20px;
    }
    
    /* Header å“ç‰Œå€ */
    .brand-header{
      background: linear-gradient(135deg, #d97706 0%, #f59e0b 100%);
      color:#fff;
      padding: clamp(12px, 3vw, 18px) clamp(12px, 3vw, 16px);
      text-align:center;
      box-shadow: 0 4px 16px rgba(217,119,6,.25);
      position: sticky;
      top: 0;
      z-index: 100;
    }
    .brand-logo-wrap{
      display:flex;
      align-items:center;
      justify-content:center;
      gap: clamp(8px, 2vw, 12px);
      margin-bottom: 4px;
    }
    .brand-logo{
      width: clamp(40px, 10vw, 56px);
      height: clamp(40px, 10vw, 56px);
      border-radius: 50%;
      background: #fff;
      padding: 6px;
      cursor: pointer;
      transition: transform .2s ease;
      box-shadow: 0 4px 12px rgba(0,0,0,.15);
    }
    .brand-logo:hover{ transform: scale(1.05); }
    .brand-logo:active{ transform: scale(0.98); }
    .brand-title{
      font-size: clamp(20px, 4.5vw, 24px);
      font-weight: 800;
      margin:0;
      letter-spacing: 0.5px;
    }
    .brand-subtitle{
      font-size: clamp(12px, 2.5vw, 13px);
      opacity:.9;
      margin: 2px 0 0;
      font-weight: 400;
    }
    
    /* å®¹å™¨ */
    .container{
      max-width: 1200px;
      margin: 0 auto;
      padding: clamp(12px, 3vw, 16px);
    }
    
    /* å¡ç‰‡ */
    .card{
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: clamp(14px, 3.5vw, 18px);
      margin-bottom: clamp(12px, 3vw, 16px);
    }
    
    /* å€å¡Šæ¨™é¡Œ */
    .section-title{
      font-size: clamp(17px, 4.2vw, 19px);
      font-weight: 700;
      margin: 0 0 clamp(12px, 3vw, 14px);
      color: var(--text);
      display: flex;
      align-items: center;
      gap: 8px;
      letter-spacing: 0.5px;
      line-height: 1.4;
    }
    .section-title::before{
      content: '';
      width: 4px;
      height: clamp(17px, 4vw, 20px);
      background: var(--primary);
      border-radius: 2px;
    }
    
    /* è¡¨å–®æ¬„ä½ */
    .form-group{
      margin-bottom: clamp(12px, 3vw, 14px);
    }
    .form-label{
      display: block;
      font-weight: 600;
      margin-bottom: clamp(6px, 1.5vw, 7px);
      font-size: clamp(14px, 3.2vw, 15px);
      color: var(--text);
      letter-spacing: 0.3px;
      line-height: 1.5;
    }
    .form-label .required{ color: var(--danger); margin-left: 2px; }
    
    input, select, textarea{
      width: 100%;
      padding: clamp(10px, 2.5vw, 12px) clamp(12px, 3vw, 14px);
      border: 1.5px solid var(--border);
      border-radius: clamp(8px, 2vw, 10px);
      background: #fff;
      font-size: clamp(15px, 3.5vw, 16px);
      font-family: inherit;
      transition: all .2s ease;
      color: var(--text);
      letter-spacing: 0.3px;
      line-height: 1.5;
    }
    input:focus, select:focus, textarea:focus{
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(217,119,6,.12);
    }
    textarea{ min-height: clamp(70px, 18vw, 90px); resize: vertical; }
    
    /* å•†å“ç¶²æ ¼ - å¤šæ¬„éŸ¿æ‡‰å¼ */
    .product-grid{
      display: grid;
      grid-template-columns: repeat(2, 1fr); /* æ‰‹æ©Ÿé è¨­ 2 æ¬„ */
      gap: clamp(10px, 2.5vw, 12px);
    }
    @media(min-width: 600px){
      .product-grid{ grid-template-columns: repeat(3, 1fr); } /* å¹³æ¿ 3 æ¬„ */
    }
    @media(min-width: 900px){
      .product-grid{ grid-template-columns: repeat(4, 1fr); } /* é›»è…¦ 4 æ¬„ */
    }
    
    /* å–®é»é…èœ - åˆ†é¡å®¹å™¨ */
    .side-list{
      display: grid;
      grid-template-columns: repeat(2, 1fr); /* æ‰‹æ©Ÿ 2 æ¬„ */
      gap: clamp(8px, 2vw, 10px);
      align-items: start;
    }
    @media(min-width: 768px){
      .side-list{ grid-template-columns: repeat(3, 1fr); } /* å¹³æ¿ 3 æ¬„ */
    }
    @media(min-width: 1024px){
      .side-list{ grid-template-columns: repeat(4, 1fr); } /* é›»è…¦ 4 æ¬„ */
    }
    
    .side-item{
      display: flex;
      align-items: center;
      gap: clamp(5px, 1.2vw, 7px);
      padding: clamp(7px, 1.8vw, 9px);
      background: #fff;
      border: 1px solid var(--border);
      border-radius: clamp(6px, 1.5vw, 8px);
      transition: all .2s ease;
    }
    .side-item:has(input:not([value="0"])){
      border-color: var(--primary);
      background: #fffbeb;
    }
    .side-item-name{
      flex: 1;
      font-size: clamp(14px, 3.2vw, 15px);
      font-weight: 500;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      letter-spacing: 0.3px;
    }
    .side-item .qty-control{
      padding: clamp(1px, 0.3vw, 2px);
      flex-shrink: 0;
    }
    .side-item .qty-control input{
      width: clamp(28px, 7vw, 32px);
      font-size: clamp(13px, 3vw, 14px);
    }
    .side-item .qty-btn{
      width: clamp(20px, 5vw, 24px);
      height: clamp(20px, 5vw, 24px);
      font-size: clamp(12px, 3vw, 14px);
    }
    .side-item .eye-icon{
      cursor: pointer;
      font-size: clamp(16px, 4vw, 18px);
      opacity: 0.6;
      transition: all .2s ease;
      flex-shrink: 0;
    }
    .side-item .eye-icon:hover{
      opacity: 1;
      transform: scale(1.2);
    }
    
    /* åˆ†é¡å€å¡Š */
    .category-block{
      display: flex;
      flex-direction: column;
    }
    
    /* åˆ†é¡æ¨™é¡Œï¼ˆå¯é»æ“Šæ‘ºç–Šï¼‰ */
    .category-title{
      font-size: clamp(14px, 3.2vw, 15px);
      font-weight: 700;
      color: var(--primary);
      background: linear-gradient(135deg, #fff7ed 0%, #ffedd5 100%);
      padding: clamp(10px, 2.5vw, 12px) clamp(12px, 3vw, 14px);
      border-radius: clamp(8px, 2vw, 10px);
      border: 1.5px solid #fed7aa;
      cursor: pointer;
      user-select: none;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all .2s ease;
      letter-spacing: 0.3px;
      line-height: 1.4;
    }
    .category-title:hover{
      background: linear-gradient(135deg, #ffedd5 0%, #fed7aa 100%);
    }
    .category-title:active{
      transform: scale(0.98);
    }
    .category-title .toggle-icon{
      font-size: clamp(16px, 4vw, 18px);
      transition: transform .2s ease;
    }
    .category-title.active .toggle-icon{
      transform: rotate(180deg);
    }
    
    /* åˆ†é¡å…§å®¹ï¼ˆå¯æ‘ºç–Šï¼‰ */
    .category-content{
      display: flex;
      flex-direction: column;
      gap: clamp(4px, 1vw, 5px);
      margin-top: clamp(4px, 1vw, 5px);
      max-height: 0;
      overflow: hidden;
      transition: max-height .3s ease;
    }
    .category-content.active{
      max-height: 2000px;
    }
    
    /* å•†å“å¡ç‰‡ */
    .product-card{
      background: #fff;
      border: 1.5px solid var(--border);
      border-radius: clamp(6px, 1.5vw, 10px);
      padding: clamp(6px, 1.5vw, 8px);
      transition: all .25s ease;
      position: relative;
    }
    .product-card:has(input[type="number"]:not([value="0"])){
      border-color: var(--primary);
      box-shadow: 0 2px 8px rgba(217,119,6,.15);
    }
    .product-card:active{ transform: scale(0.98); }
    
    /* ç¼ºè²¨å•†å“æ¨£å¼ */
    .product-card.out-of-stock{
      opacity: 0.6;
      pointer-events: none;
    }
    .product-card.out-of-stock .product-image-wrap{
      filter: grayscale(50%);
    }
    
    /* ç¼ºè²¨æ¨™ç±¤ */
    .out-of-stock-badge{
      position: absolute;
      top: 8px;
      right: 8px;
      background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
      color: #fff;
      padding: clamp(4px, 1vw, 6px) clamp(8px, 2vw, 12px);
      border-radius: clamp(4px, 1vw, 6px);
      font-size: clamp(11px, 2.5vw, 12px);
      font-weight: 700;
      z-index: 10;
      box-shadow: 0 2px 8px rgba(220, 38, 38, 0.4);
      letter-spacing: 0.5px;
      display: flex;
      align-items: center;
      gap: 4px;
      animation: pulse 2s ease-in-out infinite;
    }
    .out-of-stock-badge::before{
      content: 'âœ•';
      font-size: clamp(12px, 2.8vw, 14px);
    }
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.8; }
    }
    
    /* èœå–®åœ–ç‰‡å®¹å™¨ */
    .menu-image-wrap{
      position: relative;
      width: 100%;
      padding-top: 75%; /* 4:3 æ¯”ä¾‹ */
      border-radius: clamp(6px, 1.5vw, 10px);
      overflow: hidden;
      cursor: pointer;
      background: #f3f4f6;
      border: 1.5px solid var(--border);
      transition: all .25s ease;
    }
    .menu-image-wrap:hover{
      border-color: var(--primary);
      box-shadow: 0 4px 12px rgba(217,119,6,.2);
    }
    .menu-image{
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: contain; /* å®Œæ•´é¡¯ç¤ºåœ–ç‰‡ */
      object-position: center;
      transition: transform .3s ease;
    }
    .menu-image-wrap:hover .menu-image{
      transform: scale(1.02);
    }
    .menu-image-wrap::after{
      content: 'ğŸ” é»æ“Šæ”¾å¤§';
      position: absolute;
      bottom: 8px;
      right: 8px;
      background: rgba(0,0,0,.7);
      color: #fff;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: clamp(10px, 2.2vw, 11px);
      opacity: 0;
      transition: opacity .2s ease;
    }
    .menu-image-wrap:hover::after{
      opacity: 1;
    }
    
    .product-image-wrap{
      position: relative;
      width: 100%;
      padding-top: 75%; /* æ”¹ç‚º 4:3 æ¯”ä¾‹ï¼Œè®“åœ–ç‰‡ä¸é‚£éº¼å¤§ */
      border-radius: clamp(4px, 1vw, 6px);
      overflow: hidden;
      margin-bottom: clamp(5px, 1.2vw, 6px);
      cursor: pointer;
      background: #f3f4f6;
    }
    .product-image{
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover; /* ç½®ä¸­è£åˆ‡ */
      object-position: center;
      transition: transform .3s ease;
    }
    .product-image-wrap:hover .product-image{
      transform: scale(1.05);
    }
    .product-image-wrap::after{
      content: 'ğŸ”';
      position: absolute;
      top: 4px;
      right: 4px;
      background: rgba(0,0,0,.6);
      color: #fff;
      width: clamp(20px, 5vw, 24px);
      height: clamp(20px, 5vw, 24px);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: clamp(10px, 2.5vw, 12px);
      opacity: 0;
      transition: opacity .2s ease;
    }
    .product-image-wrap:hover::after{
      opacity: 1;
    }
    
    .product-name{
      font-size: clamp(13px, 2.8vw, 14px);
      font-weight: 600;
      margin-bottom: clamp(3px, 0.8vw, 4px);
      color: var(--text);
      line-height: 1.2;
    }
    .product-price{
      font-size: clamp(14px, 3vw, 15px);
      font-weight: 700;
      color: var(--primary);
      margin-bottom: clamp(5px, 1.2vw, 6px);
    }
    .product-qty{
      display: flex;
      align-items: center;
      gap: clamp(4px, 1vw, 5px);
    }
    .product-qty input{
      width: 100%;
      text-align: center;
      padding: clamp(5px, 1.2vw, 6px);
      font-weight: 600;
      font-size: clamp(13px, 3vw, 15px);
    }
    .product-qty select{
      padding: clamp(4px, 1vw, 5px) clamp(6px, 1.5vw, 8px);
      font-size: clamp(10px, 2.2vw, 12px);
      margin-top: clamp(4px, 1vw, 5px);
    }
    
    /* æ•¸é‡æ§åˆ¶æŒ‰éˆ• */
    .qty-control{
      display: flex;
      align-items: center;
      gap: clamp(3px, 0.8vw, 4px);
      background: #fff;
      border: 1.5px solid var(--border);
      border-radius: clamp(6px, 1.5vw, 8px);
      padding: clamp(2px, 0.5vw, 3px);
      transition: all .2s ease;
    }
    .qty-control:has(input:not([value="0"])){
      border-color: var(--primary);
      background: #fffbeb;
    }
    .qty-btn{
      width: clamp(24px, 6vw, 28px);
      height: clamp(24px, 6vw, 28px);
      border: none;
      background: var(--primary);
      color: #fff;
      border-radius: clamp(4px, 1vw, 6px);
      font-size: clamp(14px, 3.5vw, 16px);
      font-weight: 700;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all .2s ease;
      user-select: none;
      flex-shrink: 0;
      padding: 0;
      line-height: 1;
    }
    .qty-btn:active{
      transform: scale(0.9);
      background: var(--primary-dark);
    }
    .qty-btn:hover{
      background: var(--primary-dark);
    }
    .qty-control input{
      border: none;
      background: transparent;
      width: clamp(36px, 9vw, 42px);
      text-align: center;
      padding: clamp(4px, 1vw, 5px);
      font-weight: 600;
      font-size: clamp(14px, 3.2vw, 15px);
      appearance: textfield; /* æ¨™æº–å±¬æ€§ */
      -moz-appearance: textfield; /* Firefox */
    }
    .qty-control input::-webkit-outer-spin-button,
    .qty-control input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    .qty-control input:focus{
      box-shadow: none;
    }
    
    /* ç¸½è¨ˆ */
    .total-section{
      background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
      padding: clamp(10px, 2.5vw, 14px);
      border-radius: var(--radius);
      margin: clamp(10px, 2.5vw, 12px) 0;
    }
    .total-row{
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .total-label{
      font-size: clamp(15px, 3.5vw, 16px);
      font-weight: 600;
    }
    .total-amount{
      font-size: clamp(22px, 5vw, 26px);
      font-weight: 800;
      color: var(--primary);
    }
    
    /* æŒ‰éˆ• */
    .btn-group{
      display: grid;
      grid-template-columns: 1fr 2fr;
      gap: clamp(8px, 2vw, 10px);
      margin-top: clamp(10px, 2.5vw, 12px);
    }
    button{
      padding: clamp(10px, 2.2vw, 12px) clamp(12px, 3vw, 16px);
      border: none;
      border-radius: clamp(6px, 1.5vw, 8px);
      font-size: clamp(14px, 3vw, 15px);
      font-weight: 700;
      cursor: pointer;
      transition: all .2s ease;
      font-family: inherit;
    }
    .btn-primary{
      background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
      color: #fff;
      box-shadow: 0 3px 10px rgba(217,119,6,.3);
    }
    .btn-primary:hover{ box-shadow: 0 4px 14px rgba(217,119,6,.4); transform: translateY(-1px); }
    .btn-primary:active{ transform: translateY(0); }
    
    .btn-ghost{
      background: #fff;
      color: var(--muted);
      border: 1.5px solid var(--border);
    }
    .btn-ghost:hover{ border-color: var(--muted); }
    
    /* è¨Šæ¯ */
    .message{
      margin-top: clamp(8px, 2vw, 10px);
      padding: clamp(8px, 2vw, 10px);
      border-radius: clamp(4px, 1vw, 6px);
      font-size: clamp(13px, 2.8vw, 14px);
      font-weight: 600;
    }
    .message.success{
      background: #d1fae5;
      color: var(--success);
      border: 1.5px solid var(--success);
    }
    .message.error{
      background: #fee2e2;
      color: var(--danger);
      border: 1.5px solid var(--danger);
    }
    
    /* é è¦½å€ */
    .preview-box{
      background: #f9fafb;
      padding: clamp(10px, 2.5vw, 12px);
      border-radius: clamp(6px, 1.5vw, 8px);
      border: 1.5px dashed var(--border);
      min-height: 80px;
      font-size: clamp(13px, 2.8vw, 14px);
      line-height: 1.6;
    }
    .preview-empty{
      color: var(--muted);
      text-align: center;
      padding: clamp(15px, 4vw, 20px);
    }
    .preview-item{
      padding: clamp(4px, 1vw, 5px) 0;
      border-bottom: 1px solid var(--border);
    }
    .preview-item:last-child{ border-bottom: none; }
    
    /* Logo æ”¾å¤§æ¨¡æ…‹æ¡† */
    .modal{
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.8);
      z-index: 999;
      align-items: center;
      justify-content: center;
      padding: 20px;
      animation: fadeIn .2s ease;
    }
    .modal.active{ display: flex; }
    .modal-content{
      max-width: 90%;
      max-height: 90%;
      border-radius: var(--radius);
      animation: zoomIn .2s ease;
    }
    @keyframes fadeIn{ from{opacity:0} to{opacity:1} }
    @keyframes zoomIn{ from{transform:scale(.8)} to{transform:scale(1)} }
    
    /* é è¦½+ç¸½è¨ˆå€åŸŸå®¹å™¨ */
    .summary-grid{
      display: grid;
      grid-template-columns: 1fr;
      gap: clamp(8px, 2vw, 10px);
    }
    
    /* å£å‘³å®¢è£½ç¶²æ ¼ */
    .taste-grid{
      display: grid;
      grid-template-columns: repeat(2, 1fr); /* æ‰‹æ©Ÿ 2x2 */
      gap: clamp(8px, 2vw, 10px);
    }
    
    /* éŸ¿æ‡‰å¼èª¿æ•´ */
    @media(min-width: 768px){
      .container{ padding: clamp(12px, 3vw, 18px); }
      .brand-header{ padding: clamp(16px, 4vw, 24px) clamp(16px, 3vw, 20px); }
      .summary-grid{ grid-template-columns: 1.2fr 0.8fr; } /* é›»è…¦ç‰ˆï¼šé è¦½è¼ƒå¯¬ï¼Œç¸½è¨ˆè¼ƒçª„ */
      .taste-grid{ grid-template-columns: repeat(4, 1fr); } /* é›»è…¦ç‰ˆï¼šä¸€è¡Œ 4 æ¬„ */
    }
  </style>
</head>
<body>
  <!-- å“ç‰Œ Header -->
  <header class="brand-header">
    <div class="brand-logo-wrap">
      <img 
        src="https://images.unsplash.com/photo-1598103442097-8b74394b95c6?w=200&h=200&fit=crop&q=80" 
        alt="æ¥µå“é¹½æ°´é›" 
        class="brand-logo"
        id="brandLogo"
      />
      <div>
        <h1 class="brand-title">æ¥µå“é¹½æ°´é›</h1>
        <p class="brand-subtitle">ğŸ“ å®šé»é¤è»Šï½œé è¨‚å–é¤</p>
      </div>
    </div>
    </header>

  <div class="container">
    <form id="orderForm" autocomplete="on">
      
      <!-- èœå–®åœ–ç‰‡ -->
      <div class="card">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: clamp(8px, 2vw, 12px);">
          <div class="menu-image-wrap" data-image="https://i.postimg.cc/FKLFbHb9/image.jpg" data-name="èœå–®1">
            <img src="https://i.postimg.cc/FKLFbHb9/image.jpg" alt="èœå–®1" class="menu-image" loading="lazy" />
          </div>
          <div class="menu-image-wrap" data-image="https://i.postimg.cc/TwvdtvQ1/image.jpg" data-name="èœå–®2">
            <img src="https://i.postimg.cc/TwvdtvQ1/image.jpg" alt="èœå–®2" class="menu-image" loading="lazy" />
          </div>
        </div>
      </div>

      <!-- åŸºæœ¬è³‡æ–™å¡ç‰‡ -->
      <div class="card">
        <h2 class="section-title">è¨‚è³¼è³‡æ–™</h2>
        
        <div style="display:grid; grid-template-columns:repeat(2,1fr); gap:clamp(12px,3vw,16px);">
          <div class="form-group" style="margin-bottom:0">
            <label class="form-label">é¤ç¾¤å§“å & ç¾¤çµ„ID<span class="required">*</span></label>
            <input required name="name" placeholder="ä¾‹å¦‚ï¼šç‹å°æ˜ #A123" autocomplete="off" />
          </div>

          <div class="form-group" style="margin-bottom:0">
            <label class="form-label">æ‰‹æ©Ÿæœ«3ç¢¼æˆ–å…¨ç¢¼<span class="required">*</span></label>
            <input required name="phone" type="text" placeholder="ä¾‹å¦‚ï¼š123 æˆ– 0912345678" autocomplete="tel" />
          </div>
        </div>

        <div style="display:grid; grid-template-columns:repeat(2,1fr); gap:clamp(12px,3vw,16px); margin-top:clamp(14px,3.5vw,18px);">
          <div class="form-group" style="margin-bottom:0">
            <label class="form-label">å–é¤æ–¹å¼<span class="required">*</span></label>
            <select required name="method">
              <option value="ç¾å ´è‡ªå–">ğŸš¶ ç¾å ´è‡ªå–</option>
              <option value="è¨—äººä»£å–">ğŸ‘¥ è¨—äººä»£å–</option>
            </select>
          </div>

          <div class="form-group" style="margin-bottom:0">
            <label class="form-label">é è¨ˆå–é¤æ™‚é–“<span class="required">*</span></label>
            <div style="display:grid; grid-template-columns:1fr 1fr; gap:clamp(8px,2vw,10px);">
              <select required id="etaHour" style="border-color:var(--accent); font-weight:600;">
                <option value="">æ™‚</option>
                <option value="14">14 é»</option>
                <option value="15">15 é»</option>
                <option value="16">16 é»</option>
                <option value="17">17 é»</option>
                <option value="18">18 é»</option>
                <option value="19">19 é»</option>
                <option value="20">20 é»</option>
              </select>
              <select required id="etaMinute" style="border-color:var(--accent); font-weight:600;">
                <option value="">åˆ†</option>
                <option value="00">00 åˆ†</option>
                <option value="05">05 åˆ†</option>
                <option value="10">10 åˆ†</option>
                <option value="15">15 åˆ†</option>
                <option value="20">20 åˆ†</option>
                <option value="25">25 åˆ†</option>
                <option value="30">30 åˆ†</option>
                <option value="35">35 åˆ†</option>
                <option value="40">40 åˆ†</option>
                <option value="45">45 åˆ†</option>
                <option value="50">50 åˆ†</option>
                <option value="55">55 åˆ†</option>
              </select>
            </div>
            <input type="hidden" name="eta" id="etaCombined" />
          </div>
          </div>
        </div>

      <!-- ä¸»é¤å€ -->
      <div class="card">
        <h2 class="section-title">ä¸»é¤é¸æ“‡ <span style="color:var(--primary);font-size:clamp(14px,3.5vw,16px)">$150/ä»½</span></h2>
        <div class="product-grid" id="mains"></div>
      </div>

      <!-- å–®é»å€ -->
      <div class="card">
        <h2 class="section-title">å–®é»é…èœ <span style="color:var(--primary);font-size:clamp(14px,3.5vw,16px)">$30/ä»½</span></h2>
        <div class="side-list" id="sides"></div>
            </div>

      <!-- å£å‘³å®¢è£½ -->
      <div class="card">
        <h2 class="section-title">å£å‘³å®¢è£½</h2>
        <div class="taste-grid">
          <div class="form-group" style="margin-bottom:0">
            <label class="form-label">ğŸŒ¶ï¸ è¾£åº¦</label>
            <select name="spicy">
              <option value="ä¸è¾£">ä¸è¾£</option>
              <option value="å¾®è¾£">å¾®è¾£</option>
              <option value="å°è¾£">å°è¾£</option>
              <option value="ä¸­è¾£">ä¸­è¾£</option>
              <option value="å¤§è¾£">å¤§è¾£</option>
            </select>
          </div>

          <div class="form-group" style="margin-bottom:0">
            <label class="form-label">ğŸ§‚ é¹¹åº¦</label>
            <select name="saltiness">
              <option value="æ¸…æ·¡">æ¸…æ·¡</option>
              <option value="æ­£å¸¸" selected>æ­£å¸¸</option>
              <option value="é‡é¹¹">é‡é¹¹</option>
            </select>
          </div>

          <div class="form-group" style="margin-bottom:0">
            <label class="form-label">ğŸ‹ æª¸æª¬</label>
            <select name="lemon">
              <option value="åŠ æª¸æª¬" selected>åŠ æª¸æª¬</option>
              <option value="ä¸åŠ æª¸æª¬">ä¸åŠ æª¸æª¬</option>
            </select>
            </div>

          <div class="form-group" style="margin-bottom:0">
            <label class="form-label">ğŸ§… è”¥æ³¥</label>
            <select name="scallion">
              <option value="åŠ è”¥æ³¥" selected>åŠ è”¥æ³¥</option>
              <option value="ä¸åŠ è”¥æ³¥">ä¸åŠ è”¥æ³¥</option>
            </select>
          </div>
        </div>

        <div class="form-group" style="margin-top:clamp(16px,4vw,18px); margin-bottom:0;">
          <label class="form-label">ğŸ’¬ å‚™è¨»èªªæ˜</label>
          <textarea name="note" placeholder="ä¾‹å¦‚ï¼šä¸åƒé¦™èœã€å¤šé»ƒç“œã€å»éª¨â€¦"></textarea>
        </div>
      </div>

      <!-- è¨‚å–®é è¦½ + ç¸½è¨ˆï¼ˆå¤šæ¬„ä½ˆå±€ï¼‰ -->
      <div class="summary-grid">
        
        <!-- è¨‚å–®é è¦½ -->
        <div class="card">
          <h2 class="section-title">ğŸ“‹ è¨‚å–®é è¦½</h2>
          <div class="preview-box" id="preview">
            <div class="preview-empty">å°šæœªé¸æ“‡å•†å“</div>
          </div>
        </div>

        <!-- ç¸½è¨ˆèˆ‡æŒ‰éˆ• -->
        <div class="card">
          <div class="total-section">
            <div class="total-row">
              <span class="total-label">è¨‚å–®ç¸½é¡</span>
              <span class="total-amount" id="totalAmt">$0</span>
            </div>
          </div>

          <div class="btn-group">
            <button type="button" class="btn-ghost" id="resetBtn">æ¸…ç©ºé‡å¡«</button>
            <button type="submit" class="btn-primary">âœ“ é€å‡ºè¨‚å–®</button>
          </div>

          <div id="result"></div>
        </div>

      </div>

    </form>
    </div>

  <!-- åœ–ç‰‡æ”¾å¤§æ¨¡æ…‹æ¡† -->
  <div class="modal" id="imageModal">
    <img 
      src="" 
      alt=""
      class="modal-content"
      id="modalImage"
    />
  </div>

  <script>
    // === åƒ¹æ ¼è¨­å®š ===
    const PRICE = {
      main: 150,
      side: 30
    };

    // === å•†å“é …ç›®ï¼ˆå«åœ–ç‰‡ï¼‰ ===
    const MAIN_ITEMS = [
      { name: "é¹½æ°´åŠé›", img: "https://images.unsplash.com/photo-1598103442097-8b74394b95c6?w=400&h=400&fit=crop&q=80" },
      { name: "ç…™ç‡»åŠé›", img: "https://images.unsplash.com/photo-1594221708779-94832f4320d1?w=400&h=400&fit=crop&q=80" },
      { name: "æ²¹é›è…¿", img: "https://images.unsplash.com/photo-1604503468506-a8da13d82791?w=400&h=400&fit=crop&q=80" },
      { name: "æ²¹é›èƒ¸", img: "https://images.unsplash.com/photo-1633237308525-cd587cf71926?w=400&h=400&fit=crop&q=80" }
    ];
    
    // åº«å­˜ç‹€æ…‹ï¼ˆå¾å¾Œç«¯å‹•æ…‹è¼‰å…¥ï¼‰
    let INVENTORY = {};
    
    const SIDE_ITEMS = {
      "è‘‰èœé¡": [
        { name: "èŠ±æ¤°èœ" },
        { name: "é¾é¬šèœ" },
        { name: "é«˜éº—èœ" },
        { name: "å¨ƒå¨ƒèœ" }
      ],
      "ç“œé¡": [
        { name: "ç¶ è‹¦ç“œ" },
        { name: "å°é»ƒç“œ" }
      ],
      "è‡é¡": [
        { name: "é‡‘é‡è‡" },
        { name: "æé®‘è‡" },
        { name: "é®®é¦™è‡" },
        { name: "é»‘æœ¨è€³" }
      ],
      "æ ¹è–é¡": [
        { name: "ç‰ç±³ç­" },
        { name: "ç­ç™½ç­" },
        { name: "ç™½è˜¿è””" },
        { name: "ç´…è˜¿è””" },
        { name: "æ´‹è”¥" },
        { name: "è“®è—•" },
        { name: "è„†ç­ç‰‡" }
      ],
      "è±†è£½å“": [
        { name: "è±†çš®" },
        { name: "ç™¾é è±†è…" },
        { name: "å°è±†å¹²" }
      ],
      "å…¶ä»–": [
        { name: "å››å­£è±†" },
        { name: "æµ·å¸¶æ ¹" },
        { name: "çš®è›‹" },
        { name: "éµªé¶‰è›‹" },
        { name: "é›çš®" },
        { name: "é›å† " },
        { name: "é›è›‹é»ƒ" },
        { name: "é›è›‹è…¸" }
      ]
    };

    // Google Apps Script URL
    const GAS_ENDPOINT = "https://script.google.com/macros/s/AKfycbyMCIfVwJpnbMAnjAh-FKBxxc8jONLyCiib86RR6IPgWUcqth0KmSc0I82CKOKkZb0m/exec";

    // ====== è¼‰å…¥åº«å­˜ç‹€æ…‹ ======
    async function loadInventory() {
      try {
        const res = await fetch(`${GAS_ENDPOINT}?action=getInventory`);
        const data = await res.json();
        
        if (data.ok) {
          INVENTORY = data.inventory;
          console.log('åº«å­˜å·²è¼‰å…¥:', INVENTORY);
          
          // æ›´æ–°å•†å“å¡ç‰‡çš„ç¼ºè²¨ç‹€æ…‹
          updateStockStatus();
        }
      } catch (err) {
        console.warn('ç„¡æ³•è¼‰å…¥åº«å­˜ï¼Œä½¿ç”¨é è¨­è¨­å®š:', err);
        // å¦‚æœç„¡æ³•é€£ç·šï¼Œä»å…è¨±è¨‚è³¼ï¼ˆé™ç´šè™•ç†ï¼‰
      }
    }

    // ====== æ›´æ–°å•†å“çš„ç¼ºè²¨ç‹€æ…‹ ======
    function updateStockStatus() {
      // æ›´æ–°ä¸»é¤çš„ç¼ºè²¨ç‹€æ…‹
      document.querySelectorAll('#mains .product-card').forEach(card => {
        const input = card.querySelector('input.qty');
        const itemName = input?.dataset.name;
        
        if (itemName && INVENTORY[itemName]) {
          const stock = INVENTORY[itemName];
          
          if (!stock.available || stock.stock <= 0) {
            // æ¨™è¨˜ç‚ºç¼ºè²¨
            card.classList.add('out-of-stock');
            
            // ç¦ç”¨è¼¸å…¥å’ŒæŒ‰éˆ•
            card.querySelectorAll('input, button, select').forEach(el => {
              el.disabled = true;
            });
            
            // æ·»åŠ ç¼ºè²¨æ¨™ç±¤ï¼ˆå¦‚æœé‚„æ²’æœ‰ï¼‰
            if (!card.querySelector('.out-of-stock-badge')) {
              const badge = document.createElement('div');
              badge.className = 'out-of-stock-badge';
              badge.textContent = 'ç¼ºè²¨ä¸­';
              card.insertBefore(badge, card.firstChild);
            }
          } else {
            // ç§»é™¤ç¼ºè²¨æ¨™è¨˜
            card.classList.remove('out-of-stock');
            card.querySelectorAll('input, button, select').forEach(el => {
              el.disabled = false;
            });
            const badge = card.querySelector('.out-of-stock-badge');
            if (badge) badge.remove();
          }
        }
      });
      
      // æ›´æ–°å–®é»é…èœçš„ç¼ºè²¨ç‹€æ…‹
      document.querySelectorAll('#sides .side-item').forEach(item => {
        const input = item.querySelector('input.qty');
        const itemName = input?.dataset.name;
        
        if (itemName && INVENTORY[itemName]) {
          const stock = INVENTORY[itemName];
          
          if (!stock.available || stock.stock <= 0) {
            item.style.opacity = '0.5';
            item.querySelectorAll('input, button').forEach(el => {
              el.disabled = true;
            });
            
            // æ·»åŠ ç¼ºè²¨æç¤º
            if (!item.querySelector('.stock-badge')) {
              const badge = document.createElement('span');
              badge.className = 'stock-badge';
              badge.style.cssText = 'color: var(--danger); font-size: 10px; margin-left: 4px;';
              badge.textContent = '(ç¼ºè²¨)';
              item.querySelector('.side-item-name').appendChild(badge);
            }
          }
        }
      });
    }

    // ====== ç”¢ç”Ÿå•†å“å¡ç‰‡ï¼ˆå¤šæ¬„ç¶²æ ¼ + åœ–ç‰‡ï¼‰ ======
    const mainsBox = document.querySelector('#mains');
    MAIN_ITEMS.forEach(item => {
      const card = document.createElement('div');
      card.className = item.outOfStock ? 'product-card out-of-stock' : 'product-card';
      card.innerHTML = `
        ${item.outOfStock ? '<div class="out-of-stock-badge">ç¼ºè²¨ä¸­</div>' : ''}
        <div class="product-image-wrap" data-image="${item.img.replace('w=400&h=400', 'w=800&h=800')}" data-name="${item.name}">
          <img src="${item.img}" alt="${item.name}" class="product-image" loading="lazy" />
        </div>
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:clamp(5px,1.2vw,6px);">
          <div class="product-name" style="margin-bottom:0;">${item.name}</div>
          <div class="product-price" style="margin-bottom:0;">$${PRICE.main}</div>
        </div>
        <div style="display:grid; grid-template-columns:1fr 1fr; gap:clamp(4px,1vw,6px);">
          <div class="qty-control">
            <button type="button" class="qty-btn" data-action="decrease" data-target="${item.name}" ${item.outOfStock ? 'disabled' : ''}>âˆ’</button>
            <input 
              type="number" 
              min="0" 
              max="99"
              value="0" 
              data-type="main" 
              data-name="${item.name}" 
              class="qty"
              ${item.outOfStock ? 'disabled' : ''}
            />
            <button type="button" class="qty-btn" data-action="increase" data-target="${item.name}" ${item.outOfStock ? 'disabled' : ''}>+</button>
          </div>
          <select data-cut="${item.name}" style="width:100%; font-size:clamp(11px,2.5vw,12px);" ${item.outOfStock ? 'disabled' : ''}>
            <option>å»éª¨</option>
            <option>ä¿ç•™éª¨é ­</option>
          </select>
        </div>
      `;
      mainsBox.appendChild(card);
    });

    const sidesBox = document.querySelector('#sides');
    
    // ä¾åˆ†é¡ç”Ÿæˆå–®é»é…èœï¼ˆå¯æ‘ºç–Šï¼‰
    Object.keys(SIDE_ITEMS).forEach((category, index) => {
      // åˆ†é¡å€å¡Šå®¹å™¨
      const categoryBlock = document.createElement('div');
      categoryBlock.className = 'category-block';
      
      // åˆ†é¡æ¨™é¡Œ
      const categoryTitle = document.createElement('div');
      categoryTitle.className = 'category-title';
      categoryTitle.innerHTML = `
        <span>${category} <small style="opacity:0.7">(${SIDE_ITEMS[category].length}é …)</small></span>
        <span class="toggle-icon">â–¼</span>
      `;
      categoryBlock.appendChild(categoryTitle);
      
      // åˆ†é¡å…§å®¹
      const categoryContent = document.createElement('div');
      categoryContent.className = 'category-content';
      // æ‰€æœ‰åˆ†é¡é è¨­æ”¶åˆ
      
      // è©²åˆ†é¡çš„å“é …
      SIDE_ITEMS[category].forEach(item => {
        const sideItem = document.createElement('div');
        sideItem.className = 'side-item';
        sideItem.innerHTML = `
          <div class="side-item-name">${item.name}</div>
          <div class="qty-control">
            <button type="button" class="qty-btn" data-action="decrease" data-target="${item.name}">âˆ’</button>
            <input 
              type="number" 
              min="0" 
              max="99"
              value="0" 
              data-type="side" 
              data-name="${item.name}" 
              class="qty"
            />
            <button type="button" class="qty-btn" data-action="increase" data-target="${item.name}">+</button>
          </div>
        `;
        categoryContent.appendChild(sideItem);
      });
      
      categoryBlock.appendChild(categoryContent);
      sidesBox.appendChild(categoryBlock);
      
      // é»æ“Šæ¨™é¡Œåˆ‡æ›å±•é–‹/æ”¶åˆ
      categoryTitle.addEventListener('click', () => {
        categoryTitle.classList.toggle('active');
        categoryContent.classList.toggle('active');
      });
    });

    // ====== åœ–ç‰‡é»æ“Šæ”¾å¤§åŠŸèƒ½ ======
    const imageModal = document.getElementById('imageModal');
    const modalImage = document.getElementById('modalImage');
    
    // å“ç‰Œ Logo é»æ“Šæ”¾å¤§
    const brandLogo = document.getElementById('brandLogo');
    brandLogo.addEventListener('click', () => {
      modalImage.src = "https://images.unsplash.com/photo-1598103442097-8b74394b95c6?w=800&h=800&fit=crop&q=80";
      modalImage.alt = "æ¥µå“é¹½æ°´é›";
      imageModal.classList.add('active');
    });
    
    // å•†å“åœ–ç‰‡é»æ“Šæ”¾å¤§ï¼ˆäº‹ä»¶å§”æ´¾ï¼‰
    document.addEventListener('click', (e) => {
      const menuImageWrap = e.target.closest('.menu-image-wrap');
      const imageWrap = e.target.closest('.product-image-wrap');
      
      if (menuImageWrap) {
        // èœå–®åœ–ç‰‡é»æ“Šæ”¾å¤§
        const largeImage = menuImageWrap.dataset.image;
        const name = menuImageWrap.dataset.name;
        modalImage.src = largeImage;
        modalImage.alt = name;
        imageModal.classList.add('active');
      } else if (imageWrap) {
        const largeImage = imageWrap.dataset.image;
        const name = imageWrap.dataset.name;
        modalImage.src = largeImage;
        modalImage.alt = name;
        imageModal.classList.add('active');
      }
    });
    
    // é»æ“Šæ¨¡æ…‹æ¡†é—œé–‰
    imageModal.addEventListener('click', () => {
      imageModal.classList.remove('active');
    });

    // ====== å–é¤æ™‚é–“çµ„åˆ ======
    const etaHour = document.getElementById('etaHour');
    const etaMinute = document.getElementById('etaMinute');
    const etaCombined = document.getElementById('etaCombined');
    
    function updateEta() {
      const hour = etaHour.value;
      const minute = etaMinute.value;
      if (hour && minute) {
        etaCombined.value = `${hour}:${minute}`;
      } else {
        etaCombined.value = '';
      }
    }
    
    etaHour.addEventListener('change', updateEta);
    etaMinute.addEventListener('change', updateEta);

    // ====== æ•¸é‡å¢æ¸›æŒ‰éˆ•äº‹ä»¶ ======
    document.addEventListener('click', (e) => {
      const btn = e.target.closest('.qty-btn');
      if (!btn) return;
      
      const action = btn.dataset.action;
      const targetName = btn.dataset.target;
      const input = document.querySelector(`input[data-name="${targetName}"]`);
      
      if (!input) return;
      
      let currentValue = parseInt(input.value) || 0;
      
      if (action === 'increase' && currentValue < 99) {
        currentValue++;
      } else if (action === 'decrease' && currentValue > 0) {
        currentValue--;
      }
      
      input.value = currentValue;
      input.setAttribute('value', currentValue);
      
      // è§¸ç™¼è¨ˆç®—
      recalc();
    });

    // ====== å³æ™‚è¨ˆç®—èˆ‡é è¦½ ======
    const qtyInputs = document.querySelectorAll('.qty');
    const previewEl = document.querySelector('#preview');
    const totalEl = document.querySelector('#totalAmt');
    const form = document.querySelector('#orderForm');
    const result = document.querySelector('#result');

    qtyInputs.forEach(input => {
      input.addEventListener('input', recalc);
      // æ›´æ–° value å±¬æ€§ä»¥ä¾¿ CSS :has() é¸æ“‡å™¨ç”Ÿæ•ˆ
      input.addEventListener('input', function() {
        this.setAttribute('value', this.value);
      });
    });

    function recalc() {
      let items = [];
      let total = 0;

      qtyInputs.forEach(q => {
        const n = parseInt(q.value || '0', 10);
        if (n > 0) {
          const name = q.dataset.name;
          const kind = q.dataset.type;
          const price = (kind === 'main') ? PRICE.main : PRICE.side;
          total += n * price;
          items.push({name, qty: n, price, subtotal: n * price});
        }
      });

      if (items.length === 0) {
        previewEl.innerHTML = '<div class="preview-empty">å°šæœªé¸æ“‡å•†å“</div>';
      } else {
        previewEl.innerHTML = items.map(item => `
          <div class="preview-item">
            <strong>${item.name}</strong> Ã— ${item.qty} 
            <span style="float:right;color:var(--primary)">$${item.subtotal}</span>
          </div>
        `).join('');
      }

      totalEl.textContent = `$${total}`;
      return {items, total};
    }

    recalc();

    // ====== é é¢è¼‰å…¥æ™‚åˆå§‹åŒ– ======
    window.addEventListener('DOMContentLoaded', () => {
      // è¼‰å…¥åº«å­˜ç‹€æ…‹
      loadInventory();
    });

    // ====== æ¸…ç©ºæŒ‰éˆ• ======
    document.querySelector('#resetBtn').addEventListener('click', () => {
      if (confirm('ç¢ºå®šè¦æ¸…ç©ºæ‰€æœ‰é¸é …å—ï¼Ÿ')) {
        form.reset();
        // é‡ç½®æ™‚é–“é¸æ“‡
        etaHour.value = '';
        etaMinute.value = '';
        etaCombined.value = '';
        
        // é‡ç½®æ•¸é‡è¼¸å…¥
        qtyInputs.forEach(q => {
          q.value = 0;
          q.setAttribute('value', '0');
        });
        recalc();
        result.innerHTML = '';
      }
    });

    // ====== è¡¨å–®é€å‡º ======
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const {items, total} = recalc();
      
      // é©—è­‰æ™‚é–“
      if (!etaCombined.value) {
        result.innerHTML = '<div class="message error">âš ï¸ è«‹é¸æ“‡å–é¤æ™‚é–“</div>';
        return;
      }
      
      if (items.length === 0) {
        result.innerHTML = '<div class="message error">âš ï¸ è«‹è‡³å°‘é¸æ“‡ 1 é …å•†å“</div>';
        return;
      }

      // æ”¶é›†å£å‘³é¸é …
      const tasteOptions = {
        è¾£åº¦: form.spicy.value,
        é¹¹åº¦: form.saltiness.value,
        æª¸æª¬: form.lemon.value,
        è”¥æ³¥: form.scallion.value
      };

      // æ”¶é›†å»éª¨é¸é …
      const cuts = {};
      document.querySelectorAll('select[data-cut]').forEach(s => {
        const qty = document.querySelector(`input[data-name="${s.dataset.cut}"]`).value;
        if (parseInt(qty) > 0) {
        cuts[s.dataset.cut] = s.value;
        }
      });

      const itemsDetail = items.map(it => `${it.name} x${it.qty}`).join(' / ');
      
      // æ ¼å¼åŒ–å£å‘³å’Œå»éª¨é€‰é¡¹ä¸ºå­—ç¬¦ä¸²ï¼ˆç°¡åŒ–æ ¼å¼ï¼‰
      const tasteStr = Object.entries(tasteOptions).map(([k, v]) => v).join('ã€');
      const cutStr = Object.entries(cuts).map(([k, v]) => `${k}:${v}`).join(', ');

      // ç”Ÿæˆæ ¼å¼åŒ–è¨‚å–®æ‘˜è¦ï¼ˆç”¨æ–¼é¡¯ç¤ºå’Œå„²å­˜ï¼‰
      const nameParts = form.name.value.trim().split(/[\s\#]/);
      const mainName = nameParts[0] || '';
      const phone = form.phone.value.trim();
      const last3Digits = phone.slice(-3);
      const [hour, minute] = etaCombined.value.split(':');
      const timeStr = `${hour}é»${minute}åˆ†`;
      
      // æ ¼å¼åŒ–é¤é»ï¼ˆæ¯è¡Œ3å€‹ï¼‰
      const itemLines = [];
      for (let i = 0; i < items.length; i += 3) {
        const lineItems = items.slice(i, i + 3).map(it => `${it.name} x${it.qty}`).join(' / ');
        itemLines.push(lineItems);
      }
      const itemsText = itemLines.join('\n');
      
      // æ ¼å¼åŒ–èª¿å‘³
      const tasteText = Object.entries(tasteOptions).map(([k, v]) => `${k}ï¼š${v}`).join('\n');
      
      // çµ„åˆè¨‚å–®æ‘˜è¦
      const orderSummary = `â‘  å§“å.å¾Œä¸‰ç¢¼ï¼š${mainName}.${last3Digits}
â‘¡ æƒ³é è¨‚çš„æ™‚é–“ï¼š${timeStr}
â‘¢ æƒ³é è¨‚çš„é¤é»ï¼š
${itemsText}
â‘£ æƒ³æ­é…çš„èª¿å‘³ï¼š
${tasteText}
é‡‘é¡ï¼š${total}`;

      const payload = {
        ts: new Date().toISOString(),
        name: form.name.value.trim(),
        phone: form.phone.value.trim(),
        method: form.method.value,
        eta: etaCombined.value,
        itemsDetail,
        total,
        taste: tasteStr,
        cut: cutStr,
        note: form.note.value.trim(),
        orderSummary: orderSummary,
        source: 'web'
      };

      try {
        result.innerHTML = '<div class="message">â³ é€å‡ºä¸­ï¼Œè«‹ç¨å€™...</div>';
        
        // ä½¿ç”¨ FormData æ ¼å¼ï¼ˆGoogle Apps Script æ›´ç›¸å®¹ï¼‰
        const formData = new FormData();
        Object.keys(payload).forEach(key => {
          formData.append(key, payload[key]);
        });
        
        const res = await fetch(GAS_ENDPOINT, {
          method: 'POST',
          body: formData
        });
        
        const data = await res.json();
        
        if (data.ok) {
          // ä½¿ç”¨å·²ç”Ÿæˆçš„ orderSummary
          result.innerHTML = `
            <div class="message success">
              âœ… è¨‚å–®å·²é€å‡ºï¼<br/>
              <strong>è¨‚å–®ç·¨è™Ÿï¼š${data.orderNo}</strong><br/>
              <small>è«‹æº–æ™‚æ–¼ä»Šæ—¥ ${etaCombined.value} å–é¤</small>
            </div>
            <div style="
              margin-top: 12px;
              padding: 14px;
              background: #f9fafb;
              border: 1.5px solid var(--border);
              border-radius: clamp(8px, 2vw, 10px);
              font-size: clamp(12px, 3vw, 13px);
              line-height: 1.8;
              white-space: pre-line;
              font-family: monospace;
              position: relative;
            ">
              <div style="
                display: flex;
                align-items: center;
                justify-content: space-between;
                margin-bottom: 12px;
                padding-bottom: 8px;
                border-bottom: 1px solid var(--border);
              ">
                <span style="
                  font-weight: 600;
                  color: var(--text);
                  font-size: clamp(13px, 3.2vw, 14px);
                  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                ">æ‚¨æ­¤æ¬¡çš„è¨‚å–®å¦‚ä¸‹</span>
                <button 
                  type="button"
                  onclick="navigator.clipboard.writeText(this.parentElement.nextElementSibling.textContent); this.textContent='âœ“ å·²è¤‡è£½'; setTimeout(()=>this.textContent='ğŸ“‹ è¤‡è£½è¨‚å–®', 2000)"
                  style="
                    padding: 4px 10px;
                    background: var(--primary);
                    color: white;
                    border: none;
                    border-radius: 6px;
                    font-size: clamp(10px, 2.5vw, 11px);
                    cursor: pointer;
                    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                    white-space: nowrap;
                  "
                >ğŸ“‹ è¤‡è£½è¨‚å–®</button>
              </div>
              <div>${orderSummary}</div>
            </div>
          `;
          // å¯é¸ï¼šè‡ªå‹•æ»¾å‹•åˆ°è¨Šæ¯ä½ç½®
          result.scrollIntoView({behavior: 'smooth', block: 'center'});
        } else {
          result.innerHTML = `<div class="message error">âŒ é€å‡ºå¤±æ•—ï¼š${data.msg || 'æœªçŸ¥éŒ¯èª¤'}</div>`;
        }
      } catch (err) {
        console.error('è©³ç´°éŒ¯èª¤:', err);
        result.innerHTML = `<div class="message error">âŒ é€£ç·šå¤±æ•—ï¼š${err.message}<br/><small>è«‹æª¢æŸ¥ç¶²è·¯æˆ–è¯ç¹«ç®¡ç†å“¡</small></div>`;
      }
    });
  </script>
</body>
</html>
