<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="楊梅人在地生活集 - 提供房產工具、生活服務、補助優惠等一站式服務">
<meta name="keywords" content="房產,房貸,裝潢,補助,生活服務,房產計算器,房貸試算,裝潢估價">
<meta name="author" content="楊梅人在地生活集">
<meta name="robots" content="index, follow">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<!-- PWA相關 -->
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#6366f1">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="濬瑒房產">
<link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 192 192'%3E%3Cdefs%3E%3ClinearGradient id='grad1' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%236366f1;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%238b5cf6;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='192' height='192' rx='32' fill='url(%23grad1)'/%3E%3Ctext x='96' y='110' font-family='Arial, sans-serif' font-size='80' font-weight='bold' text-anchor='middle' fill='white'%3E🏠%3C/text%3E%3C/svg%3E">

<!-- 結構化數據 -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "楊梅人在地生活集",
  "url": "https://realtor-platform.com",
  "description": "提供房產工具、生活服務、補助優惠等一站式服務",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://realtor-platform.com/search?q={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script>

<title>楊梅人在地生活集 - 房產工具、生活服務一站式平台</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
<link rel="preload" href="https://cdn.tailwindcss.com" as="script">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" as="style">
<style>
:root{
  --grad:linear-gradient(135deg,#6366f1,#8b5cf6);
  --grad-secondary:linear-gradient(135deg,#f59e0b,#ef4444);
  --grad-success:linear-gradient(135deg,#10b981,#059669);
  --grad-warning:linear-gradient(135deg,#f59e0b,#d97706);
  --grad-info:linear-gradient(135deg,#3b82f6,#1d4ed8);
  --grad-worship:linear-gradient(135deg,#8b5cf6,#a855f7,#c084fc);
  --glass-bg:rgba(255,255,255,0.7);
  --glass-dark:rgba(30,30,30,0.7);
  --glass-worship:rgba(139,92,246,0.15);
  --shadow-light:0 4px 20px rgba(0,0,0,.08);
  --shadow-hover:0 8px 30px rgba(0,0,0,.12);
  --shadow-glow:0 0 30px rgba(99,102,241,0.4);
  --shadow-worship:0 0 25px rgba(139,92,246,0.3);
  --border-radius:1.25rem;
  --transition:all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  --bounce:all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  --backdrop-blur:blur(20px);
}

/* 基礎樣式 */
body{
  background:linear-gradient(135deg,#f0f4ff 0%,#e0e7ff 50%,#fff 100%);
  background-attachment:fixed;
  transition:var(--transition);
  font-family:system-ui,-apple-system,sans-serif;
  line-height:1.6;
  position:relative;
}
body::before{
  content:'';
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:radial-gradient(circle at 20% 80%,rgba(99,102,241,0.1) 0%,transparent 50%),
              radial-gradient(circle at 80% 20%,rgba(139,92,246,0.1) 0%,transparent 50%),
              radial-gradient(circle at 40% 40%,rgba(59,130,246,0.05) 0%,transparent 50%);
  pointer-events:none;
  z-index:-1;
}
body.dark{
  background:linear-gradient(135deg,#0f172a 0%,#1e293b 50%,#334155 100%);
  color:#e2e8f0;
}
body.dark::before{
  background:radial-gradient(circle at 20% 80%,rgba(99,102,241,0.15) 0%,transparent 50%),
              radial-gradient(circle at 80% 20%,rgba(139,92,246,0.15) 0%,transparent 50%),
              radial-gradient(circle at 40% 40%,rgba(59,130,246,0.1) 0%,transparent 50%);
}

/* 玻璃擬態效果 */
.glass-card{
  background:var(--glass-bg);
  backdrop-filter:var(--backdrop-blur);
  -webkit-backdrop-filter:var(--backdrop-blur);
  border-radius:var(--border-radius);
  border:1px solid rgba(255,255,255,0.3);
  box-shadow:var(--shadow-light);
  transition:var(--transition);
}
body.dark .glass-card{
  background:var(--glass-dark);
  border:1px solid rgba(255,255,255,0.15);
}
.glass-card:hover{
  transform:translateY(-2px);
  box-shadow:var(--shadow-hover);
}

/* 應用卡片 */
.app-card{
  text-align:center;
  padding:1rem;
  border-radius:var(--border-radius);
  box-shadow:var(--shadow-light);
  cursor:pointer;
  transition:var(--bounce);
  min-height:70px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:600;
  font-size:0.9rem;
  position:relative;
  overflow:hidden;
}
.app-card::before{
  content:'';
  position:absolute;
  top:0;
  left:-100%;
  width:100%;
  height:100%;
  background:linear-gradient(90deg,transparent,rgba(255,255,255,0.2),transparent);
  transition:left 0.5s;
}
.app-card:hover::before{
  left:100%;
}
.app-card:hover{
  transform:translateY(-6px) scale(1.02);
  box-shadow:var(--shadow-hover);
}
.app-card:focus{
  outline:3px solid #6366f1;
  outline-offset:3px;
}

/* 特殊卡片樣式 */
.app-card.property{background:var(--grad);color:#fff;box-shadow:0 4px 20px rgba(99,102,241,0.3);}
.app-card.life{background:var(--grad-success);color:#fff;box-shadow:0 4px 20px rgba(16,185,129,0.3);}
.app-card.fun{background:var(--grad-warning);color:#fff;box-shadow:0 4px 20px rgba(245,158,11,0.3);}
.app-card.tool{background:var(--grad-info);color:#fff;box-shadow:0 4px 20px rgba(59,130,246,0.3);}
.app-card.investment{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;box-shadow:0 4px 20px rgba(102,126,234,0.3);}
.app-card.renovation{background:linear-gradient(135deg,#43e97b 0%,#38f9d7 100%);color:#fff;box-shadow:0 4px 20px rgba(67,233,123,0.3);}
.app-card.subsidy{background:linear-gradient(135deg,#fa709a 0%,#fee140 100%);color:#fff;box-shadow:0 4px 20px rgba(250,112,154,0.3);}
.app-card.local{background:linear-gradient(135deg,#4facfe 0%,#00f2fe 100%);color:#fff;box-shadow:0 4px 20px rgba(79,172,254,0.3);}
.app-card.food{background:linear-gradient(135deg,#f59e0b 0%,#ef4444 100%);color:#fff;box-shadow:0 4px 20px rgba(245,158,11,0.3);}
.app-card.assistant{background:linear-gradient(135deg,#06b6d4 0%,#3b82f6 100%);color:#fff;box-shadow:0 4px 20px rgba(6,182,212,0.3);}
.app-card.worship{
  background:var(--grad-worship);
  color:#fff;
  box-shadow:var(--shadow-worship);
  position:relative;
  animation:worshipGlow 3s ease-in-out infinite;
}
.app-card.worship::after{
  content:'✨';
  position:absolute;
  top:5px;
  right:5px;
  font-size:0.8rem;
  animation:sparkle 2s ease-in-out infinite;
}

/* 趣味互動主題樣式 */
.fun-card {
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(10px);
  border-radius: 1rem;
  padding: 1.5rem;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.fun-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
}

body.dark .fun-card {
  background: rgba(30, 30, 30, 0.9);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

/* 輕鬆時光 - 簡潔現代風格 */
.relaxed-card {
  background: white;
  border-radius: 1rem;
  padding: 1.5rem;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 2px solid transparent;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
  position: relative;
  overflow: hidden;
}

.relaxed-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(135deg, transparent 0%, rgba(255, 255, 255, 0.1) 100%);
  opacity: 0;
  transition: opacity 0.3s ease;
}

.relaxed-card:hover::before {
  opacity: 1;
}

.relaxed-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
}

.relaxed-card.games {
  border-color: #6366f1;
  background: linear-gradient(135deg, #f8faff 0%, #ffffff 100%);
}

.relaxed-card.games:hover {
  border-color: #4f46e5;
  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
  color: white;
}

.relaxed-card.fortune {
  border-color: #ec4899;
  background: linear-gradient(135deg, #fdf2f8 0%, #ffffff 100%);
}

.relaxed-card.fortune:hover {
  border-color: #db2777;
  background: linear-gradient(135deg, #ec4899 0%, #f59e0b 100%);
  color: white;
}

.relaxed-card.mbti {
  border-color: #06b6d4;
  background: linear-gradient(135deg, #f0fdff 0%, #ffffff 100%);
}

.relaxed-card.mbti:hover {
  border-color: #0891b2;
  background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%);
  color: white;
}

.relaxed-card.quote {
  border-color: #10b981;
  background: linear-gradient(135deg, #f0fdf4 0%, #ffffff 100%);
}

.relaxed-card.quote:hover {
  border-color: #059669;
  background: linear-gradient(135deg, #10b981 0%, #06b6d4 100%);
  color: white;
}

.relaxed-card .card-icon {
  font-size: 2.5rem;
  margin-bottom: 0.75rem;
  display: block;
  transition: transform 0.3s ease;
}

.relaxed-card:hover .card-icon {
  transform: scale(1.1);
}

.relaxed-card .card-title {
  font-size: 1rem;
  font-weight: 600;
  color: #374151;
  transition: color 0.3s ease;
}

.relaxed-card:hover .card-title {
  color: white;
}

/* 深色模式 */
body.dark .relaxed-card {
  background: #1f2937;
  border-color: #374151;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

body.dark .relaxed-card .card-title {
  color: #f9fafb;
}

body.dark .relaxed-card.games {
  background: linear-gradient(135deg, #1e1b4b 0%, #1f2937 100%);
}

body.dark .relaxed-card.fortune {
  background: linear-gradient(135deg, #451a03 0%, #1f2937 100%);
}

body.dark .relaxed-card.mbti {
  background: linear-gradient(135deg, #164e63 0%, #1f2937 100%);
}

body.dark .relaxed-card.quote {
  background: linear-gradient(135deg, #064e3b 0%, #1f2937 100%);
}

/* 響應式 */
@media (max-width: 640px) {
  .relaxed-card {
    padding: 1rem;
  }
  
  .relaxed-card .card-icon {
    font-size: 2rem;
    margin-bottom: 0.5rem;
  }
  
  .relaxed-card .card-title {
    font-size: 0.875rem;
  }
}

.fortune-card {
  background: linear-gradient(135deg, #8b5cf6, #a855f7);
  color: white;
}

.mbti-card {
  background: linear-gradient(135deg, #f59e0b, #f97316);
  color: white;
}

.mini-fun-card {
  background: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(8px);
  border-radius: 0.75rem;
  padding: 1rem;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.mini-fun-card:hover {
  transform: translateY(-2px) scale(1.02);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
}

body.dark .mini-fun-card {
  background: rgba(30, 30, 30, 0.8);
  border: 1px solid rgba(255, 255, 255, 0.1);
}


/* 載入動畫 */
.loading{
  opacity:0;
  transform:translateY(20px);
  transition:var(--transition);
}
.loading.loaded{
  opacity:1;
  transform:translateY(0);
}

/* 圖片載入錯誤處理 */
.image-error{
  background:linear-gradient(45deg,#f3f4f6,#e5e7eb);
  display:flex;
  align-items:center;
  justify-content:center;
  color:#6b7280;
  font-size:0.875rem;
}

/* RWD 響應式設計 */
@media (max-width: 640px) {
  .grid-cols-3 {
    grid-template-columns: repeat(2, 1fr);
  }
  .grid-cols-4 {
    grid-template-columns: repeat(3, 1fr);
  }
  .app-card {
    min-height: 70px;
    padding: 0.5rem;
    font-size: 0.75rem;
  }
  /* 手機版圖標大小調整 */
  .app-card .text-3xl {
    font-size: 1.5rem;
    margin-bottom: 0.25rem;
  }
  .app-card .text-2xl {
    font-size: 1.25rem;
    margin-bottom: 0.25rem;
  }
  /* 手機版標籤位置調整 - 避免與圖標重疊 */
  .app-card .absolute.top-2.right-2 {
    top: 0.25rem;
    right: 0.25rem;
    font-size: 0.625rem;
    padding: 0.125rem 0.375rem;
    line-height: 1.2;
    z-index: 20;
  }
  /* 手機版底部標籤調整 */
  .app-card .absolute.bottom-2.right-2 {
    bottom: 0.25rem;
    right: 0.25rem;
    font-size: 0.625rem;
    padding: 0.125rem 0.375rem;
    line-height: 1.2;
  }
  /* 手機版卡片內容區域調整 */
  .app-card.text-center {
    padding-top: 0.75rem;
    padding-bottom: 0.5rem;
  }
  /* 手機版卡片文字調整 */
  .app-card .text-sm {
    font-size: 0.7rem;
  }
  .app-card .text-xs {
    font-size: 0.6rem;
  }
  /* 確保圖標和標籤有足夠空間 */
  .app-card .relative.z-10 {
    padding-top: 0.5rem;
  }
}

@media (min-width: 641px) and (max-width: 1024px) {
  .grid-cols-3 {
    grid-template-columns: repeat(3, 1fr);
  }
  .grid-cols-4 {
    grid-template-columns: repeat(4, 1fr);
  }
  .app-card {
    min-height: 60px;
  }
}

@media (min-width: 1025px) {
  .grid-cols-3 {
    grid-template-columns: repeat(3, 1fr);
  }
  .grid-cols-4 {
    grid-template-columns: repeat(4, 1fr);
  }
  .app-card {
    min-height: 60px;
  }
  main {
    max-width: 1200px;
    margin: 0 auto;
  }
}

/* 底部導航優化 */
.bottom-nav {
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
}

/* 無障礙設計 */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* 動畫效果 */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes bounce {
  0%, 20%, 53%, 80%, 100% {
    transform: translate3d(0,0,0);
  }
  40%, 43% {
    transform: translate3d(0, -30px, 0);
  }
  70% {
    transform: translate3d(0, -15px, 0);
  }
  90% {
    transform: translate3d(0, -4px, 0);
  }
}

/* 浮動動畫 */
.float-animation {
  animation: float 3s ease-in-out infinite;
}

/* 脈衝動畫 */
.pulse-animation {
  animation: pulse 2s ease-in-out infinite;
}

/* 滑入動畫 */
.slide-in {
  animation: slideInUp 0.6s ease-out;
}

/* 彈跳動畫 */
.bounce-animation {
  animation: bounce 1s ease-in-out;
}

/* 拜拜專區特殊動畫 */
@keyframes worshipGlow {
  0%, 100% { 
    box-shadow: 0 0 25px rgba(139,92,246,0.3);
    transform: scale(1);
  }
  50% { 
    box-shadow: 0 0 35px rgba(139,92,246,0.5);
    transform: scale(1.02);
  }
}

@keyframes sparkle {
  0%, 100% { 
    opacity: 0.7;
    transform: scale(1) rotate(0deg);
  }
  50% { 
    opacity: 1;
    transform: scale(1.2) rotate(180deg);
  }
}

@keyframes shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

/* 通用動畫效果 */
@keyframes homeGlow {
  0%, 100% { 
    transform: scale(1);
    filter: drop-shadow(0 0 10px rgba(99, 102, 241, 0.5));
  }
  50% { 
    transform: scale(1.1);
    filter: drop-shadow(0 0 20px rgba(99, 102, 241, 0.8));
  }
}

@keyframes lightBounce {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  25% { transform: translateY(-10px) rotate(5deg); }
  50% { transform: translateY(-5px) rotate(0deg); }
  75% { transform: translateY(-8px) rotate(-5deg); }
}

@keyframes starTwinkle {
  0%, 100% { transform: rotate(0deg) scale(1); }
  25% { transform: rotate(90deg) scale(1.1); }
  50% { transform: rotate(180deg) scale(1); }
  75% { transform: rotate(270deg) scale(1.1); }
}

.home-glow {
  animation: homeGlow 3s ease-in-out infinite;
}

.light-bounce {
  animation: lightBounce 2s ease-in-out infinite;
}

.star-twinkle {
  animation: starTwinkle 4s ease-in-out infinite;
}

/* 媒體展示區樣式 */
.media-thumbnail {
  transition: all 0.3s ease;
  border-radius: 0.75rem;
  overflow: hidden;
}

.media-thumbnail:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
}

.media-thumbnail.active {
  transform: translateY(-2px);
  box-shadow: 0 0 0 2px #ec4899, 0 8px 25px rgba(236, 72, 153, 0.3);
}

.media-thumbnail.active::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(45deg, transparent 30%, rgba(236, 72, 153, 0.1) 50%, transparent 70%);
  animation: shimmer 2s ease-in-out infinite;
}

/* 媒體播放器樣式 */
.media-player {
  position: relative;
  background: #000;
  border-radius: 1rem;
  overflow: hidden;
}

.media-controls {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
  padding: 1rem;
  transform: translateY(100%);
  transition: transform 0.3s ease;
}

.media-player:hover .media-controls {
  transform: translateY(0);
}

/* 響應式媒體展示 */
@media (max-width: 640px) {
  .media-thumbnail {
    border-radius: 0.5rem;
  }
  
  .media-thumbnail .text-2xl {
    font-size: 1.5rem;
  }
  
  .media-thumbnail .text-xs {
    font-size: 0.625rem;
  }
}


/* 按鈕點擊修復 */
.cta-button {
  pointer-events: auto !important;
  position: relative !important;
  z-index: 9999 !important;
}

.cta-button:hover {
  pointer-events: auto !important;
}

.cta-button:active {
  pointer-events: auto !important;
}

/* 動畫優化 */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
</style>
</head>
<body>


<!-- 🌈 Hero 區 - 增強版 -->
<header class="text-white text-center py-8 shadow-lg relative overflow-hidden" style="background:linear-gradient(135deg, #1e3a8a, #7c3aed, #ec4899);">
  <!-- 動態背景裝飾 -->
  <div class="absolute inset-0 opacity-30">
    <div class="absolute top-4 left-4 text-4xl animate-pulse">🏠</div>
    <div class="absolute top-8 right-8 text-3xl animate-bounce" style="animation-delay: 0.5s;">💡</div>
    <div class="absolute bottom-6 left-12 text-2xl animate-pulse" style="animation-delay: 1s;">🌟</div>
    <div class="absolute bottom-4 right-4 text-3xl animate-pulse" style="animation-delay: 1.5s;">✨</div>
    <!-- 新增浮動元素 -->
    <div class="absolute top-1/4 left-1/4 text-2xl animate-float" style="animation-delay: 2s;">⭐</div>
    <div class="absolute top-1/3 right-1/3 text-xl animate-float" style="animation-delay: 2.5s;">🎯</div>
    <div class="absolute bottom-1/3 left-1/3 text-lg animate-float" style="animation-delay: 3s;">💫</div>
  </div>
  
  <!-- 動態粒子效果 -->
  <div class="absolute inset-0" id="particles"></div>
  
  <div class="relative z-10">
    <h1 class="text-4xl font-bold mb-2 animate-slide-in">快樂楊梅人在地生活集</h1>
    <p class="text-lg opacity-90 mb-4 animate-slide-in" style="animation-delay: 0.2s;">房產工具｜生活服務｜補助優惠｜輕鬆時光</p>
    
    <!-- 動態問候語 -->
    <div class="mt-4 mb-6">
      <div id="dynamicGreeting" class="text-yellow-200 text-lg font-semibold animate-pulse">
        <span id="greetingText">🌟 歡迎來到楊梅人在地生活集！</span>
      </div>
    </div>
    
    <!-- 快速統計 -->
    <div class="flex justify-center gap-6 mb-6 text-sm">
      <div class="bg-white/20 backdrop-blur-sm rounded-full px-4 py-2 animate-slide-in" style="animation-delay: 0.4s;">
        <span class="font-bold" id="userCount">12,345</span> 位用戶
      </div>
      <div class="bg-white/20 backdrop-blur-sm rounded-full px-4 py-2 animate-slide-in" style="animation-delay: 0.6s;">
        <span class="font-bold">50+</span> 實用工具
      </div>
      <div class="bg-white/20 backdrop-blur-sm rounded-full px-4 py-2 animate-slide-in" style="animation-delay: 0.8s;">
        <span class="font-bold">24/7</span> 服務
      </div>
    </div>
  </div>
  
  <!-- 增強搜尋框 -->
  <div class="max-w-md mx-auto mt-6 relative animate-slide-in z-20" style="animation-delay: 1s;">
    <div class="relative">
      <input 
        type="text" 
        id="mainSearchInput" 
        class="w-full px-6 py-3 rounded-full text-gray-800 placeholder-gray-500 focus:outline-none focus:ring-4 focus:ring-white/50 focus:ring-offset-2 focus:ring-offset-indigo-600 shadow-lg transform transition-all duration-300 hover:scale-105" 
        placeholder="🔍 搜尋功能、服務或工具..."
        onkeypress="handleSearchEnter(event)"
        onfocus="this.parentElement.classList.add('search-focused')"
        onblur="this.parentElement.classList.remove('search-focused')"
      >
      <button onclick="openSearch()" class="absolute right-2 top-1/2 transform -translate-y-1/2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-4 py-2 rounded-full text-sm hover:scale-110 transition-all duration-300 shadow-lg hover:shadow-xl">
        <span class="hidden sm:inline">搜尋</span>
        <span class="sm:hidden">🔍</span>
      </button>
    </div>
    
    <!-- 搜尋建議 -->
    <div id="searchSuggestions" class="absolute top-full left-0 right-0 mt-2 bg-white/95 backdrop-blur-sm rounded-xl shadow-xl hidden z-20">
      <div class="p-2">
        <div class="text-xs text-gray-500 px-3 py-1">熱門搜尋</div>
        <div class="suggestion-item px-3 py-2 hover:bg-indigo-50 rounded-lg cursor-pointer text-gray-700" onclick="quickSearch('房貸試算')">💰 房貸試算</div>
        <div class="suggestion-item px-3 py-2 hover:bg-indigo-50 rounded-lg cursor-pointer text-gray-700" onclick="quickSearch('天氣預報')">🌦 天氣預報</div>
        <div class="suggestion-item px-3 py-2 hover:bg-indigo-50 rounded-lg cursor-pointer text-gray-700" onclick="quickSearch('垃圾車時間')">🗑 垃圾車時間</div>
        <div class="suggestion-item px-3 py-2 hover:bg-indigo-50 rounded-lg cursor-pointer text-gray-700" onclick="quickSearch('發票對獎')">🧾 發票對獎</div>
      </div>
    </div>
  </div>
  
  <!-- 增強CTA按鈕 -->
  <div class="flex justify-center gap-4 mt-6 animate-slide-in relative z-40" style="animation-delay: 1.2s;">
    <button onclick="openTool('https://lin.ee/Ij6z94H')" class="cta-button bg-gradient-to-r from-white to-yellow-100 text-indigo-600 font-bold px-8 py-3 rounded-full shadow-lg hover:scale-110 hover:shadow-xl transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-white/50 relative z-50 cursor-pointer" aria-label="前往LINE客服估價">
      <span class="flex items-center gap-2">
        <span>立即估價</span>
        <span class="text-xs bg-indigo-100 px-2 py-1 rounded-full">免費</span>
      </span>
    </button>
    <button onclick="openTool('https://lin.ee/Ij6z94H')" class="cta-button bg-gradient-to-r from-white to-pink-100 text-indigo-600 font-bold px-8 py-3 rounded-full shadow-lg hover:scale-110 hover:shadow-xl transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-white/50 relative z-50 cursor-pointer" aria-label="廠商進駐曝光">
      <span class="flex items-center gap-2">
        <span>廠商進駐</span>
        <span class="text-xs bg-pink-200 px-2 py-1 rounded-full">曝光</span>
      </span>
    </button>
  </div>
  
</header>

<main class="px-3 py-2 pb-16 space-y-4">

<!-- 🎮 輕鬆時光 - 增強互動版 -->
<section class="glass-card p-4 shadow-lg hover:shadow-xl transition-all duration-500 transform hover:-translate-y-1">
  <div class="flex items-center justify-between mb-4">
    <h2 class="text-xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2">
      <span class="text-2xl animate-bounce">🎮</span>
      <span>輕鬆時光</span>
      <div class="flex-1 h-px bg-gradient-to-r from-orange-500 to-red-500 ml-2"></div>
    </h2>
    <div class="text-xs text-gray-500 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full">
      <span id="funStats">今日已有 <span class="font-bold text-orange-600">1,234</span> 人使用</span>
    </div>
  </div>
  
  <div class="grid grid-cols-4 gap-3">
    <div class="relaxed-card games group relative overflow-hidden" onclick="openTool('games.html')" onmouseenter="showCardPreview('games')" onmouseleave="hideCardPreview()">
      <div class="absolute inset-0 bg-gradient-to-br from-blue-500/10 to-purple-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <span class="card-icon group-hover:animate-spin">🎮</span>
      <span class="card-title">遊戲</span>
      <div class="absolute bottom-2 right-2 text-xs bg-blue-500 text-white px-2 py-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300">
        熱門
      </div>
    </div>
    <div class="relaxed-card fortune group relative overflow-hidden" onclick="openTool('fortune.html')" onmouseenter="showCardPreview('fortune')" onmouseleave="hideCardPreview()">
      <div class="absolute inset-0 bg-gradient-to-br from-pink-500/10 to-rose-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <span class="card-icon group-hover:animate-pulse">🔮</span>
      <span class="card-title">運勢</span>
      <div class="absolute bottom-2 right-2 text-xs bg-pink-500 text-white px-2 py-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300">
        每日更新
      </div>
    </div>
    <div class="relaxed-card mbti group relative overflow-hidden" onclick="openTool('mbti.html')" onmouseenter="showCardPreview('mbti')" onmouseleave="hideCardPreview()">
      <div class="absolute inset-0 bg-gradient-to-br from-cyan-500/10 to-blue-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <span class="card-icon group-hover:animate-bounce">🧩</span>
      <span class="card-title">MBTI</span>
      <div class="absolute bottom-2 right-2 text-xs bg-cyan-500 text-white px-2 py-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300">
        心理測驗
      </div>
    </div>
    <div class="relaxed-card quote group relative overflow-hidden" onclick="openTool('daily-quote.html')" onmouseenter="showCardPreview('quote')" onmouseleave="hideCardPreview()">
      <div class="absolute inset-0 bg-gradient-to-br from-green-500/10 to-emerald-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <span class="card-icon group-hover:animate-pulse">📝</span>
      <span class="card-title">金句</span>
      <div class="absolute bottom-2 right-2 text-xs bg-green-500 text-white px-2 py-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300">
        每日一句
      </div>
    </div>
  </div>
  
  <!-- 卡片預覽浮層 -->
  <div id="cardPreview" class="absolute bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm rounded-xl shadow-xl p-4 z-30 hidden transform transition-all duration-300">
    <div id="previewContent"></div>
  </div>
</section>

<!-- 🏠 熱門服務 - 房產相關主要功能 -->
<section class="glass-card p-6 shadow-lg hover:shadow-xl transition-all duration-500">
  <div class="flex items-center justify-between mb-4">
    <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-3">
      <span class="text-3xl animate-pulse">🏠</span>
      <span>熱門服務</span>
      <div class="flex-1 h-px bg-gradient-to-r from-indigo-500 to-purple-500 ml-2"></div>
    </h2>
    <div class="text-sm text-gray-500 bg-indigo-100 dark:bg-indigo-900 px-3 py-1 rounded-full">
      <span class="font-bold text-indigo-600 dark:text-indigo-400">專業服務</span>
    </div>
  </div>
  
  <div class="grid grid-cols-4 gap-4">
    <div class="app-card glass-card property group relative overflow-hidden" onclick="openTool('https://housepice.pages.dev/%E4%B8%89%E5%90%88%E4%B8%80%E6%88%BF%E5%83%B9%E6%99%AE%E7%89%B9%E7%B5%B2')">
      <div class="absolute inset-0 bg-gradient-to-br from-indigo-500/20 to-purple-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10 text-center">
        <div class="text-3xl mb-2 group-hover:animate-bounce">💰</div>
        <div class="font-bold">房貸試算</div>
        <div class="text-xs opacity-75 mt-1">智慧估算</div>
      </div>
      <div class="absolute top-2 right-2 text-xs bg-yellow-500 text-white px-2 py-1 rounded-full animate-pulse">
        熱門
      </div>
    </div>
    
    <div class="app-card glass-card property group relative overflow-hidden" onclick="openTool('https://www.crowncare.tw/')">
      <div class="absolute inset-0 bg-gradient-to-br from-emerald-500/20 to-teal-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10 text-center">
        <div class="text-3xl mb-2 group-hover:animate-bounce">🏥</div>
        <div class="font-bold">冠冕居服</div>
        <div class="text-xs opacity-75 mt-1">長照機構</div>
      </div>
      <div class="absolute top-2 right-2 text-xs bg-emerald-500 text-white px-2 py-1 rounded-full">
        專業
      </div>
    </div>
    
    <div class="app-card glass-card property group relative overflow-hidden" onclick="openTool('https://flyjung168.pages.dev/')">
      <div class="absolute inset-0 bg-gradient-to-br from-yellow-500/20 to-orange-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10 text-center">
        <div class="text-3xl mb-2 group-hover:animate-bounce">🌟</div>
        <div class="font-bold">精選物件</div>
        <div class="text-xs opacity-75 mt-1">優質房源</div>
      </div>
    </div>
    
    <div class="app-card glass-card worship group relative overflow-hidden" onclick="openTool('worship.html')">
      <div class="absolute inset-0 bg-gradient-to-br from-purple-500/20 to-pink-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10 text-center">
        <div class="text-3xl mb-2 group-hover:animate-bounce">🙏</div>
        <div class="font-bold">拜拜專區</div>
        <div class="text-xs opacity-75 mt-1">心靈寄託</div>
      </div>
      <div class="absolute top-2 right-2 text-xs bg-purple-500 text-white px-2 py-1 rounded-full">
        特殊
      </div>
    </div>
    
    <div class="app-card glass-card tool group relative overflow-hidden" onclick="openTool('renovation.html')">
      <div class="absolute inset-0 bg-gradient-to-br from-green-500/20 to-emerald-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10 text-center">
        <div class="text-3xl mb-2 group-hover:animate-bounce">🛋️</div>
        <div class="font-bold">裝潢設計</div>
        <div class="text-xs opacity-75 mt-1">設計規劃</div>
      </div>
    </div>
    
    <div class="app-card glass-card tool group relative overflow-hidden" onclick="openTool('tax-calc.html')">
      <div class="absolute inset-0 bg-gradient-to-br from-blue-500/20 to-cyan-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10 text-center">
        <div class="text-3xl mb-2 group-hover:animate-bounce">📄</div>
        <div class="font-bold">稅費試算</div>
        <div class="text-xs opacity-75 mt-1">精確計算</div>
      </div>
    </div>
    
    <div class="app-card glass-card investment group relative overflow-hidden" onclick="openTool('https://salersteam.pages.dev/junyang')">
      <div class="absolute inset-0 bg-gradient-to-br from-indigo-500/20 to-blue-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10 text-center">
        <div class="text-3xl mb-2 group-hover:animate-bounce">🏘️</div>
        <div class="font-bold">新案預售</div>
        <div class="text-xs opacity-75 mt-1">限額參加</div>
      </div>
      <div class="absolute top-2 right-2 text-xs bg-red-500 text-white px-2 py-1 rounded-full animate-pulse">
        熱門
      </div>
    </div>
    
    <div class="app-card glass-card subsidy group relative overflow-hidden col-span-4" onclick="openTool('subsidy.html')">
      <div class="absolute inset-0 bg-gradient-to-r from-pink-500/20 to-rose-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10 text-center">
        <div class="text-3xl mb-2 group-hover:animate-bounce">💸</div>
        <div class="font-bold text-lg">補助優惠</div>
        <div class="text-sm opacity-75 mt-1">政府補助、優惠資訊一網打盡</div>
      </div>
      <div class="absolute top-2 right-2 text-xs bg-red-500 text-white px-2 py-1 rounded-full animate-pulse">
        限時優惠
      </div>
    </div>
  </div>
</section>

<!-- 🛠️ 生活服務推薦 -->
<section class="glass-card p-4 shadow-lg hover:shadow-xl transition-all duration-500">
  <div class="flex items-center justify-between mb-4">
    <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-3">
      <span class="text-3xl animate-pulse">🛠️</span>
      <span>生活服務推薦</span>
      <div class="flex-1 h-px bg-gradient-to-r from-orange-500 to-red-500 ml-2"></div>
    </h2>
    <div class="text-sm text-gray-500 bg-orange-100 dark:bg-orange-900 px-3 py-1 rounded-full">
      <span class="font-bold text-orange-600 dark:text-orange-400">在地服務</span>
    </div>
  </div>
  
  <div class="grid grid-cols-4 gap-4">
    <!-- 水電修繕 -->
    <div class="app-card glass-card tool group relative overflow-hidden" onclick="openTool('water-electric.html')">
      <div class="absolute inset-0 bg-gradient-to-br from-blue-500/20 to-cyan-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10 text-center">
        <div class="text-3xl mb-2 group-hover:animate-bounce">⚡</div>
        <div class="font-bold text-sm">水電修繕</div>
        <div class="text-xs opacity-75 mt-1">待新增</div>
      </div>
      <div class="absolute top-2 right-2 text-xs bg-gray-500 text-white px-2 py-1 rounded-full">
        待新增
      </div>
    </div>
    
    <!-- 驗屋公司 -->
    <div class="app-card glass-card tool group relative overflow-hidden" onclick="openTool('inspection-company.html')">
      <div class="absolute inset-0 bg-gradient-to-br from-green-500/20 to-emerald-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10 text-center">
        <div class="text-3xl mb-2 group-hover:animate-bounce">🔍</div>
        <div class="font-bold text-sm">驗屋公司</div>
        <div class="text-xs opacity-75 mt-1">專業檢查</div>
      </div>
      <div class="absolute top-2 right-2 text-xs bg-green-500 text-white px-2 py-1 rounded-full">
        專業
      </div>
    </div>
    
    <!-- 防霾紗網 -->
    <div class="app-card glass-card tool group relative overflow-hidden" onclick="openTool('anti-dust-screen.html')">
      <div class="absolute inset-0 bg-gradient-to-br from-purple-500/20 to-pink-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10 text-center">
        <div class="text-3xl mb-2 group-hover:animate-bounce">🛡️</div>
        <div class="font-bold text-sm">防霾紗網</div>
        <div class="text-xs opacity-75 mt-1">空氣淨化</div>
      </div>
      <div class="absolute top-2 right-2 text-xs bg-purple-500 text-white px-2 py-1 rounded-full">
        健康
      </div>
    </div>
    
    <!-- 油漆粉刷 -->
    <div class="app-card glass-card tool group relative overflow-hidden" onclick="openTool('paint-service.html')">
      <div class="absolute inset-0 bg-gradient-to-br from-yellow-500/20 to-orange-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10 text-center">
        <div class="text-3xl mb-2 group-hover:animate-bounce">🎨</div>
        <div class="font-bold text-sm">油漆粉刷</div>
        <div class="text-xs opacity-75 mt-1">批土噴漆</div>
      </div>
      <div class="absolute top-2 right-2 text-xs bg-gray-500 text-white px-2 py-1 rounded-full">
        服務
      </div>
    </div>
    
    <!-- 白蟻除蟲 -->
    <div class="app-card glass-card tool group relative overflow-hidden" onclick="openTool('pest-control.html')">
      <div class="absolute inset-0 bg-gradient-to-br from-red-500/20 to-pink-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10 text-center">
        <div class="text-3xl mb-2 group-hover:animate-bounce">🐛</div>
        <div class="font-bold text-sm">白蟻除蟲</div>
        <div class="text-xs opacity-75 mt-1">待新增</div>
      </div>
      <div class="absolute top-2 right-2 text-xs bg-gray-500 text-white px-2 py-1 rounded-full">
        待新增
      </div>
    </div>
    
    <!-- 搬家公司 -->
    <div class="app-card glass-card life group relative overflow-hidden" onclick="openTool('moving-company.html')">
      <div class="absolute inset-0 bg-gradient-to-br from-teal-500/20 to-cyan-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10 text-center">
        <div class="text-3xl mb-2 group-hover:animate-bounce">🚚</div>
        <div class="font-bold text-sm">搬家公司</div>
        <div class="text-xs opacity-75 mt-1">待新增</div>
      </div>
      <div class="absolute top-2 right-2 text-xs bg-gray-500 text-white px-2 py-1 rounded-full">
        待新增
      </div>
    </div>
    
    <!-- 冷氣維修 -->
    <div class="app-card glass-card tool group relative overflow-hidden" onclick="openTool('air-conditioning.html')">
      <div class="absolute inset-0 bg-gradient-to-br from-sky-500/20 to-blue-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10 text-center">
        <div class="text-3xl mb-2 group-hover:animate-bounce">❄️</div>
        <div class="font-bold text-sm">冷氣服務</div>
        <div class="text-xs opacity-75 mt-1">清洗維修</div>
      </div>
      <div class="absolute top-2 right-2 text-xs bg-green-500 text-white px-2 py-1 rounded-full">
        多家
      </div>
    </div>
    
    <!-- 包租代管 -->
    <div class="app-card glass-card investment group relative overflow-hidden" onclick="openTool('rental-management.html')">
      <div class="absolute inset-0 bg-gradient-to-br from-indigo-500/20 to-blue-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10 text-center">
        <div class="text-3xl mb-2 group-hover:animate-bounce">🏠</div>
        <div class="font-bold text-sm">包租代管</div>
        <div class="text-xs opacity-75 mt-1">租賃管理</div>
      </div>
      <div class="absolute top-2 right-2 text-xs bg-indigo-500 text-white px-2 py-1 rounded-full">
        管理
      </div>
    </div>
    
    
  </div>
</section>

<!-- 🍽️ 美食餐飲專區 -->
<section class="glass-card p-4 shadow-lg hover:shadow-xl transition-all duration-500">
  <div class="flex items-center justify-between mb-4">
    <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-3">
      <span class="text-3xl animate-pulse">🍽️</span>
      <span>美食餐飲專區</span>
      <div class="flex-1 h-px bg-gradient-to-r from-red-500 to-orange-500 ml-2"></div>
    </h2>
    <div class="text-sm text-gray-500 bg-red-100 dark:bg-red-900 px-3 py-1 rounded-full">
      <span class="font-bold text-red-600 dark:text-red-400">在地美食</span>
    </div>
  </div>
  
  <div class="grid grid-cols-4 gap-4">
    <!-- 功夫茶 -->
    <div class="app-card glass-card food group relative overflow-hidden" onclick="openTool('https://sky770825.github.io/kungfuteahtml/')">
      <div class="absolute inset-0 bg-gradient-to-br from-amber-500/20 to-orange-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10 text-center">
        <div class="text-3xl mb-2 group-hover:animate-bounce">🧋</div>
        <div class="font-bold text-sm">功夫茶</div>
        <div class="text-xs opacity-75 mt-1">飲品專賣</div>
      </div>
      <div class="absolute top-2 right-2 text-xs bg-amber-500 text-white px-2 py-1 rounded-full">
        熱門
      </div>
    </div>
    
    <!-- 餐車追蹤 -->
    <div class="app-card glass-card food group relative overflow-hidden" onclick="openTool('https://siwei.pages.dev/')">
      <div class="absolute inset-0 bg-gradient-to-br from-red-500/20 to-pink-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10 text-center">
        <div class="text-3xl mb-2 group-hover:animate-bounce">🚚</div>
        <div class="font-bold text-sm">餐車</div>
        <div class="text-xs opacity-75 mt-1">位置追蹤</div>
      </div>
      <div class="absolute top-2 right-2 text-xs bg-red-500 text-white px-2 py-1 rounded-full">
        即時
      </div>
    </div>
    
    <!-- 在地小吃 -->
    <div class="app-card glass-card food group relative overflow-hidden" onclick="openTool('local-life.html#food')">
      <div class="absolute inset-0 bg-gradient-to-br from-orange-500/20 to-yellow-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10 text-center">
        <div class="text-3xl mb-2 group-hover:animate-bounce">🥟</div>
        <div class="font-bold text-sm">在地小吃</div>
        <div class="text-xs opacity-75 mt-1">特色美食</div>
      </div>
      <div class="absolute top-2 right-2 text-xs bg-orange-500 text-white px-2 py-1 rounded-full">
        推薦
      </div>
    </div>
    
    <!-- 咖啡廳 -->
    <div class="app-card glass-card food group relative overflow-hidden" onclick="openTool('local-life.html')">
      <div class="absolute inset-0 bg-gradient-to-br from-amber-500/20 to-rose-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10 text-center">
        <div class="text-3xl mb-2 group-hover:animate-bounce">☕</div>
        <div class="font-bold text-sm">咖啡廳</div>
        <div class="text-xs opacity-75 mt-1">休閒時光</div>
      </div>
    </div>
  </div>
</section>

<!-- 💄 美容美體專區 -->
<section class="glass-card p-4 shadow-lg hover:shadow-xl transition-all duration-500">
  <div class="flex items-center justify-between mb-4">
    <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-3">
      <span class="text-3xl animate-pulse">💄</span>
      <span>美容美體專區</span>
      <div class="flex-1 h-px bg-gradient-to-r from-pink-500 to-purple-500 ml-2"></div>
    </h2>
    <div class="text-sm text-gray-500 bg-pink-100 dark:bg-pink-900 px-3 py-1 rounded-full">
      <span class="font-bold text-pink-600 dark:text-pink-400">美麗服務</span>
    </div>
  </div>
  
  <div class="grid grid-cols-4 gap-4">
    <!-- 美容護膚 -->
    <div class="app-card glass-card fun group relative overflow-hidden" onclick="openTool('beauty-skin.html')">
      <div class="absolute inset-0 bg-gradient-to-br from-pink-500/20 to-rose-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10 text-center">
        <div class="text-3xl mb-2 group-hover:animate-bounce">✨</div>
        <div class="font-bold text-sm">美容護膚</div>
        <div class="text-xs opacity-75 mt-1">專業護理</div>
      </div>
      <div class="absolute top-2 right-2 text-xs bg-pink-500 text-white px-2 py-1 rounded-full">
        熱門
      </div>
    </div>
    
    <!-- 美髮造型 -->
    <div class="app-card glass-card fun group relative overflow-hidden" onclick="openTool('hair-salon.html')">
      <div class="absolute inset-0 bg-gradient-to-br from-purple-500/20 to-indigo-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10 text-center">
        <div class="text-3xl mb-2 group-hover:animate-bounce">💇‍♀️</div>
        <div class="font-bold text-sm">美髮造型</div>
        <div class="text-xs opacity-75 mt-1">專業設計</div>
      </div>
      <div class="absolute top-2 right-2 text-xs bg-purple-500 text-white px-2 py-1 rounded-full">
        專業
      </div>
    </div>
    
    <!-- 美睫服務 -->
    <div class="app-card glass-card fun group relative overflow-hidden" onclick="openTool('eyelash-service.html')">
      <div class="absolute inset-0 bg-gradient-to-br from-amber-500/20 to-orange-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10 text-center">
        <div class="text-3xl mb-2 group-hover:animate-bounce">👁️</div>
        <div class="font-bold text-sm">美睫服務</div>
        <div class="text-xs opacity-75 mt-1">睫毛美化</div>
      </div>
      <div class="absolute top-2 right-2 text-xs bg-amber-500 text-white px-2 py-1 rounded-full">
        精緻
      </div>
    </div>
    
    <!-- 美甲服務 -->
    <div class="app-card glass-card fun group relative overflow-hidden" onclick="openTool('nail-service.html')">
      <div class="absolute inset-0 bg-gradient-to-br from-red-500/20 to-pink-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10 text-center">
        <div class="text-3xl mb-2 group-hover:animate-bounce">💅</div>
        <div class="font-bold text-sm">美甲服務</div>
        <div class="text-xs opacity-75 mt-1">指甲藝術</div>
      </div>
      <div class="absolute top-2 right-2 text-xs bg-red-500 text-white px-2 py-1 rounded-full">
        藝術
      </div>
    </div>
  </div>
</section>

<!-- 💆‍♀️ 按摩舒壓專區 -->
<section class="glass-card p-4 shadow-lg hover:shadow-xl transition-all duration-500">
  <div class="flex items-center justify-between mb-4">
    <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-3">
      <span class="text-3xl animate-pulse">💆‍♀️</span>
      <span>按摩舒壓專區</span>
      <div class="flex-1 h-px bg-gradient-to-r from-green-500 to-teal-500 ml-2"></div>
    </h2>
    <div class="text-sm text-gray-500 bg-green-100 dark:bg-green-900 px-3 py-1 rounded-full">
      <span class="font-bold text-green-600 dark:text-green-400">舒壓服務</span>
    </div>
  </div>
  
  <div class="grid grid-cols-4 gap-4">
    <!-- 泰式按摩 -->
    <div class="app-card glass-card life group relative overflow-hidden" onclick="openTool('thai-massage.html')">
      <div class="absolute inset-0 bg-gradient-to-br from-orange-500/20 to-yellow-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10 text-center">
        <div class="text-3xl mb-2 group-hover:animate-bounce">🧘‍♀️</div>
        <div class="font-bold text-sm">泰式按摩</div>
        <div class="text-xs opacity-75 mt-1">傳統技法</div>
      </div>
      <div class="absolute top-2 right-2 text-xs bg-orange-500 text-white px-2 py-1 rounded-full">
        熱門
      </div>
    </div>
    
    <!-- 越式按摩 -->
    <div class="app-card glass-card life group relative overflow-hidden" onclick="openTool('vietnamese-massage.html')">
      <div class="absolute inset-0 bg-gradient-to-br from-red-500/20 to-pink-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10 text-center">
        <div class="text-3xl mb-2 group-hover:animate-bounce">🇻🇳</div>
        <div class="font-bold text-sm">越式按摩</div>
        <div class="text-xs opacity-75 mt-1">溫和舒壓</div>
      </div>
      <div class="absolute top-2 right-2 text-xs bg-red-500 text-white px-2 py-1 rounded-full">
        舒緩
      </div>
    </div>
    
    <!-- 美式整復 -->
    <div class="app-card glass-card tool group relative overflow-hidden" onclick="openTool('american-chiropractic.html')">
      <div class="absolute inset-0 bg-gradient-to-br from-blue-500/20 to-indigo-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10 text-center">
        <div class="text-3xl mb-2 group-hover:animate-bounce">🦴</div>
        <div class="font-bold text-sm">美式整復</div>
        <div class="text-xs opacity-75 mt-1">專業整脊</div>
      </div>
      <div class="absolute top-2 right-2 text-xs bg-blue-500 text-white px-2 py-1 rounded-full">
        專業
      </div>
    </div>
    
    <!-- 台式按摩 -->
    <div class="app-card glass-card life group relative overflow-hidden" onclick="openTool('taiwanese-massage.html')">
      <div class="absolute inset-0 bg-gradient-to-br from-green-500/20 to-emerald-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10 text-center">
        <div class="text-3xl mb-2 group-hover:animate-bounce">🇹🇼</div>
        <div class="font-bold text-sm">台式按摩</div>
        <div class="text-xs opacity-75 mt-1">在地手法</div>
      </div>
      <div class="absolute top-2 right-2 text-xs bg-green-500 text-white px-2 py-1 rounded-full">
        在地
      </div>
    </div>
  </div>
</section>

<!-- 🌟 生活助手 - 動態實用功能 -->
<section class="glass-card p-6 shadow-lg hover:shadow-xl transition-all duration-500">
  <div class="flex items-center justify-between mb-4">
    <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-3">
      <span class="text-3xl animate-pulse">🌟</span>
      <span>生活助手</span>
      <div class="flex-1 h-px bg-gradient-to-r from-emerald-500 to-teal-500 ml-2"></div>
    </h2>
    <div class="flex items-center gap-2 text-sm text-gray-500">
      <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
      <span>即時更新</span>
    </div>
  </div>
  
  
  <div class="grid grid-cols-4 gap-3">
    <div class="app-card glass-card assistant group relative overflow-hidden" onclick="openTool('weather.html')">
      <div class="absolute inset-0 bg-gradient-to-br from-blue-400/20 to-cyan-400/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10">
        <div class="text-2xl mb-1 group-hover:animate-bounce">🌦</div>
        <div class="text-sm font-semibold">天氣</div>
        <div class="text-xs opacity-75 mt-1" id="weatherStatus">載入中...</div>
      </div>
      <div class="absolute top-2 right-2 w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
    </div>
    
    <div class="app-card glass-card assistant group relative overflow-hidden" onclick="openTool('garbage.html')">
      <div class="absolute inset-0 bg-gradient-to-br from-green-400/20 to-emerald-400/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10">
        <div class="text-2xl mb-1 group-hover:animate-bounce">🗑</div>
        <div class="text-sm font-semibold">垃圾車</div>
        <div class="text-xs opacity-75 mt-1" id="garbageStatus">即時查詢</div>
      </div>
      <div class="absolute top-2 right-2 text-xs bg-orange-500 text-white px-1 py-0.5 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300">
        熱門
      </div>
    </div>
    
    <div class="app-card glass-card assistant group relative overflow-hidden" onclick="openTool('receipt.html')">
      <div class="absolute inset-0 bg-gradient-to-br from-purple-400/20 to-pink-400/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10">
        <div class="text-2xl mb-1 group-hover:animate-bounce">🧾</div>
        <div class="text-sm font-semibold">發票</div>
        <div class="text-xs opacity-75 mt-1" id="receiptStatus">對獎中</div>
      </div>
      <div class="absolute top-2 right-2 text-xs bg-red-500 text-white px-1 py-0.5 rounded-full animate-pulse">
        新
      </div>
    </div>
    
    <div class="app-card glass-card assistant group relative overflow-hidden" onclick="openTool('bus.html')">
      <div class="absolute inset-0 bg-gradient-to-br from-indigo-400/20 to-blue-400/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10">
        <div class="text-2xl mb-1 group-hover:animate-bounce">🚌</div>
        <div class="text-sm font-semibold">公車</div>
        <div class="text-xs opacity-75 mt-1" id="busStatus">即時動態</div>
      </div>
    </div>
    
    <div class="app-card glass-card assistant group relative overflow-hidden" onclick="openTool('inspection.html')">
      <div class="absolute inset-0 bg-gradient-to-br from-gray-400/20 to-slate-400/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10">
        <div class="text-2xl mb-1 group-hover:animate-bounce">🔎</div>
        <div class="text-sm font-semibold">驗屋</div>
        <div class="text-xs opacity-75 mt-1">專業檢查</div>
      </div>
    </div>
    
    <div class="app-card glass-card assistant group relative overflow-hidden" onclick="openTool('rate.html')">
      <div class="absolute inset-0 bg-gradient-to-br from-yellow-400/20 to-amber-400/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      <div class="relative z-10">
        <div class="text-2xl mb-1 group-hover:animate-bounce">🏦</div>
        <div class="text-sm font-semibold">利率</div>
        <div class="text-xs opacity-75 mt-1" id="rateStatus">即時更新</div>
      </div>
    </div>
  </div>
</section>

<!-- 📸 精選媒體展示區 -->
<section class="glass-card p-4 shadow-lg hover:shadow-xl transition-all duration-500">
  <div class="flex items-center justify-between mb-4">
    <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-3">
      <span class="text-3xl animate-pulse">📸</span>
      <span>精選展示</span>
      <div class="flex-1 h-px bg-gradient-to-r from-pink-500 to-purple-500 ml-2"></div>
    </h2>
    <div class="text-sm text-gray-500 bg-pink-100 dark:bg-pink-900 px-3 py-1 rounded-full">
      <span class="font-bold text-pink-600 dark:text-pink-400">精彩內容</span>
    </div>
  </div>
  
  <!-- 主要媒體展示區 -->
  <div class="relative mb-4">
    <div class="relative bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800 rounded-2xl overflow-hidden shadow-lg">
      <!-- 主要展示區域 -->
      <div id="mainMediaDisplay" class="aspect-video bg-gradient-to-br from-indigo-100 to-purple-100 dark:from-indigo-900 dark:to-purple-900 flex items-center justify-center relative overflow-hidden">
        <!-- 預設內容 -->
        <div class="text-center text-gray-500 dark:text-gray-400">
          <div class="text-6xl mb-4 opacity-50">🎬</div>
          <div class="text-xl font-semibold mb-2">精選內容展示</div>
          <div class="text-sm">點擊下方縮圖開始播放</div>
        </div>
        
        <!-- 播放按鈕 -->
        <button onclick="playMainMedia()" class="absolute inset-0 flex items-center justify-center bg-black/20 hover:bg-black/30 transition-all duration-300">
          <div class="bg-white/90 dark:bg-gray-800/90 rounded-full p-4 shadow-lg hover:scale-110 transition-transform duration-300">
            <svg class="w-8 h-8 text-indigo-600 dark:text-indigo-400 ml-1" fill="currentColor" viewBox="0 0 24 24">
              <path d="M8 5v14l11-7z"/>
            </svg>
          </div>
        </button>
        
        <!-- 媒體元素容器 -->
        <video id="mainVideo" class="absolute inset-0 w-full h-full object-cover hidden" controls>
          <source src="" type="video/mp4">
          您的瀏覽器不支援影片播放。
        </video>
        <img id="mainImage" class="absolute inset-0 w-full h-full object-cover hidden" alt="展示圖片">
      </div>
      
      <!-- 媒體資訊 -->
      <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4">
        <div class="text-white">
          <div id="mediaTitle" class="font-bold text-lg mb-1">歡迎來到楊梅人在地生活集</div>
          <div id="mediaDescription" class="text-sm opacity-90">探索更多精彩內容和實用工具</div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- 縮圖網格 -->
  <div class="grid grid-cols-4 gap-3">
    <!-- 影片縮圖 -->
    <div class="media-thumbnail active" onclick="showMedia('video1', 'video', '房產投資秘訣', '了解如何聰明投資房地產')">
      <div class="aspect-video bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg overflow-hidden relative cursor-pointer group">
        <div class="absolute inset-0 bg-black/20 group-hover:bg-black/10 transition-all duration-300"></div>
        <div class="absolute inset-0 flex items-center justify-center">
          <div class="bg-white/20 rounded-full p-2 group-hover:scale-110 transition-transform duration-300">
            <svg class="w-4 h-4 text-white ml-0.5" fill="currentColor" viewBox="0 0 24 24">
              <path d="M8 5v14l11-7z"/>
            </svg>
          </div>
        </div>
        <div class="absolute bottom-1 left-1 text-xs bg-black/70 text-white px-1 py-0.5 rounded">2:30</div>
        <div class="absolute top-1 right-1 text-xs bg-red-500 text-white px-1 py-0.5 rounded">HOT</div>
      </div>
    </div>
    
    <!-- 圖片縮圖 -->
    <div class="media-thumbnail" onclick="showMedia('image1', 'image', '楊梅在地生活', '探索楊梅的美好生活')">
      <div class="aspect-video bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg overflow-hidden relative cursor-pointer group">
        <div class="absolute inset-0 bg-black/20 group-hover:bg-black/10 transition-all duration-300"></div>
        <div class="absolute inset-0 flex items-center justify-center">
          <div class="text-2xl group-hover:scale-110 transition-transform duration-300">🏞️</div>
        </div>
        <div class="absolute bottom-1 left-1 text-xs bg-black/70 text-white px-1 py-0.5 rounded">相片</div>
      </div>
    </div>
    
    <!-- 影片縮圖 -->
    <div class="media-thumbnail" onclick="showMedia('video2', 'video', '裝潢設計靈感', '現代居家裝潢設計分享')">
      <div class="aspect-video bg-gradient-to-br from-purple-500 to-pink-600 rounded-lg overflow-hidden relative cursor-pointer group">
        <div class="absolute inset-0 bg-black/20 group-hover:bg-black/10 transition-all duration-300"></div>
        <div class="absolute inset-0 flex items-center justify-center">
          <div class="bg-white/20 rounded-full p-2 group-hover:scale-110 transition-transform duration-300">
            <svg class="w-4 h-4 text-white ml-0.5" fill="currentColor" viewBox="0 0 24 24">
              <path d="M8 5v14l11-7z"/>
            </svg>
          </div>
        </div>
        <div class="absolute bottom-1 left-1 text-xs bg-black/70 text-white px-1 py-0.5 rounded">4:15</div>
        <div class="absolute top-1 right-1 text-xs bg-blue-500 text-white px-1 py-0.5 rounded">NEW</div>
      </div>
    </div>
    
    <!-- 圖片縮圖 -->
    <div class="media-thumbnail" onclick="showMedia('image2', 'image', '社區活動', '參與社區活動，建立鄰里關係')">
      <div class="aspect-video bg-gradient-to-br from-orange-500 to-red-600 rounded-lg overflow-hidden relative cursor-pointer group">
        <div class="absolute inset-0 bg-black/20 group-hover:bg-black/10 transition-all duration-300"></div>
        <div class="absolute inset-0 flex items-center justify-center">
          <div class="text-2xl group-hover:scale-110 transition-transform duration-300">🎉</div>
        </div>
        <div class="absolute bottom-1 left-1 text-xs bg-black/70 text-white px-1 py-0.5 rounded">相片</div>
      </div>
    </div>
  </div>
  
  <!-- 查看更多按鈕 -->
  <div class="mt-4 text-center">
    <button onclick="showAllMedia()" class="bg-gradient-to-r from-pink-500 to-purple-600 text-white px-6 py-2 rounded-full hover:scale-105 transition-all duration-300 shadow-lg hover:shadow-xl">
      <span class="flex items-center gap-2">
        <span>📺</span>
        <span>查看更多精彩內容</span>
        <span class="text-xs bg-white/20 px-2 py-1 rounded-full">50+</span>
      </span>
    </button>


<!-- 圖片放大模態框 -->
<div id="imageModal" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
  <div class="relative max-w-4xl max-h-[90vh] w-full">
    <button onclick="closeImageModal()" class="absolute top-4 right-4 z-10 bg-black/50 hover:bg-black/70 text-white rounded-full p-2 transition-colors duration-200">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
      </svg>
    </button>
    <img id="modalImage" src="" alt="放大圖片" class="w-full h-full object-contain rounded-lg">
  </div>
</div>

<!-- 📍 底部導航 -->
<nav class="fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-lg border-t border-gray-200 flex justify-around py-2 bottom-nav" role="navigation" aria-label="主要導航">
  <button onclick="scrollTo(0,0)" class="flex flex-col items-center text-indigo-600 text-xs hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 rounded-lg px-2 py-1" aria-label="回到首頁">
    <span>🏠</span><span>首頁</span>
  </button>
  <button onclick="openTool('expense-tracker.html')" class="flex flex-col items-center text-gray-600 text-xs hover:text-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 rounded-lg px-2 py-1" aria-label="記帳">
    <span>📝</span><span>記帳</span>
  </button>
  <button onclick="openTool('games.html')" class="flex flex-col items-center text-gray-600 text-xs hover:text-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 rounded-lg px-2 py-1" aria-label="遊戲大廳">
    <span>🎮</span><span>遊戲</span>
  </button>
  <button onclick="openTool('local-life.html')" class="flex flex-col items-center text-gray-600 text-xs hover:text-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 rounded-lg px-2 py-1" aria-label="在地生活">
    <span>🍹</span><span>生活</span>
  </button>
  <button onclick="openTool('worship.html')" class="flex flex-col items-center text-gray-600 text-xs hover:text-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 rounded-lg px-2 py-1" aria-label="拜拜專區">
    <span>🙏</span><span>拜拜</span>
  </button>
</nav>

<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script>
// 應用程式主要功能 - 增強版
class PropertyApp {
  constructor() {
    this.init();
    this.setupDynamicContent();
    this.setupParticleEffect();
  }

  init() {
    this.setupSwiper();
    this.setupLoadingAnimation();
    this.setupKeyboardNavigation();
    this.setupSearchSuggestions();
    this.setupCardPreviews();
  }

  // 動態內容設定
  setupDynamicContent() {
    this.updateGreeting();
    this.updateUserCount();
    this.updateFunStats();
    this.updateRecommendations();
    this.updateWeatherStatus();
    
    // 定期更新
    setInterval(() => {
      this.updateUserCount();
      this.updateFunStats();
      this.updateWeatherStatus();
    }, 30000); // 每30秒更新一次
  }

  // 粒子效果
  setupParticleEffect() {
    const particlesContainer = document.getElementById('particles');
    if (!particlesContainer) return;

    for (let i = 0; i < 20; i++) {
      const particle = document.createElement('div');
      particle.className = 'absolute w-1 h-1 bg-white/30 rounded-full';
      particle.style.left = Math.random() * 100 + '%';
      particle.style.top = Math.random() * 100 + '%';
      particle.style.animationDelay = Math.random() * 3 + 's';
      particle.style.animation = `float ${3 + Math.random() * 2}s ease-in-out infinite`;
      particlesContainer.appendChild(particle);
    }
  }


  // 搜尋建議功能
  setupSearchSuggestions() {
    const searchInput = document.getElementById('mainSearchInput');
    const suggestions = document.getElementById('searchSuggestions');
    
    if (!searchInput || !suggestions) return;

    searchInput.addEventListener('focus', () => {
      suggestions.classList.remove('hidden');
    });

    searchInput.addEventListener('blur', (e) => {
      // 延遲隱藏，讓用戶可以點擊建議
      setTimeout(() => {
        if (!suggestions.contains(e.relatedTarget)) {
          suggestions.classList.add('hidden');
        }
      }, 200);
    });

    searchInput.addEventListener('input', (e) => {
      const query = e.target.value.toLowerCase();
      if (query.length > 0) {
        this.filterSuggestions(query);
      }
    });
  }

  // 卡片預覽功能
  setupCardPreviews() {
    const previews = {
      games: {
        title: '🎮 遊戲大廳',
        description: '多款小遊戲，放鬆心情',
        features: ['益智遊戲', '休閒娛樂', '排行榜']
      },
      fortune: {
        title: '🔮 每日運勢',
        description: '了解今日運勢，把握機會',
        features: ['星座運勢', '幸運數字', '開運顏色']
      },
      mbti: {
        title: '🧩 MBTI測驗',
        description: '探索你的性格類型',
        features: ['16型人格', '詳細分析', '職業建議']
      },
      quote: {
        title: '📝 每日金句',
        description: '正能量語錄，激勵每一天',
        features: ['勵志語錄', '名人名言', '心靈雞湯']
      }
    };

    window.showCardPreview = (type) => {
      const preview = document.getElementById('cardPreview');
      const content = document.getElementById('previewContent');
      const data = previews[type];
      
      if (data && preview && content) {
        content.innerHTML = `
          <div class="text-center">
            <div class="text-2xl mb-2">${data.title}</div>
            <div class="text-sm text-gray-600 dark:text-gray-300 mb-3">${data.description}</div>
            <div class="flex flex-wrap gap-1 justify-center">
              ${data.features.map(feature => 
                `<span class="bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded-full text-xs">${feature}</span>`
              ).join('')}
            </div>
          </div>
        `;
        preview.classList.remove('hidden');
      }
    };

    window.hideCardPreview = () => {
      const preview = document.getElementById('cardPreview');
      if (preview) {
        preview.classList.add('hidden');
      }
    };
  }

  // 更新問候語
  updateGreeting() {
    const greetings = [
      '🌟 歡迎來到楊梅人在地生活集！',
      '💫 讓生活更美好，從這裡開始',
      '🎯 發現更多實用工具和服務',
      '✨ 一站式生活服務平台',
      '🎊 享受便利的在地生活',
      '💡 智慧生活，從楊梅開始',
      '🌈 探索楊梅的美好生活'
    ];
    
    const greetingElement = document.getElementById('greetingText');
    if (greetingElement) {
      const randomGreeting = greetings[Math.floor(Math.random() * greetings.length)];
      greetingElement.textContent = randomGreeting;
    }
  }

  

  // 更新用戶數量
  updateUserCount() {
    const userCountElement = document.getElementById('userCount');
    if (userCountElement) {
      const baseCount = 12345;
      const randomIncrement = Math.floor(Math.random() * 100);
      userCountElement.textContent = (baseCount + randomIncrement).toLocaleString();
    }
  }

  // 更新趣味統計
  updateFunStats() {
    const funStatsElement = document.getElementById('funStats');
    if (funStatsElement) {
      const baseCount = 1234;
      const randomIncrement = Math.floor(Math.random() * 200);
      funStatsElement.innerHTML = `今日已有 <span class="font-bold text-orange-600">${(baseCount + randomIncrement).toLocaleString()}</span> 人使用`;
    }
  }

  // 更新推薦內容
  updateRecommendations() {
    // 這裡可以添加更多動態推薦邏輯
    console.log('推薦內容已更新');
  }

  // 更新天氣狀態
  updateWeatherStatus() {
    const weatherStatusElement = document.getElementById('weatherStatus');
    if (weatherStatusElement) {
      const weatherStatuses = [
        '多雲時晴',
        '晴朗',
        '陰天',
        '小雨',
        '多雲',
        '即時查詢'
      ];
      const randomStatus = weatherStatuses[Math.floor(Math.random() * weatherStatuses.length)];
      weatherStatusElement.textContent = randomStatus;
    }
  }


  // 過濾搜尋建議
  filterSuggestions(query) {
    const suggestions = document.querySelectorAll('.suggestion-item');
    suggestions.forEach(item => {
      const text = item.textContent.toLowerCase();
      if (text.includes(query)) {
        item.style.display = 'block';
      } else {
        item.style.display = 'none';
      }
    });
  }

  // 工具開啟功能
  openTool(url) {
    if (url.startsWith('http')) {
      // 外部連結在新視窗打開，保持主頁在原視窗
      window.open(url, '_blank', 'noopener,noreferrer');
    } else {
      // 內部連結在原視窗打開
      window.location.href = url;
    }
  }



  // Swiper 輪播設定
  setupSwiper() {
    if (document.querySelector('.mySwiper')) {
      new Swiper('.mySwiper', {
        loop: true,
        pagination: {
          el: '.swiper-pagination',
          clickable: true,
          dynamicBullets: true
        },
        autoplay: {
          delay: 4000,
          disableOnInteraction: false,
          pauseOnMouseEnter: true
        },
        effect: 'slide',
        speed: 600,
        breakpoints: {
          640: {
            slidesPerView: 1,
            spaceBetween: 20
          },
          768: {
            slidesPerView: 1,
            spaceBetween: 30
          }
        }
      });
    }
  }

  // 載入動畫
  setupLoadingAnimation() {
    // 簡化載入動畫，只在需要時使用
    window.addEventListener('load', () => {
      // 移除複雜的動畫邏輯
    });
  }

  // 鍵盤導航支援
  setupKeyboardNavigation() {
    document.addEventListener('keydown', (e) => {
      // ESC 鍵關閉任何彈窗
      if (e.key === 'Escape') {
        this.closeAllModals();
      }
    });
  }

  // 顯示通知
  showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.className = `fixed top-20 right-4 bg-white dark:bg-gray-800 text-gray-900 dark:text-white px-4 py-2 rounded-lg shadow-lg z-50 transform translate-x-full transition-transform duration-300`;
    notification.textContent = message;
    
    document.body.appendChild(notification);
    
    // 顯示動畫
    setTimeout(() => {
      notification.style.transform = 'translateX(0)';
    }, 100);
    
    // 自動隱藏
    setTimeout(() => {
      notification.style.transform = 'translateX(full)';
      setTimeout(() => {
        document.body.removeChild(notification);
      }, 300);
    }, 3000);
  }

  // 關閉所有彈窗
  closeAllModals() {
    // 這裡可以添加關閉彈窗的邏輯
  }
}

// 全域函數（向後兼容）
function openTool(url) {
  app.openTool(url);
}

// 媒體展示功能
class MediaGallery {
  constructor() {
    this.currentMedia = null;
    this.mediaData = {
      video1: {
        type: 'video',
        src: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4',
        title: '房產投資秘訣',
        description: '了解如何聰明投資房地產，掌握市場趨勢',
        thumbnail: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjExMyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImdyYWQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiM0NjY2ZjE7c3RvcC1vcGFjaXR5OjEiIC8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojNzI2NmY3O3N0b3Atb3BhY2l0eToxIiAvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMTEzIiBmaWxsPSJ1cmwoI2dyYWQpIi8+PHRleHQgeD0iMTAwIiB5PSI2MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjI0IiBmb250LXdlaWdodD0iYm9sZCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0id2hpdGUiPvCfkI48L3RleHQ+PC9zdmc+'
      },
      image1: {
        type: 'image',
        src: 'https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=800&h=450&fit=crop',
        title: '楊梅在地生活',
        description: '探索楊梅的美好生活，感受在地文化',
        thumbnail: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjExMyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImdyYWQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiMxMGJjODE7c3RvcC1vcGFjaXR5OjEiIC8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojMTRiMDg4O3N0b3Atb3BhY2l0eToxIiAvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMTEzIiBmaWxsPSJ1cmwoI2dyYWQpIi8+PHRleHQgeD0iMTAwIiB5PSI2MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjI0IiBmb250LXdlaWdodD0iYm9sZCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0id2hpdGUiPuafkO+4jzwvdGV4dD48L3N2Zz4='
      },
      video2: {
        type: 'video',
        src: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_2mb.mp4',
        title: '裝潢設計靈感',
        description: '現代居家裝潢設計分享，打造理想家居',
        thumbnail: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjExMyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImdyYWQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNhODU1Zjc7c3RvcC1vcGFjaXR5OjEiIC8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojZWM0ODk5O3N0b3Atb3BhY2l0eToxIiAvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMTEzIiBmaWxsPSJ1cmwoI2dyYWQpIi8+PHRleHQgeD0iMTAwIiB5PSI2MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjI0IiBmb250LXdlaWdodD0iYm9sZCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0id2hpdGUiPuCfkI48L3RleHQ+PC9zdmc+'
      },
      image2: {
        type: 'image',
        src: 'https://images.unsplash.com/photo-1511632765486-a01980e01a18?w=800&h=450&fit=crop',
        title: '社區活動',
        description: '參與社區活動，建立鄰里關係',
        thumbnail: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjExMyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImdyYWQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmNTlkMGI7c3RvcC1vcGFjaXR5OjEiIC8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojZWM0NDQ0O3N0b3Atb3BhY2l0eToxIiAvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMTEzIiBmaWxsPSJ1cmwoI2dyYWQpIi8+PHRleHQgeD0iMTAwIiB5PSI2MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjI0IiBmb250LXdlaWdodD0iYm9sZCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0id2hpdGUiPuKamPCfpo48L3RleHQ+PC9zdmc+'
      }
    };
  }

  // 顯示媒體內容
  showMedia(mediaId, type, title, description) {
    this.currentMedia = mediaId;
    
    // 更新縮圖狀態
    document.querySelectorAll('.media-thumbnail').forEach(thumb => {
      thumb.classList.remove('active');
    });
    event.currentTarget.classList.add('active');
    
    // 隱藏所有媒體元素
    const mainVideo = document.getElementById('mainVideo');
    const mainImage = document.getElementById('mainImage');
    const defaultContent = document.querySelector('#mainMediaDisplay > .text-center');
    
    if (mainVideo) mainVideo.classList.add('hidden');
    if (mainImage) mainImage.classList.add('hidden');
    if (defaultContent) defaultContent.style.display = 'none';
    
    // 更新標題和描述
    const mediaTitle = document.getElementById('mediaTitle');
    const mediaDescription = document.getElementById('mediaDescription');
    
    if (mediaTitle) mediaTitle.textContent = title;
    if (mediaDescription) mediaDescription.textContent = description;
    
    // 顯示對應的媒體類型
    if (type === 'video') {
      if (mainVideo) {
        const mediaData = this.mediaData[mediaId];
        if (mediaData && mediaData.src) {
          mainVideo.src = mediaData.src;
          mainVideo.classList.remove('hidden');
        } else {
          // 如果沒有實際影片，顯示佔位內容
          this.showPlaceholder('video', title);
        }
      }
    } else if (type === 'image') {
      if (mainImage) {
        const mediaData = this.mediaData[mediaId];
        if (mediaData && mediaData.src) {
          mainImage.src = mediaData.src;
          mainImage.classList.remove('hidden');
        } else {
          // 如果沒有實際圖片，顯示佔位內容
          this.showPlaceholder('image', title);
        }
      }
    }
  }

  // 顯示佔位內容
  showPlaceholder(type, title) {
    const mainDisplay = document.getElementById('mainMediaDisplay');
    if (mainDisplay) {
      const placeholder = document.createElement('div');
      placeholder.className = 'absolute inset-0 flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800';
      placeholder.innerHTML = `
        <div class="text-center text-gray-500 dark:text-gray-400">
          <div class="text-6xl mb-4 opacity-50">${type === 'video' ? '🎬' : '📸'}</div>
          <div class="text-xl font-semibold mb-2">${title}</div>
          <div class="text-sm">${type === 'video' ? '影片內容' : '圖片內容'}</div>
          <div class="mt-4 text-xs opacity-75">實際內容將在此處顯示</div>
        </div>
      `;
      
      // 移除舊的佔位內容
      const oldPlaceholder = mainDisplay.querySelector('.absolute.inset-0.flex.items-center.justify-center');
      if (oldPlaceholder) {
        oldPlaceholder.remove();
      }
      
      mainDisplay.appendChild(placeholder);
    }
  }

  // 播放主要媒體
  playMainMedia() {
    const mainVideo = document.getElementById('mainVideo');
    if (mainVideo && !mainVideo.classList.contains('hidden')) {
      mainVideo.play();
    } else {
      // 如果沒有影片，顯示提示
      this.showNotification('請先選擇一個影片內容', 'info');
    }
  }

  // 顯示所有媒體
  showAllMedia() {
    this.showNotification('正在載入更多精彩內容...', 'info');
    
    // 這裡可以導航到專門的媒體頁面或顯示更多內容
    setTimeout(() => {
      this.showNotification('媒體庫功能開發中，敬請期待！', 'info');
    }, 1500);
  }

  // 顯示通知
  showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    const colors = {
      success: 'bg-green-500',
      error: 'bg-red-500',
      warning: 'bg-yellow-500',
      info: 'bg-blue-500'
    };
    
    notification.className = `fixed top-20 right-4 ${colors[type]} text-white px-6 py-3 rounded-lg shadow-lg z-50 transform translate-x-full transition-transform duration-300 max-w-sm`;
    notification.innerHTML = `
      <div class="flex items-center gap-2">
        <span class="text-lg">${type === 'success' ? '✅' : type === 'error' ? '❌' : type === 'warning' ? '⚠️' : 'ℹ️'}</span>
        <span>${message}</span>
      </div>
    `;
    
    document.body.appendChild(notification);
    
    // 顯示動畫
    setTimeout(() => {
      notification.style.transform = 'translateX(0)';
    }, 100);
    
    // 自動隱藏
    setTimeout(() => {
      notification.style.transform = 'translateX(100%)';
      setTimeout(() => {
        if (document.body.contains(notification)) {
          document.body.removeChild(notification);
        }
      }, 300);
    }, 3000);
  }
}

// 全域函數
function showMedia(mediaId, type, title, description) {
  mediaGallery.showMedia(mediaId, type, title, description);
}

function playMainMedia() {
  mediaGallery.playMainMedia();
}

function showAllMedia() {
  mediaGallery.showAllMedia();
}

// 初始化媒體展示
const mediaGallery = new MediaGallery();

// 初始化應用
const app = new PropertyApp();

// 性能監控
if ('performance' in window) {
  window.addEventListener('load', () => {
    setTimeout(() => {
      const perfData = performance.getEntriesByType('navigation')[0];
      console.log('頁面載入時間:', perfData.loadEventEnd - perfData.loadEventStart, 'ms');
    }, 0);
  });
}

// PWA安裝提示
let deferredPrompt;
const installBtn = document.getElementById('installBtn');

window.addEventListener('beforeinstallprompt', (e) => {
  console.log('PWA安裝提示觸發');
  e.preventDefault();
  deferredPrompt = e;
  
  // 顯示安裝按鈕
  if (installBtn) {
    installBtn.style.display = 'block';
    installBtn.addEventListener('click', async () => {
      if (deferredPrompt) {
        deferredPrompt.prompt();
        const { outcome } = await deferredPrompt.userChoice;
        console.log(`用戶選擇: ${outcome}`);
        deferredPrompt = null;
        installBtn.style.display = 'none';
      }
    });
  }
});

// 檢查是否已安裝
window.addEventListener('appinstalled', (evt) => {
  console.log('PWA已安裝');
  if (installBtn) {
    installBtn.style.display = 'none';
  }
});

// Service Worker註冊
if ('serviceWorker' in navigator) {
  window.addEventListener('load', async () => {
    try {
      const registration = await navigator.serviceWorker.register('/sw.js');
      console.log('Service Worker註冊成功:', registration.scope);
      
      // 檢查更新
      registration.addEventListener('updatefound', () => {
        const newWorker = registration.installing;
        newWorker.addEventListener('statechange', () => {
          if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
            // 有新版本可用
            if (confirm('發現新版本，是否立即更新？')) {
              newWorker.postMessage({ action: 'skipWaiting' });
              window.location.reload();
            }
          }
        });
      });
    } catch (error) {
      console.log('Service Worker註冊失敗:', error);
    }
  });
}


// 社交分享功能
function shareContent(title, text, url) {
  if (navigator.share) {
    navigator.share({
      title: title,
      text: text,
      url: url
    }).then(() => {
      console.log('分享成功');
    }).catch((error) => {
      console.log('分享失敗:', error);
    });
  } else {
    // 降級到複製連結
    navigator.clipboard.writeText(url).then(() => {
      alert('連結已複製到剪貼板！');
    });
  }
}

// 搜尋功能
function openSearch() {
  window.location.href = 'search.html';
}

function handleSearchEnter(event) {
  if (event.key === 'Enter') {
    const query = document.getElementById('mainSearchInput').value.trim();
    if (query) {
      // 儲存搜尋關鍵字
      localStorage.setItem('searchQuery', query);
      // 跳轉到搜尋頁面
      window.location.href = 'search.html';
    }
  }
}

// 在地生活相關功能
function showLocalRecommendations() {
  const recommendations = [
    "🏠 楊梅優質房產 - 精選物件推薦",
    "🛠️ 在地服務商 - 水電、裝潢、維修",
    "🍽️ 在地美食 - 楊梅特色餐廳",
    "🚌 交通資訊 - 公車路線、時刻表",
    "🏪 生活便利 - 超市、銀行、郵局"
  ];
  
  const message = "🌟 楊梅在地推薦：\n\n" + recommendations.join("\n");
  alert(message);
}

function showLocalServices() {
  const services = [
    "🔧 水電維修 - 24小時服務",
    "🎨 裝潢設計 - 專業團隊",
    "🚚 搬家服務 - 安全可靠",
    "🧹 清潔服務 - 定期維護",
    "🌱 園藝服務 - 美化環境"
  ];
  
  const message = "🛠️ 在地服務推薦：\n\n" + services.join("\n");
  alert(message);
}

function showLocalActivities() {
  const activities = [
    "🏃‍♂️ 楊梅運動公園 - 休閒運動",
    "📚 楊梅圖書館 - 閱讀學習",
    "🎭 文化活動 - 藝文展演",
    "🍃 自然步道 - 親近自然",
    "🎪 節慶活動 - 社區參與"
  ];
  
  const message = "🎊 楊梅在地活動：\n\n" + activities.join("\n");
  alert(message);
}

function showLocalFood() {
  const food = [
    "🍜 楊梅麵店 - 傳統好味道",
    "🥟 在地小吃 - 特色美食",
    "☕ 咖啡廳 - 休閒時光",
    "🍰 甜點店 - 下午茶選擇",
    "🍱 便當店 - 經濟實惠"
  ];
  
  const message = "🍽️ 楊梅在地美食：\n\n" + food.join("\n");
  alert(message);
}

function shareLocalGreeting() {
  const greetings = [
    "🌟 歡迎來到楊梅人在地生活集！",
    "💫 讓生活更美好，從這裡開始",
    "🎯 發現更多實用工具和服務",
    "✨ 一站式生活服務平台"
  ];
  
  const randomGreeting = greetings[Math.floor(Math.random() * greetings.length)];
  
  if (navigator.share) {
    navigator.share({
      title: '楊梅在地生活',
      text: randomGreeting,
      url: window.location.href
    });
  } else {
    navigator.clipboard.writeText(randomGreeting).then(() => {
      alert('楊梅在地生活資訊已複製到剪貼板！\n\n' + randomGreeting);
    });
  }
}

function showLocalEvents() {
  const events = [
    "🎪 楊梅文化節 - 在地文化展示",
    "🎭 社區音樂會 - 藝文表演",
    "🏮 節慶市集 - 在地特產",
    "🎊 親子活動 - 家庭同樂",
    "🌙 夜間活動 - 夜生活體驗"
  ];
  
  const message = "🎪 楊梅在地活動：\n\n" + events.join("\n");
  alert(message);
}

function showLocalBusinesses() {
  const businesses = [
    "🏪 楊梅市場 - 新鮮蔬果",
    "🏦 銀行服務 - 金融便利",
    "📮 郵局服務 - 郵務處理",
    "🏥 醫療服務 - 健康照護",
    "🎓 教育機構 - 學習資源"
  ];
  
  const message = "🏪 楊梅在地商家：\n\n" + businesses.join("\n");
  alert(message);
}

// 新增互動功能
function quickSearch(query) {
  document.getElementById('mainSearchInput').value = query;
  localStorage.setItem('searchQuery', query);
  window.location.href = 'search.html';
}


// 圖片放大模態框功能
function showImageModal(imageSrc) {
  const modal = document.getElementById('imageModal');
  const modalImage = document.getElementById('modalImage');
  if (modal && modalImage) {
    modalImage.src = imageSrc;
    modal.classList.remove('hidden');
    document.body.style.overflow = 'hidden'; // 防止背景滾動
  }
}

function closeImageModal() {
  const modal = document.getElementById('imageModal');
  if (modal) {
    modal.classList.add('hidden');
    document.body.style.overflow = 'auto'; // 恢復滾動
  }
}


function showAllNotifications() {
  const notifications = [
    "🌦 今日天氣：多雲時晴，適合外出",
    "🗑 垃圾車將於 19:30 到達您的區域",
    "🧾 最新發票開獎結果已公布",
    "🚌 公車路線調整通知",
    "🏦 銀行利率最新變動"
  ];
  
  const randomNotification = notifications[Math.floor(Math.random() * notifications.length)];
  showNotification(randomNotification, 'info');
}

function showNotification(message, type = 'info') {
  const notification = document.createElement('div');
  const colors = {
    success: 'bg-green-500',
    error: 'bg-red-500',
    warning: 'bg-yellow-500',
    info: 'bg-blue-500'
  };
  
  notification.className = `fixed top-20 right-4 ${colors[type]} text-white px-6 py-3 rounded-lg shadow-lg z-50 transform translate-x-full transition-transform duration-300 max-w-sm`;
  notification.innerHTML = `
    <div class="flex items-center gap-2">
      <span class="text-lg">${type === 'success' ? '✅' : type === 'error' ? '❌' : type === 'warning' ? '⚠️' : 'ℹ️'}</span>
      <span>${message}</span>
    </div>
  `;
  
  document.body.appendChild(notification);
  
  // 顯示動畫
  setTimeout(() => {
    notification.style.transform = 'translateX(0)';
  }, 100);
  
  // 自動隱藏
  setTimeout(() => {
    notification.style.transform = 'translateX(100%)';
    setTimeout(() => {
      if (document.body.contains(notification)) {
        document.body.removeChild(notification);
      }
    }, 300);
  }, 4000);
}

// 滾動到頂部動畫
function smoothScrollToTop() {
  window.scrollTo({
    top: 0,
    behavior: 'smooth'
  });
}

// 添加滾動監聽
window.addEventListener('scroll', () => {
  const scrollButton = document.getElementById('scrollToTop');
  if (scrollButton) {
    if (window.pageYOffset > 300) {
      scrollButton.classList.remove('hidden');
    } else {
      scrollButton.classList.add('hidden');
    }
  }
});

// 鍵盤快捷鍵
document.addEventListener('keydown', (e) => {
  // Ctrl/Cmd + K 開啟搜尋
  if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
    e.preventDefault();
    document.getElementById('mainSearchInput')?.focus();
  }
  
  // ESC 關閉所有彈窗
  if (e.key === 'Escape') {
    hideCardPreview();
    const suggestions = document.getElementById('searchSuggestions');
    if (suggestions) {
      suggestions.classList.add('hidden');
    }
    // 關閉模態框
    closeImageModal();
  }
});

// 添加回到頂部按鈕
const scrollButton = document.createElement('button');
scrollButton.id = 'scrollToTop';
scrollButton.className = 'fixed bottom-20 right-4 bg-indigo-600 text-white p-3 rounded-full shadow-lg hover:bg-indigo-700 transition-all duration-300 z-40 hidden';
scrollButton.innerHTML = '⬆️';
scrollButton.onclick = smoothScrollToTop;
document.body.appendChild(scrollButton);
</script>
</body>
</html>
