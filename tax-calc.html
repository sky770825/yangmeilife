<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ç¨…è²»è©¦ç®— - æ¿¬ç‘’æˆ¿ç”¢ç”Ÿæ´»å¹³å°</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
:root{
  --primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  --secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  --success: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
  --warning: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
  --glass-bg: rgba(255, 255, 255, 0.25);
  --glass-border: rgba(255, 255, 255, 0.18);
  --glass-dark: rgba(30, 30, 30, 0.25);
  --glass-dark-border: rgba(255, 255, 255, 0.1);
  --shadow-soft: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
  --shadow-hover: 0 15px 35px rgba(31, 38, 135, 0.2);
  --border-radius: 1rem;
  --border-radius-lg: 1.5rem;
  --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  --transition-slow: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body{
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  min-height: 100vh;
  transition: var(--transition);
  font-family: 'Inter', system-ui, -apple-system, sans-serif;
  line-height: 1.6;
  color: #333;
}

body.dark {
  background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
  color: #f8f9fa;
}

.container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0.75rem;
}

.glass-card{
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-radius: var(--border-radius);
  border: 1px solid var(--glass-border);
  box-shadow: var(--shadow-soft);
  transition: var(--transition);
  position: relative;
  overflow: hidden;
}

.glass-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
}

.glass-card:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-hover);
}

body.dark .glass-card {
  background: var(--glass-dark);
  border: 1px solid var(--glass-dark-border);
}

.tax-item{
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(10px);
  border-radius: 0.5rem;
  padding: 0.75rem;
  margin-bottom: 0.5rem;
  transition: var(--transition);
  border: 1px solid rgba(255, 255, 255, 0.3);
  position: relative;
}

.tax-item:hover {
  transform: translateX(5px);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

body.dark .tax-item {
  background: rgba(30, 30, 30, 0.8);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.result-card{
  background: var(--primary);
  color: white;
  border-radius: var(--border-radius-lg);
  padding: 2rem;
  text-align: center;
  position: relative;
  overflow: hidden;
}

.result-card::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
  animation: shimmer 3s ease-in-out infinite;
}

@keyframes shimmer {
  0%, 100% { transform: translateX(-100%) translateY(-100%) rotate(30deg); }
  50% { transform: translateX(100%) translateY(100%) rotate(30deg); }
}

.input-group {
  position: relative;
  margin-bottom: 1rem;
}

.input-group label {
  display: block;
  font-weight: 600;
  margin-bottom: 0.375rem;
  color: #374151;
  font-size: 0.85rem;
}

body.dark .input-group label {
  color: #f3f4f6;
}

.input-group input,
.input-group select {
  width: 100%;
  padding: 0.625rem 0.75rem;
  border: 2px solid rgba(255, 255, 255, 0.2);
  border-radius: 0.5rem;
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(10px);
  transition: var(--transition);
  font-size: 0.9rem;
  color: #374151;
}

.input-group input:focus,
.input-group select:focus {
  outline: none;
  border-color: #667eea;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
  transform: translateY(-2px);
}

body.dark .input-group input,
body.dark .input-group select {
  background: rgba(30, 30, 30, 0.8);
  border: 2px solid rgba(255, 255, 255, 0.1);
  color: #f3f4f6;
}

#themeToggle{
  position: fixed;
  top: 1rem;
  right: 1rem;
  background: var(--primary);
  color: #fff;
  border: none;
  padding: 0.75rem;
  border-radius: 50%;
  z-index: 50;
  transition: var(--transition);
  cursor: pointer;
  font-size: 1.2rem;
  width: 50px;
  height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

#themeToggle:hover {
  transform: scale(1.1) rotate(180deg);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
}

.back-btn {
  position: fixed;
  top: 1rem;
  left: 1rem;
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(10px);
  border: none;
  padding: 0.75rem;
  border-radius: 50%;
  z-index: 50;
  transition: var(--transition);
  cursor: pointer;
  font-size: 1.2rem;
  width: 50px;
  height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.back-btn:hover {
  transform: scale(1.1);
  background: rgba(255, 255, 255, 1);
}

body.dark .back-btn {
  background: rgba(30, 30, 30, 0.8);
  color: #f3f4f6;
}

.section-title {
  font-size: 1.1rem;
  font-weight: 700;
  margin-bottom: 1rem;
  display: flex;
  align-items: center;
  gap: 0.375rem;
}

.tax-amount {
  font-weight: 700;
  font-size: 0.9rem;
}

.tax-description {
  font-size: 0.75rem;
  opacity: 0.8;
  margin-top: 0.125rem;
}

.grid-2 {
  display: grid;
  grid-template-columns: 1fr 1.2fr;
  gap: 1.25rem;
  align-items: start;
}

.grid-3 {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1rem;
}

.input-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 0.75rem;
}

.tax-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
}

@media (max-width: 768px) {
  .grid-2,
  .grid-3,
  .tax-grid {
    grid-template-columns: 1fr;
  }
  
  .input-grid {
    grid-template-columns: 1fr;
  }
  
  .container {
    padding: 0.5rem;
  }
  
  .result-card {
    padding: 1.5rem;
  }
  
  .grid-2 {
    gap: 1rem;
  }
}

.fade-in {
  animation: fadeIn 0.6s ease-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.pulse {
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.8;
  }
}
</style>
</head>
<body>
<!-- ä¸»é¡Œåˆ‡æ› -->
<button id="themeToggle" aria-label="åˆ‡æ›ä¸»é¡Œæ¨¡å¼">ğŸŒ</button>

<!-- è¿”å›æŒ‰éˆ• -->
<button onclick="history.back()" class="back-btn" aria-label="è¿”å›ä¸Šä¸€é ">
  â†
</button>

<!-- æ¨™é¡Œå€ -->
<header class="text-center py-6 fade-in">
  <div class="container">
    <h1 class="text-3xl font-bold text-white mb-2">ğŸ“„ ç¨…è²»è©¦ç®—å·¥å…·</h1>
    <p class="text-base opacity-90 text-white">2025å¹´æˆ¿åœ°åˆä¸€ç¨…2.0æœ€æ–°ç¨…åˆ¶</p>
  </div>
</header>

<main class="container py-4">
  <div class="grid-2">
    <!-- å·¦å´ï¼šè¼¸å…¥å€åŸŸ -->
    <div class="space-y-4">
      <!-- åŸºæœ¬è³‡è¨Š -->
      <section class="glass-card p-5 fade-in">
        <h2 class="section-title">
          <span class="text-2xl">ğŸ“</span>
          <span>æˆ¿å±‹è³‡è¨Š</span>
        </h2>
        <div class="input-grid">
          <div class="input-group">
            <label>æˆ¿å±‹ç¸½åƒ¹ (è¬å…ƒ)</label>
            <input type="number" id="housePrice" placeholder="ä¾‹å¦‚ï¼š1500" value="1500">
          </div>
          <div class="input-group">
            <label>å–å¾—æˆæœ¬ (è¬å…ƒ)</label>
            <input type="number" id="costPrice" placeholder="ä¾‹å¦‚ï¼š1200" value="1200">
          </div>
          <div class="input-group">
            <label>æˆ¿å±‹é¡å‹</label>
            <select id="houseType">
              <option value="new">æ–°å»ºæˆ¿å±‹</option>
              <option value="used" selected>ä¸­å¤å±‹</option>
            </select>
          </div>
          <div class="input-group">
            <label>æŒæœ‰å¹´é™</label>
            <select id="holdYears">
              <option value="1">1å¹´å…§</option>
              <option value="2">1-2å¹´</option>
              <option value="5">2-5å¹´</option>
              <option value="10" selected>5-10å¹´</option>
              <option value="20">10å¹´ä»¥ä¸Š</option>
            </select>
          </div>
          <div class="input-group">
            <label>æˆ¿å±‹ç”¨é€”</label>
            <select id="houseUsage">
              <option value="self" selected>è‡ªç”¨ä½å®…</option>
              <option value="investment">æŠ•è³‡ç”¨é€”</option>
              <option value="business">ç‡Ÿæ¥­ç”¨é€”</option>
            </select>
          </div>
          <div class="input-group">
            <label>æ˜¯å¦ç‚ºé¦–æ¬¡è³¼å±‹</label>
            <select id="firstTimeBuyer">
              <option value="no" selected>å¦</option>
              <option value="yes">æ˜¯</option>
            </select>
          </div>
          <div class="input-group">
            <label>åœŸåœ°é¢ç© (åª)</label>
            <input type="number" id="landArea" placeholder="ä¾‹å¦‚ï¼š25" value="25">
          </div>
          <div class="input-group">
            <label>å»ºç‰©é¢ç© (åª)</label>
            <input type="number" id="buildingArea" placeholder="ä¾‹å¦‚ï¼š35" value="35">
          </div>
        </div>
      </section>

    </div>

    <!-- å³å´ï¼šçµæœå€åŸŸ -->
    <div class="space-y-4">
      <!-- ç¨…è²»ç¸½è¨ˆ -->
      <section class="result-card pulse">
        <h3 class="text-xl font-bold mb-3">ğŸ’° ç¨…è²»ç¸½è¨ˆ</h3>
        <div class="grid grid-cols-2 gap-3 text-center mb-3">
          <div class="bg-white/20 rounded-lg p-3">
            <div class="text-xl font-bold" id="buyerTotal">NT$ 72,500</div>
            <div class="text-xs opacity-80">è²·æ–¹è² æ“”</div>
          </div>
          <div class="bg-white/20 rounded-lg p-3">
            <div class="text-xl font-bold" id="sellerTotal">NT$ 60,000</div>
            <div class="text-xs opacity-80">è³£æ–¹è² æ“”</div>
          </div>
        </div>
        <div class="pt-3 border-t border-white/20">
          <div class="text-2xl font-bold" id="totalTax">NT$ 132,500</div>
          <div class="text-xs opacity-80">ç¸½ç¨…è²»</div>
        </div>
      </section>

      <!-- ç¨…è²»æ˜ç´° -->
      <div class="tax-grid">
        <!-- è²·æ–¹ç¨…è²» -->
        <section class="glass-card p-5 fade-in">
          <h2 class="section-title">
            <span class="text-2xl">ğŸ’°</span>
            <span>è²·æ–¹ç¨…è²»</span>
          </h2>
          <div class="space-y-2">
            <div class="tax-item">
              <div class="flex justify-between items-center">
                <div>
                  <h3 class="font-semibold text-sm">ğŸ  å¥‘ç¨…</h3>
                  <p class="tax-description">æˆ¿å±‹ç§»è½‰ç™»è¨˜ç¨…</p>
                </div>
                <span class="tax-amount text-blue-600" id="deedTax">NT$ 45,000</span>
              </div>
            </div>

            <div class="tax-item">
              <div class="flex justify-between items-center">
                <div>
                  <h3 class="font-semibold text-sm">ğŸ“‹ å°èŠ±ç¨…</h3>
                  <p class="tax-description">å¥‘ç´„æ›¸å°èŠ±ç¨…</p>
                </div>
                <span class="tax-amount text-blue-600" id="stampTax">NT$ 1,500</span>
              </div>
            </div>

            <div class="tax-item">
              <div class="flex justify-between items-center">
                <div>
                  <h3 class="font-semibold text-sm">ğŸ“ ç™»è¨˜è¦è²»</h3>
                  <p class="tax-description">åœ°æ”¿äº‹å‹™æ‰€è¦è²»</p>
                </div>
                <span class="tax-amount text-blue-600" id="registrationFee">NT$ 3,000</span>
              </div>
            </div>

            <div class="tax-item">
              <div class="flex justify-between items-center">
                <div>
                  <h3 class="font-semibold text-sm">ğŸ¦ éŠ€è¡Œè²»ç”¨</h3>
                  <p class="tax-description">è²¸æ¬¾è¨­å®šè²»ã€æ‰‹çºŒè²»</p>
                </div>
                <span class="tax-amount text-blue-600" id="bankFee">NT$ 8,000</span>
              </div>
            </div>

            <div class="tax-item">
              <div class="flex justify-between items-center">
                <div>
                  <h3 class="font-semibold text-sm">ğŸ¢ ä»£æ›¸è²»</h3>
                  <p class="tax-description">ä»£æ›¸æœå‹™è²»ç”¨</p>
                </div>
                <span class="tax-amount text-blue-600" id="notaryFee">NT$ 15,000</span>
              </div>
            </div>

            <div class="tax-item">
              <div class="flex justify-between items-center">
                <div>
                  <h3 class="font-semibold text-sm">ğŸ  ä»²ä»‹è²» (è²·æ–¹)</h3>
                  <p class="tax-description">è²·æ–¹è² æ“”ä»²ä»‹æœå‹™è²» 2%</p>
                </div>
                <span class="tax-amount text-blue-600" id="buyerAgentFee">NT$ 30,000</span>
              </div>
            </div>

            <div class="tax-item">
              <div class="flex justify-between items-center">
                <div>
                  <h3 class="font-semibold text-sm">ğŸ” å±¥ç´„ä¿è­‰è²»</h3>
                  <p class="tax-description">å±¥ç´„ä¿è­‰æœå‹™è²»</p>
                </div>
                <span class="tax-amount text-blue-600" id="guaranteeFee">NT$ 5,000</span>
              </div>
            </div>

            <div class="tax-item">
              <div class="flex justify-between items-center">
                <div>
                  <h3 class="font-semibold text-sm">ğŸ“‹ ç«éšªåœ°éœ‡éšª</h3>
                  <p class="tax-description">ç¬¬ä¸€å¹´ä¿éšªè²»ç”¨</p>
                </div>
                <span class="tax-amount text-blue-600" id="insuranceFee">NT$ 3,000</span>
              </div>
            </div>
          </div>
        </section>

        <!-- è³£æ–¹ç¨…è²» -->
        <section class="glass-card p-5 fade-in">
          <h2 class="section-title">
            <span class="text-2xl">ğŸ’¸</span>
            <span>è³£æ–¹ç¨…è²»</span>
          </h2>
          <div class="space-y-2">
            <div class="tax-item">
              <div class="flex justify-between items-center">
                <div>
                  <h3 class="font-semibold text-sm">ğŸ“Š æˆ¿åœ°åˆä¸€ç¨…2.0</h3>
                  <p class="tax-description" id="unifiedTaxDesc">ä¾æŒæœ‰å¹´é™è¨ˆç®—</p>
                </div>
                <span class="tax-amount text-red-600" id="unifiedTax">NT$ 0</span>
              </div>
            </div>

            <div class="tax-item">
              <div class="flex justify-between items-center">
                <div>
                  <h3 class="font-semibold text-sm">ğŸ  åœŸåœ°å¢å€¼ç¨…</h3>
                  <p class="tax-description">åœŸåœ°å¢å€¼éƒ¨åˆ†ç¨…è² </p>
                </div>
                <span class="tax-amount text-red-600" id="landTax">NT$ 30,000</span>
              </div>
            </div>

            <div class="tax-item">
              <div class="flex justify-between items-center">
                <div>
                  <h3 class="font-semibold text-sm">ğŸ¢ ä»²ä»‹è²» (è³£æ–¹)</h3>
                  <p class="tax-description">è³£æ–¹è² æ“”ä»²ä»‹æœå‹™è²» 4%</p>
                </div>
                <span class="tax-amount text-red-600" id="sellerAgentFee">NT$ 60,000</span>
              </div>
            </div>

            <div class="tax-item">
              <div class="flex justify-between items-center">
                <div>
                  <h3 class="font-semibold text-sm">ğŸ  æˆ¿å±‹ç¨…</h3>
                  <p class="tax-description">å¹´åº¦æˆ¿å±‹ç¨… (æŒ‰æ¯”ä¾‹åˆ†æ”¤)</p>
                </div>
                <span class="tax-amount text-red-600" id="houseTax">NT$ 8,000</span>
              </div>
            </div>

            <div class="tax-item">
              <div class="flex justify-between items-center">
                <div>
                  <h3 class="font-semibold text-sm">ğŸï¸ åœ°åƒ¹ç¨…</h3>
                  <p class="tax-description">å¹´åº¦åœ°åƒ¹ç¨… (æŒ‰æ¯”ä¾‹åˆ†æ”¤)</p>
                </div>
                <span class="tax-amount text-red-600" id="landValueTax">NT$ 5,000</span>
              </div>
            </div>

            <div class="tax-item">
              <div class="flex justify-between items-center">
                <div>
                  <h3 class="font-semibold text-sm">ğŸ”§ ä¿®ç¹•è²»</h3>
                  <p class="tax-description">æˆ¿å±‹ä¿®ç¹•æ•´ç†è²»ç”¨</p>
                </div>
                <span class="tax-amount text-red-600" id="repairFee">NT$ 10,000</span>
              </div>
            </div>
          </div>
        </section>
      </div>
    </div>
  </div>

  <!-- ä¸‹æ–¹ï¼šè³‡è¨Šå€åŸŸ -->
  <div class="grid-3 mt-6">
    <!-- ç¯€ç¨…å»ºè­° -->
    <section class="glass-card p-5 fade-in">
      <h3 class="section-title">
        <span class="text-2xl">ğŸ’¡</span>
        <span>ç¯€ç¨…å»ºè­°</span>
      </h3>
      <div class="space-y-2">
        <div class="flex items-start space-x-2 p-2 bg-green-50 rounded-lg">
          <span class="text-green-500 text-lg">ğŸ’¡</span>
          <span class="text-xs">æŒæœ‰è¶…é5å¹´å¯é©ç”¨æˆ¿åœ°åˆä¸€ç¨…å„ªæƒ ç¨…ç‡</span>
        </div>
        <div class="flex items-start space-x-2 p-2 bg-blue-50 rounded-lg">
          <span class="text-blue-500 text-lg">ğŸ’¡</span>
          <span class="text-xs">è‡ªç”¨ä½å®…é‡è³¼é€€ç¨…ï¼š2å¹´å…§é‡è³¼å¯ç”³è«‹é€€ç¨…</span>
        </div>
        <div class="flex items-start space-x-2 p-2 bg-purple-50 rounded-lg">
          <span class="text-purple-500 text-lg">ğŸ’¡</span>
          <span class="text-xs">å–„ç”¨400è¬è‡ªç”¨ä½å®…å…ç¨…é¡</span>
        </div>
        <div class="flex items-start space-x-2 p-2 bg-orange-50 rounded-lg">
          <span class="text-orange-500 text-lg">ğŸ’¡</span>
          <span class="text-xs">å¤«å¦»å¯å–„ç”¨æ¯äººæ¯å¹´220è¬è´ˆèˆ‡å…ç¨…é¡</span>
        </div>
      </div>
    </section>

    <!-- æˆ¿åœ°åˆä¸€ç¨…2.0èªªæ˜ -->
    <section class="glass-card p-5 fade-in">
      <h3 class="section-title">
        <span class="text-2xl">ğŸ“š</span>
        <span>æˆ¿åœ°åˆä¸€ç¨…2.0èªªæ˜</span>
      </h3>
      <div class="space-y-2">
        <div class="p-3 bg-red-100 rounded-lg border-l-4 border-red-500">
          <h4 class="font-semibold text-red-800 text-sm">æŒæœ‰1å¹´å…§</h4>
          <p class="text-red-700 text-base font-bold">ç¨…ç‡ 45%</p>
        </div>
        <div class="p-3 bg-orange-100 rounded-lg border-l-4 border-orange-500">
          <h4 class="font-semibold text-orange-800 text-sm">æŒæœ‰1-2å¹´</h4>
          <p class="text-orange-700 text-base font-bold">ç¨…ç‡ 35%</p>
        </div>
        <div class="p-3 bg-yellow-100 rounded-lg border-l-4 border-yellow-500">
          <h4 class="font-semibold text-yellow-800 text-sm">æŒæœ‰2-5å¹´</h4>
          <p class="text-yellow-700 text-base font-bold">ç¨…ç‡ 20%</p>
        </div>
        <div class="p-3 bg-green-100 rounded-lg border-l-4 border-green-500">
          <h4 class="font-semibold text-green-800 text-sm">æŒæœ‰5-10å¹´</h4>
          <p class="text-green-700 text-base font-bold">ç¨…ç‡ 15%</p>
        </div>
        <div class="p-3 bg-blue-100 rounded-lg border-l-4 border-blue-500">
          <h4 class="font-semibold text-blue-800 text-sm">æŒæœ‰10å¹´ä»¥ä¸Š</h4>
          <p class="text-blue-700 text-base font-bold">ç¨…ç‡ 15%</p>
        </div>
      </div>
    </section>

    <!-- å¿«é€Ÿåƒè€ƒ -->
    <section class="glass-card p-5 fade-in">
      <h3 class="section-title">
        <span class="text-2xl">âš¡</span>
        <span>å¿«é€Ÿåƒè€ƒ</span>
      </h3>
      <div class="space-y-2">
        <div class="text-center p-3 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg">
          <div class="text-xl font-bold text-blue-600">3%</div>
          <div class="text-xs text-gray-600">å¥‘ç¨…è²»ç‡</div>
        </div>
        <div class="text-center p-3 bg-gradient-to-r from-green-50 to-blue-50 rounded-lg">
          <div class="text-xl font-bold text-green-600">400è¬</div>
          <div class="text-xs text-gray-600">è‡ªç”¨ä½å®…å…ç¨…é¡</div>
        </div>
        <div class="text-center p-3 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg">
          <div class="text-xl font-bold text-purple-600">2%</div>
          <div class="text-xs text-gray-600">ä»²ä»‹è²»ç‡</div>
        </div>
      </div>
    </section>
  </div>
</main>

<script>
// ä¸»é¡Œåˆ‡æ›
document.getElementById('themeToggle').addEventListener('click', () => {
  document.body.classList.toggle('dark');
  const isDark = document.body.classList.contains('dark');
  document.getElementById('themeToggle').textContent = isDark ? 'ğŸŒ™' : 'ğŸŒ';
});

// è¨ˆç®—ç¨…è²»
function calculateTaxes() {
  const housePrice = parseFloat(document.getElementById('housePrice').value) * 10000;
  const houseType = document.getElementById('houseType').value;
  const holdYears = parseInt(document.getElementById('holdYears').value);
  const houseUsage = document.getElementById('houseUsage').value;
  const costPrice = parseFloat(document.getElementById('costPrice').value) * 10000;
  const landArea = parseFloat(document.getElementById('landArea').value) || 25;
  const buildingArea = parseFloat(document.getElementById('buildingArea').value) || 35;
  const firstTimeBuyer = document.getElementById('firstTimeBuyer').value;

  if (!housePrice || !costPrice) return;

  // è²·æ–¹ç¨…è²»
  const deedTax = Math.round(housePrice * 0.03); // å¥‘ç¨…ç´„3%
  const stampTax = Math.round(housePrice * 0.001); // å°èŠ±ç¨…0.1%
  const registrationFee = Math.round(housePrice * 0.002); // ç™»è¨˜è¦è²»0.2%
  const bankFee = 8000; // éŠ€è¡Œè²»ç”¨å›ºå®š
  const notaryFee = 15000; // ä»£æ›¸è²»å›ºå®š
  const buyerAgentFee = Math.round(housePrice * 0.02); // è²·æ–¹ä»²ä»‹è²»2%
  const guaranteeFee = 5000; // å±¥ç´„ä¿è­‰è²»å›ºå®š
  const insuranceFee = Math.round(buildingArea * 100); // ç«éšªåœ°éœ‡éšªæŒ‰åªæ•¸è¨ˆç®—

  // æˆ¿åœ°åˆä¸€ç¨…2.0è¨ˆç®—
  const profit = housePrice - costPrice; // äº¤æ˜“æ‰€å¾—
  let unifiedTax = 0;
  let taxRate = 0;
  let taxDesc = '';

  if (profit > 0) {
    if (holdYears === 1) {
      taxRate = 0.45;
      taxDesc = 'æŒæœ‰1å¹´å…§ç¨…ç‡45%';
    } else if (holdYears === 2) {
      taxRate = 0.35;
      taxDesc = 'æŒæœ‰1-2å¹´ç¨…ç‡35%';
    } else if (holdYears === 5) {
      taxRate = 0.20;
      taxDesc = 'æŒæœ‰2-5å¹´ç¨…ç‡20%';
    } else if (holdYears === 10) {
      if (houseUsage === 'self') {
        // è‡ªç”¨ä½å®…400è¬å…ç¨…é¡
        const taxableProfit = Math.max(0, profit - 4000000);
        unifiedTax = Math.round(taxableProfit * 0.15);
        taxDesc = 'æŒæœ‰5-10å¹´ç¨…ç‡15% (è‡ªç”¨ä½å®…400è¬å…ç¨…é¡)';
      } else {
        unifiedTax = Math.round(profit * 0.15);
        taxDesc = 'æŒæœ‰5-10å¹´ç¨…ç‡15%';
      }
    } else if (holdYears === 20) {
      if (houseUsage === 'self') {
        // è‡ªç”¨ä½å®…400è¬å…ç¨…é¡
        const taxableProfit = Math.max(0, profit - 4000000);
        unifiedTax = Math.round(taxableProfit * 0.15);
        taxDesc = 'æŒæœ‰10å¹´ä»¥ä¸Šç¨…ç‡15% (è‡ªç”¨ä½å®…400è¬å…ç¨…é¡)';
      } else {
        unifiedTax = Math.round(profit * 0.15);
        taxDesc = 'æŒæœ‰10å¹´ä»¥ä¸Šç¨…ç‡15%';
      }
    }

    // å¦‚æœä¸æ˜¯é•·æœŸæŒæœ‰ï¼Œç›´æ¥è¨ˆç®—
    if (holdYears < 10) {
      unifiedTax = Math.round(profit * taxRate);
    }
  }

  // è³£æ–¹ç¨…è²»
  const landTax = Math.round(housePrice * 0.02); // åœŸåœ°å¢å€¼ç¨…ç´„2%
  const sellerAgentFee = Math.round(housePrice * 0.04); // è³£æ–¹ä»²ä»‹è²»4%
  const houseTax = Math.round(buildingArea * 200); // æˆ¿å±‹ç¨…æŒ‰åªæ•¸è¨ˆç®—
  const landValueTax = Math.round(landArea * 150); // åœ°åƒ¹ç¨…æŒ‰åªæ•¸è¨ˆç®—
  const repairFee = 10000; // ä¿®ç¹•è²»å›ºå®š

  // æ›´æ–°é¡¯ç¤º
  document.getElementById('deedTax').textContent = `NT$ ${deedTax.toLocaleString()}`;
  document.getElementById('stampTax').textContent = `NT$ ${stampTax.toLocaleString()}`;
  document.getElementById('registrationFee').textContent = `NT$ ${registrationFee.toLocaleString()}`;
  document.getElementById('bankFee').textContent = `NT$ ${bankFee.toLocaleString()}`;
  document.getElementById('notaryFee').textContent = `NT$ ${notaryFee.toLocaleString()}`;
  document.getElementById('buyerAgentFee').textContent = `NT$ ${buyerAgentFee.toLocaleString()}`;
  document.getElementById('guaranteeFee').textContent = `NT$ ${guaranteeFee.toLocaleString()}`;
  document.getElementById('insuranceFee').textContent = `NT$ ${insuranceFee.toLocaleString()}`;
  
  document.getElementById('unifiedTax').textContent = `NT$ ${unifiedTax.toLocaleString()}`;
  document.getElementById('unifiedTaxDesc').textContent = taxDesc || 'ä¾æŒæœ‰å¹´é™è¨ˆç®—';
  document.getElementById('landTax').textContent = `NT$ ${landTax.toLocaleString()}`;
  document.getElementById('sellerAgentFee').textContent = `NT$ ${sellerAgentFee.toLocaleString()}`;
  document.getElementById('houseTax').textContent = `NT$ ${houseTax.toLocaleString()}`;
  document.getElementById('landValueTax').textContent = `NT$ ${landValueTax.toLocaleString()}`;
  document.getElementById('repairFee').textContent = `NT$ ${repairFee.toLocaleString()}`;

  // è¨ˆç®—ç¸½è¨ˆ
  const buyerTotal = deedTax + stampTax + registrationFee + bankFee + notaryFee + buyerAgentFee + guaranteeFee + insuranceFee;
  const sellerTotal = unifiedTax + landTax + sellerAgentFee + houseTax + landValueTax + repairFee;
  const totalTax = buyerTotal + sellerTotal;

  document.getElementById('buyerTotal').textContent = `NT$ ${buyerTotal.toLocaleString()}`;
  document.getElementById('sellerTotal').textContent = `NT$ ${sellerTotal.toLocaleString()}`;
  document.getElementById('totalTax').textContent = `NT$ ${totalTax.toLocaleString()}`;
}

// ç›£è½è®ŠåŒ–
document.querySelectorAll('input, select').forEach(element => {
  element.addEventListener('input', calculateTaxes);
});

// åˆå§‹è¨ˆç®—
calculateTaxes();
</script>
</body>
</html>
