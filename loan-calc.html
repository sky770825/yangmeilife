<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>房貸試算 - 濬瑒房產生活平台</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
:root{
  --grad:linear-gradient(135deg,#6366f1,#8b5cf6);
  --glass-bg:rgba(255,255,255,0.6);
  --glass-dark:rgba(30,30,30,0.6);
  --shadow-light:0 4px 12px rgba(0,0,0,.1);
  --shadow-hover:0 6px 16px rgba(0,0,0,.15);
  --border-radius:1rem;
  --transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

body{
  background:linear-gradient(to bottom,#f0f4ff,#fff);
  transition:var(--transition);
  font-family:system-ui,-apple-system,sans-serif;
  line-height:1.6;
}

.glass-card{
  background:var(--glass-bg);
  backdrop-filter:blur(10px);
  border-radius:var(--border-radius);
  border:1px solid rgba(255,255,255,0.2);
}

.calc-input{
  background:rgba(255,255,255,0.8);
  border:2px solid #e5e7eb;
  border-radius:0.5rem;
  padding:0.75rem;
  transition:var(--transition);
}

.calc-input:focus{
  outline:none;
  border-color:#6366f1;
  box-shadow:0 0 0 3px rgba(99,102,241,0.1);
}

.result-card{
  background:linear-gradient(135deg,#6366f1,#8b5cf6);
  color:white;
  border-radius:var(--border-radius);
  padding:1.5rem;
  text-align:center;
}

#themeToggle{
  position:fixed;
  top:1rem;
  right:1rem;
  background:var(--grad);
  color:#fff;
  border:none;
  padding:.5rem .75rem;
  border-radius:9999px;
  z-index:50;
  transition:var(--transition);
  cursor:pointer;
  font-size:1.2rem;
}
</style>
</head>
<body>
<!-- 主題切換 -->
<button id="themeToggle" aria-label="切換主題模式">🌞</button>

<!-- 返回按鈕 -->
<button onclick="history.back()" class="fixed top-4 left-4 bg-white shadow-lg rounded-full p-3 z-50 hover:scale-105 transition">
  ←
</button>

<!-- 標題區 -->
<header class="text-center py-8" style="background:var(--grad);color:white;">
  <h1 class="text-3xl font-bold">💰 房貸試算工具</h1>
  <p class="text-sm opacity-90 mt-2">精準計算您的房貸月付金額</p>
</header>

<main class="px-4 py-6 space-y-6">
  <!-- 試算表單 -->
  <section class="glass-card p-6 shadow-lg">
    <h2 class="text-xl font-bold mb-4">📊 貸款資訊</h2>
    <div class="space-y-4">
      <div>
        <label class="block text-sm font-medium mb-2">房屋總價 (萬元)</label>
        <input type="number" id="housePrice" class="calc-input w-full" placeholder="例如：1500" value="1500">
      </div>
      <div>
        <label class="block text-sm font-medium mb-2">自備款 (萬元)</label>
        <input type="number" id="downPayment" class="calc-input w-full" placeholder="例如：300" value="300">
      </div>
      <div>
        <label class="block text-sm font-medium mb-2">貸款年限 (年)</label>
        <select id="loanTerm" class="calc-input w-full">
          <option value="20">20年</option>
          <option value="30" selected>30年</option>
          <option value="40">40年</option>
        </select>
      </div>
      <div>
        <label class="block text-sm font-medium mb-2">利率 (%)</label>
        <input type="number" id="interestRate" class="calc-input w-full" placeholder="例如：2.0" value="2.0" step="0.1">
      </div>
      <button onclick="calculateLoan()" class="w-full bg-indigo-500 text-white py-3 rounded-lg font-semibold hover:bg-indigo-600 transition">
        🧮 開始試算
      </button>
    </div>
  </section>

  <!-- 試算結果 -->
  <section id="resultSection" class="result-card" style="display:none;">
    <h3 class="text-xl font-bold mb-4">📈 試算結果</h3>
    <div class="grid grid-cols-2 gap-4 text-center">
      <div>
        <div class="text-2xl font-bold" id="monthlyPayment">0</div>
        <div class="text-sm opacity-80">月付金額 (元)</div>
      </div>
      <div>
        <div class="text-2xl font-bold" id="totalInterest">0</div>
        <div class="text-sm opacity-80">總利息 (元)</div>
      </div>
      <div>
        <div class="text-2xl font-bold" id="loanAmount">0</div>
        <div class="text-sm opacity-80">貸款金額 (元)</div>
      </div>
      <div>
        <div class="text-2xl font-bold" id="totalPayment">0</div>
        <div class="text-sm opacity-80">總還款 (元)</div>
      </div>
    </div>
  </section>

  <!-- 利率參考 -->
  <section class="glass-card p-6 shadow-lg">
    <h3 class="text-lg font-bold mb-4">📊 目前市場利率參考</h3>
    <div class="space-y-3">
      <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
        <span>🏦 一般房貸</span>
        <span class="font-semibold text-indigo-600">1.8% - 2.2%</span>
      </div>
      <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
        <span>🏠 青年首購</span>
        <span class="font-semibold text-green-600">1.5% - 1.8%</span>
      </div>
      <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
        <span>💼 公教人員</span>
        <span class="font-semibold text-purple-600">1.3% - 1.6%</span>
      </div>
    </div>
  </section>

  <!-- 省錢小貼士 -->
  <section class="glass-card p-6 shadow-lg">
    <h3 class="text-lg font-bold mb-4">💡 省錢小貼士</h3>
    <div class="space-y-3 text-sm">
      <div class="flex items-start space-x-3">
        <span class="text-green-500">✅</span>
        <span>提高自備款比例可降低貸款金額和利息負擔</span>
      </div>
      <div class="flex items-start space-x-3">
        <span class="text-green-500">✅</span>
        <span>選擇較短的還款年限可大幅減少總利息支出</span>
      </div>
      <div class="flex items-start space-x-3">
        <span class="text-green-500">✅</span>
        <span>定期檢視利率，適時辦理轉貸可節省利息</span>
      </div>
      <div class="flex items-start space-x-3">
        <span class="text-green-500">✅</span>
        <span>善用寬限期可減輕初期還款壓力</span>
      </div>
    </div>
  </section>
</main>

<script>
// 主題切換
document.getElementById('themeToggle').addEventListener('click', () => {
  document.body.classList.toggle('dark');
  const isDark = document.body.classList.contains('dark');
  document.getElementById('themeToggle').textContent = isDark ? '🌙' : '🌞';
});

// 房貸試算功能
function calculateLoan() {
  const housePrice = parseFloat(document.getElementById('housePrice').value) * 10000;
  const downPayment = parseFloat(document.getElementById('downPayment').value) * 10000;
  const loanTerm = parseInt(document.getElementById('loanTerm').value);
  const interestRate = parseFloat(document.getElementById('interestRate').value) / 100;

  if (!housePrice || !downPayment || !loanTerm || !interestRate) {
    alert('請填寫所有欄位');
    return;
  }

  const loanAmount = housePrice - downPayment;
  const monthlyRate = interestRate / 12;
  const totalMonths = loanTerm * 12;

  // 計算月付金額 (本息平均攤還)
  const monthlyPayment = loanAmount * (monthlyRate * Math.pow(1 + monthlyRate, totalMonths)) / 
                        (Math.pow(1 + monthlyRate, totalMonths) - 1);

  const totalPayment = monthlyPayment * totalMonths;
  const totalInterest = totalPayment - loanAmount;

  // 顯示結果
  document.getElementById('monthlyPayment').textContent = Math.round(monthlyPayment).toLocaleString();
  document.getElementById('totalInterest').textContent = Math.round(totalInterest).toLocaleString();
  document.getElementById('loanAmount').textContent = Math.round(loanAmount).toLocaleString();
  document.getElementById('totalPayment').textContent = Math.round(totalPayment).toLocaleString();

  document.getElementById('resultSection').style.display = 'block';
  document.getElementById('resultSection').scrollIntoView({ behavior: 'smooth' });
}

// 自動計算
document.querySelectorAll('input, select').forEach(element => {
  element.addEventListener('input', calculateLoan);
});
</script>
</body>
</html>
