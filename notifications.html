<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>é€šçŸ¥è¨­å®š - æ¿¬ç‘’æˆ¿ç”¢ç”Ÿæ´»å¹³å°</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
:root {
  --grad-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  --grad-success: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
}

body {
  font-family: 'Arial', sans-serif;
  background: var(--grad-primary);
  min-height: 100vh;
}

.glass {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.notification-card {
  background: rgba(255, 255, 255, 0.95);
  border-radius: 15px;
  padding: 1.5rem;
  margin-bottom: 1rem;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
}

.notification-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
}

.setting-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 0;
  border-bottom: 1px solid #f3f4f6;
}

.setting-item:last-child {
  border-bottom: none;
}

.setting-info {
  flex: 1;
}

.setting-title {
  font-weight: bold;
  color: #1f2937;
  margin-bottom: 0.25rem;
}

.setting-description {
  color: #6b7280;
  font-size: 0.9rem;
  line-height: 1.4;
}

.toggle-switch {
  position: relative;
  display: inline-block;
  width: 60px;
  height: 34px;
}

.toggle-switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.toggle-slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  transition: .4s;
  border-radius: 34px;
}

.toggle-slider:before {
  position: absolute;
  content: "";
  height: 26px;
  width: 26px;
  left: 4px;
  bottom: 4px;
  background-color: white;
  transition: .4s;
  border-radius: 50%;
}

input:checked + .toggle-slider {
  background-color: #667eea;
}

input:checked + .toggle-slider:before {
  transform: translateX(26px);
}

.time-selector {
  display: flex;
  gap: 0.5rem;
  align-items: center;
}

.time-input {
  background: rgba(255, 255, 255, 0.9);
  border: 2px solid #e5e7eb;
  border-radius: 8px;
  padding: 0.5rem;
  font-size: 0.9rem;
  width: 80px;
  text-align: center;
}

.time-input:focus {
  outline: none;
  border-color: #667eea;
}

.notification-list {
  max-height: 400px;
  overflow-y: auto;
}

.notification-item {
  background: rgba(255, 255, 255, 0.9);
  border-radius: 10px;
  padding: 1rem;
  margin-bottom: 0.5rem;
  border-left: 4px solid #667eea;
  transition: all 0.3s ease;
}

.notification-item.unread {
  border-left-color: #ef4444;
  background: rgba(239, 68, 68, 0.05);
}

.notification-item-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 0.5rem;
}

.notification-item-title {
  font-weight: bold;
  color: #1f2937;
}

.notification-item-time {
  color: #6b7280;
  font-size: 0.8rem;
}

.notification-item-message {
  color: #4b5563;
  line-height: 1.4;
  font-size: 0.9rem;
}

.status-card {
  background: rgba(255, 255, 255, 0.95);
  border-radius: 15px;
  padding: 1.5rem;
  margin-bottom: 1rem;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
  text-center;
}

.status-icon {
  font-size: 3rem;
  margin-bottom: 1rem;
}

.status-title {
  font-size: 1.2rem;
  font-weight: bold;
  color: #1f2937;
  margin-bottom: 0.5rem;
}

.status-description {
  color: #6b7280;
  margin-bottom: 1rem;
}

.status-button {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  border-radius: 8px;
  padding: 0.75rem 1.5rem;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
}

.status-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
}

.status-button:disabled {
  background: #9ca3af;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

#themeToggle {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 1000;
  background: var(--grad-primary);
  border: none;
  border-radius: 50%;
  width: 50px;
  height: 50px;
  color: white;
  font-size: 1.2rem;
  cursor: pointer;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
  transition: all 0.3s ease;
}

#themeToggle:hover {
  transform: scale(1.1);
}

.back-btn {
  position: fixed;
  top: 20px;
  left: 20px;
  z-index: 1000;
  background: rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 50%;
  width: 50px;
  height: 50px;
  color: white;
  font-size: 1.2rem;
  cursor: pointer;
  transition: all 0.3s ease;
}

.back-btn:hover {
  background: rgba(255, 255, 255, 0.3);
  transform: scale(1.1);
}

.dark {
  --grad-primary: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
}

.dark .notification-card,
.dark .status-card,
.dark .notification-item {
  background: rgba(30, 30, 30, 0.95);
  color: white;
}

.dark .setting-title,
.dark .status-title,
.dark .notification-item-title {
  color: #f9fafb;
}

.dark .setting-item {
  border-bottom-color: #4b5563;
}

.dark .time-input {
  background: rgba(55, 65, 81, 0.5);
  border-color: #4b5563;
  color: white;
}

.dark .time-input:focus {
  border-color: #818cf8;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

.fade-in {
  animation: fadeIn 0.3s ease-out;
}
</style>
</head>
<body>
<!-- ä¸»é¡Œåˆ‡æ›æŒ‰éˆ• -->
<button id="themeToggle" onclick="toggleTheme()">ğŸŒ“</button>

<!-- è¿”å›æŒ‰éˆ• -->
<button class="back-btn" onclick="goBack()" title="è¿”å›ä¸»é ">â†</button>

<!-- é é¢æ¨™é¡Œ -->
<div class="container mx-auto px-4 py-8">
  <div class="text-center mb-8">
    <h1 class="text-4xl md:text-6xl font-bold text-white mb-4">ğŸ”” é€šçŸ¥è¨­å®š</h1>
    <p class="text-xl text-white opacity-90">ç®¡ç†æ‚¨çš„é€šçŸ¥åå¥½è¨­å®š</p>
  </div>

  <!-- é€šçŸ¥ç‹€æ…‹ -->
  <div class="status-card mb-8">
    <div class="status-icon" id="statusIcon">ğŸ””</div>
    <div class="status-title" id="statusTitle">æª¢æŸ¥é€šçŸ¥æ¬Šé™</div>
    <div class="status-description" id="statusDescription">
      é»æ“Šä¸‹æ–¹æŒ‰éˆ•é–‹å•Ÿæ¨æ’­é€šçŸ¥ï¼Œå³æ™‚æ¥æ”¶é‡è¦è¨Šæ¯
    </div>
    <button class="status-button" id="permissionButton" onclick="togglePermission()">
      é–‹å•Ÿé€šçŸ¥æ¬Šé™
    </button>
  </div>

  <!-- æ¨æ’­é€šçŸ¥è¨­å®š -->
  <div class="notification-card mb-8">
    <h2 class="text-xl font-bold mb-4 flex items-center">
      <span class="text-2xl mr-2">ğŸ“±</span>
      æ¨æ’­é€šçŸ¥è¨­å®š
    </h2>
    <div class="space-y-4">
      <div class="setting-item">
        <div class="setting-info">
          <div class="setting-title">åƒåœ¾è»Šæé†’</div>
          <div class="setting-description">æé†’æ‚¨å€’åƒåœ¾çš„æ™‚é–“</div>
        </div>
        <label class="toggle-switch">
          <input type="checkbox" id="garbageNotification" checked>
          <span class="toggle-slider"></span>
        </label>
      </div>
      <div class="setting-item">
        <div class="setting-info">
          <div class="setting-title">å¤©æ°£æé†’</div>
          <div class="setting-description">æ¯æ—¥å¤©æ°£è³‡è¨Šæé†’</div>
        </div>
        <label class="toggle-switch">
          <input type="checkbox" id="weatherNotification" checked>
          <span class="toggle-slider"></span>
        </label>
      </div>
      <div class="setting-item">
        <div class="setting-info">
          <div class="setting-title">åˆ©ç‡è®Šå‹•</div>
          <div class="setting-description">æˆ¿è²¸åˆ©ç‡è®Šå‹•é€šçŸ¥</div>
        </div>
        <label class="toggle-switch">
          <input type="checkbox" id="rateNotification" checked>
          <span class="toggle-slider"></span>
        </label>
      </div>
      <div class="setting-item">
        <div class="setting-info">
          <div class="setting-title">æˆ¿ç”¢è³‡è¨Š</div>
          <div class="setting-description">æ–°ç‰©ä»¶ä¸Šæ¶å’Œåƒ¹æ ¼è®Šå‹•é€šçŸ¥</div>
        </div>
        <label class="toggle-switch">
          <input type="checkbox" id="propertyNotification" checked>
          <span class="toggle-slider"></span>
        </label>
      </div>
      <div class="setting-item">
        <div class="setting-info">
          <div class="setting-title">è£œåŠ©è³‡è¨Š</div>
          <div class="setting-description">æ”¿åºœè£œåŠ©ç”³è«‹æˆªæ­¢æé†’</div>
        </div>
        <label class="toggle-switch">
          <input type="checkbox" id="subsidyNotification" checked>
          <span class="toggle-slider"></span>
        </label>
      </div>
    </div>
  </div>

  <!-- æé†’æ™‚é–“è¨­å®š -->
  <div class="notification-card mb-8">
    <h2 class="text-xl font-bold mb-4 flex items-center">
      <span class="text-2xl mr-2">â°</span>
      æé†’æ™‚é–“è¨­å®š
    </h2>
    <div class="space-y-4">
      <div class="setting-item">
        <div class="setting-info">
          <div class="setting-title">åƒåœ¾è»Šæé†’æ™‚é–“</div>
          <div class="setting-description">è¨­å®šåƒåœ¾è»Šæé†’çš„æ™‚é–“</div>
        </div>
        <div class="time-selector">
          <input type="time" class="time-input" id="garbageTime" value="19:30">
          <span class="text-sm text-gray-600 dark:text-gray-400">å‰30åˆ†é˜æé†’</span>
        </div>
      </div>
      <div class="setting-item">
        <div class="setting-info">
          <div class="setting-title">å¤©æ°£æé†’æ™‚é–“</div>
          <div class="setting-description">æ¯æ—¥å¤©æ°£æé†’çš„æ™‚é–“</div>
        </div>
        <div class="time-selector">
          <input type="time" class="time-input" id="weatherTime" value="08:00">
          <span class="text-sm text-gray-600 dark:text-gray-400">æ¯æ—¥æé†’</span>
        </div>
      </div>
      <div class="setting-item">
        <div class="setting-info">
          <div class="setting-title">åˆ©ç‡æé†’æ™‚é–“</div>
          <div class="setting-description">åˆ©ç‡è³‡è¨Šæé†’çš„æ™‚é–“</div>
        </div>
        <div class="time-selector">
          <input type="time" class="time-input" id="rateTime" value="09:00">
          <span class="text-sm text-gray-600 dark:text-gray-400">æ¯é€±ä¸€æé†’</span>
        </div>
      </div>
    </div>
  </div>

  <!-- é€šçŸ¥åå¥½è¨­å®š -->
  <div class="notification-card mb-8">
    <h2 class="text-xl font-bold mb-4 flex items-center">
      <span class="text-2xl mr-2">ğŸ¯</span>
      é€šçŸ¥åå¥½è¨­å®š
    </h2>
    <div class="space-y-4">
      <div class="setting-item">
        <div class="setting-info">
          <div class="setting-title">éœéŸ³æ¨¡å¼</div>
          <div class="setting-description">é—œé–‰é€šçŸ¥è²éŸ³ï¼Œåƒ…é¡¯ç¤ºè¦–è¦ºæé†’</div>
        </div>
        <label class="toggle-switch">
          <input type="checkbox" id="silentMode">
          <span class="toggle-slider"></span>
        </label>
      </div>
      <div class="setting-item">
        <div class="setting-info">
          <div class="setting-title">å…æ‰“æ“¾æ™‚æ®µ</div>
          <div class="setting-description">è¨­å®šå…æ‰“æ“¾çš„æ™‚é–“æ®µ</div>
        </div>
        <label class="toggle-switch">
          <input type="checkbox" id="doNotDisturb" checked>
          <span class="toggle-slider"></span>
        </label>
      </div>
      <div class="setting-item" id="doNotDisturbTime" style="display: none;">
        <div class="setting-info">
          <div class="setting-title">å…æ‰“æ“¾æ™‚é–“</div>
          <div class="setting-description">22:00 - 08:00</div>
        </div>
        <div class="time-selector">
          <input type="time" class="time-input" id="dndStartTime" value="22:00">
          <span class="text-sm text-gray-600 dark:text-gray-400">è‡³</span>
          <input type="time" class="time-input" id="dndEndTime" value="08:00">
        </div>
      </div>
    </div>
  </div>

  <!-- æœ€è¿‘é€šçŸ¥ -->
  <div class="notification-card mb-8">
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-xl font-bold flex items-center">
        <span class="text-2xl mr-2">ğŸ“‹</span>
        æœ€è¿‘é€šçŸ¥
      </h2>
      <button onclick="clearAllNotifications()" class="text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200">
        æ¸…é™¤å…¨éƒ¨
      </button>
    </div>
    <div class="notification-list" id="notificationList">
      <!-- é€šçŸ¥é …ç›®å°‡ç”± JavaScript å‹•æ…‹ç”Ÿæˆ -->
    </div>
  </div>

  <!-- æ¸¬è©¦é€šçŸ¥ -->
  <div class="notification-card mb-8">
    <h2 class="text-xl font-bold mb-4 flex items-center">
      <span class="text-2xl mr-2">ğŸ§ª</span>
      æ¸¬è©¦é€šçŸ¥
    </h2>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <button onclick="testNotification('garbage')" class="status-button">
        ğŸ—‘ï¸ æ¸¬è©¦åƒåœ¾è»Šæé†’
      </button>
      <button onclick="testNotification('weather')" class="status-button">
        ğŸŒ¤ï¸ æ¸¬è©¦å¤©æ°£æé†’
      </button>
      <button onclick="testNotification('rate')" class="status-button">
        ğŸ“ˆ æ¸¬è©¦åˆ©ç‡æé†’
      </button>
      <button onclick="testNotification('property')" class="status-button">
        ğŸ  æ¸¬è©¦æˆ¿ç”¢æé†’
      </button>
    </div>
  </div>

  <!-- è¯çµ¡è³‡è¨Š -->
  <div class="glass rounded-2xl p-6 text-center">
    <h3 class="text-xl font-bold text-white mb-4">ğŸ“ é€šçŸ¥æœå‹™æ”¯æ´</h3>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-white">
      <div>
        <div class="text-2xl mb-2">ğŸ“±</div>
        <div class="font-bold">æŠ€è¡“æ”¯æ´</div>
        <div class="text-sm opacity-90">0925-666-597</div>
      </div>
      <div>
        <div class="text-2xl mb-2">ğŸ“§</div>
        <div class="font-bold">æœå‹™ä¿¡ç®±</div>
        <div class="text-sm opacity-90">support@realtor.com</div>
      </div>
      <div>
        <div class="text-2xl mb-2">ğŸ•’</div>
        <div class="font-bold">æœå‹™æ™‚é–“</div>
        <div class="text-sm opacity-90">é€±ä¸€è‡³é€±äº” 9:00-18:00</div>
      </div>
    </div>
  </div>
</div>

<script src="notification-system.js"></script>
<script>
// ä¸»é¡Œåˆ‡æ›
function toggleTheme() {
  document.body.classList.toggle('dark');
  localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
}

// è¼‰å…¥ä¸»é¡Œ
function loadTheme() {
  const savedTheme = localStorage.getItem('theme');
  if (savedTheme === 'dark') {
    document.body.classList.add('dark');
  }
}

// è¿”å›ä¸»é 
function goBack() {
  window.location.href = 'ä¸»é .html';
}

// åˆ‡æ›é€šçŸ¥æ¬Šé™
async function togglePermission() {
  const button = document.getElementById('permissionButton');
  const statusIcon = document.getElementById('statusIcon');
  const statusTitle = document.getElementById('statusTitle');
  const statusDescription = document.getElementById('statusDescription');

  if (notificationSystem.permission === 'granted') {
    // å·²é–‹å•Ÿï¼Œé¡¯ç¤ºç‹€æ…‹
    statusIcon.textContent = 'âœ…';
    statusTitle.textContent = 'é€šçŸ¥æ¬Šé™å·²é–‹å•Ÿ';
    statusDescription.textContent = 'æ‚¨å°‡æ”¶åˆ°é‡è¦çš„æ¨æ’­é€šçŸ¥';
    button.textContent = 'æ¬Šé™å·²é–‹å•Ÿ';
    button.disabled = true;
  } else {
    // è«‹æ±‚æ¬Šé™
    button.textContent = 'æ­£åœ¨è«‹æ±‚æ¬Šé™...';
    button.disabled = true;
    
    const granted = await notificationSystem.requestPermission();
    
    if (granted) {
      statusIcon.textContent = 'âœ…';
      statusTitle.textContent = 'é€šçŸ¥æ¬Šé™å·²é–‹å•Ÿ';
      statusDescription.textContent = 'æ‚¨å°‡æ”¶åˆ°é‡è¦çš„æ¨æ’­é€šçŸ¥';
      button.textContent = 'æ¬Šé™å·²é–‹å•Ÿ';
    } else {
      statusIcon.textContent = 'âŒ';
      statusTitle.textContent = 'é€šçŸ¥æ¬Šé™è¢«æ‹’çµ•';
      statusDescription.textContent = 'è«‹æ‰‹å‹•é–‹å•Ÿç€è¦½å™¨é€šçŸ¥æ¬Šé™';
      button.textContent = 'é‡æ–°è«‹æ±‚æ¬Šé™';
      button.disabled = false;
    }
  }
}

// æ¸¬è©¦é€šçŸ¥
function testNotification(type) {
  const notifications = {
    garbage: {
      title: 'ğŸ—‘ï¸ åƒåœ¾è»Šæé†’',
      message: 'ä»Šæ™š8é»æœ‰åƒåœ¾è»Šï¼Œè«‹è¨˜å¾—å€’åƒåœ¾ï¼',
      icon: 'ğŸ—‘ï¸'
    },
    weather: {
      title: 'ğŸŒ¤ï¸ ä»Šæ—¥å¤©æ°£',
      message: 'ä»Šå¤©å¤šé›²æ™‚æ™´ï¼Œæ°£æº«24-28Â°Cï¼Œé©åˆå¤–å‡ºçœ‹æˆ¿ï¼',
      icon: 'ğŸŒ¤ï¸'
    },
    rate: {
      title: 'ğŸ“ˆ åˆ©ç‡è³‡è¨Š',
      message: 'æœ¬é€±æˆ¿è²¸åˆ©ç‡ç¶­æŒåœ¨2.85%ï¼ŒæŠ•è³‡ç’°å¢ƒè‰¯å¥½ï¼',
      icon: 'ğŸ“ˆ'
    },
    property: {
      title: 'ğŸ  æ–°ç‰©ä»¶ä¸Šæ¶',
      message: 'ä¿¡ç¾©å€ç²¾è¯åœ°æ®µï¼Œ2æˆ¿2å»³ï¼Œç¸½åƒ¹1,200è¬ï¼Œæ¶æ‰‹ç‰©ä»¶ï¼',
      icon: 'ğŸ '
    }
  };

  const notification = notifications[type];
  if (notification) {
    notificationSystem.addNotification(notification);
    notificationSystem.sendNotification(notification.title, {
      body: notification.message,
      tag: type
    });
  }
}

// æ¸…é™¤æ‰€æœ‰é€šçŸ¥
function clearAllNotifications() {
  if (confirm('ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰é€šçŸ¥å—ï¼Ÿ')) {
    notificationSystem.clearAll();
    loadNotifications();
  }
}

// è¼‰å…¥é€šçŸ¥åˆ—è¡¨
function loadNotifications() {
  const list = document.getElementById('notificationList');
  if (!list) return;

  if (notificationSystem.notifications.length === 0) {
    list.innerHTML = '<div class="text-center text-gray-500 py-8">æš«ç„¡é€šçŸ¥</div>';
    return;
  }

  list.innerHTML = notificationSystem.notifications.map(notification => `
    <div class="notification-item ${!notification.read ? 'unread' : ''}">
      <div class="notification-item-header">
        <div class="notification-item-title">${notification.title}</div>
        <div class="notification-item-time">${notificationSystem.formatTime(notification.timestamp)}</div>
      </div>
      <div class="notification-item-message">${notification.message}</div>
    </div>
  `).join('');
}

// è¨­ç½®å…æ‰“æ“¾æ™‚æ®µé¡¯ç¤º
function setupDoNotDisturbToggle() {
  const toggle = document.getElementById('doNotDisturb');
  const timeSection = document.getElementById('doNotDisturbTime');
  
  toggle.addEventListener('change', function() {
    timeSection.style.display = this.checked ? 'flex' : 'none';
  });
}

// åˆå§‹åŒ–
document.addEventListener('DOMContentLoaded', function() {
  loadTheme();
  loadNotifications();
  setupDoNotDisturbToggle();
  
  // æª¢æŸ¥é€šçŸ¥æ¬Šé™ç‹€æ…‹
  setTimeout(() => {
    if (notificationSystem.permission === 'granted') {
      togglePermission();
    }
  }, 1000);
  
  // å®šæœŸæ›´æ–°é€šçŸ¥åˆ—è¡¨
  setInterval(loadNotifications, 5000);
});
</script>
</body>
</html>
