<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å…¨åŸŸæœå°‹ - æ¿¬ç‘’æˆ¿ç”¢ç”Ÿæ´»å¹³å°</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
:root {
  --grad-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  --grad-success: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
  --grad-warning: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
}

body {
  font-family: 'Arial', sans-serif;
  background: var(--grad-primary);
  min-height: 100vh;
}

.glass {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.search-container {
  background: rgba(255, 255, 255, 0.95);
  border-radius: 15px;
  padding: 1.5rem;
  margin-bottom: 1rem;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}

.search-input {
  width: 100%;
  padding: 1rem;
  border: 2px solid #e5e7eb;
  border-radius: 25px;
  font-size: 1.1rem;
  transition: all 0.3s ease;
  background: white;
}

.search-input:focus {
  outline: none;
  border-color: #667eea;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

.search-suggestions {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  background: white;
  border-radius: 15px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
  max-height: 300px;
  overflow-y: auto;
  z-index: 1000;
  display: none;
}

.suggestion-item {
  padding: 1rem;
  border-bottom: 1px solid #f3f4f6;
  cursor: pointer;
  transition: background-color 0.2s ease;
}

.suggestion-item:hover {
  background: rgba(102, 126, 234, 0.1);
}

.suggestion-item:last-child {
  border-bottom: none;
}

.filter-section {
  background: rgba(255, 255, 255, 0.95);
  border-radius: 15px;
  padding: 1.5rem;
  margin-bottom: 1rem;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}

.filter-group {
  margin-bottom: 1.5rem;
}

.filter-label {
  display: block;
  font-weight: 600;
  margin-bottom: 0.5rem;
  color: #374151;
}

.filter-select {
  width: 100%;
  padding: 0.75rem;
  border: 2px solid #e5e7eb;
  border-radius: 8px;
  font-size: 1rem;
  background: white;
}

.filter-select:focus {
  outline: none;
  border-color: #667eea;
}

.result-item {
  background: rgba(255, 255, 255, 0.95);
  border-radius: 15px;
  padding: 1.5rem;
  margin-bottom: 1rem;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
}

.result-item:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
}

.result-type {
  display: inline-block;
  padding: 0.25rem 0.75rem;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 600;
  margin-bottom: 0.5rem;
}

.result-type.property { background: #dbeafe; color: #1e40af; }
.result-type.tool { background: #dcfce7; color: #166534; }
.result-type.service { background: #fef3c7; color: #92400e; }
.result-type.game { background: #e9d5ff; color: #7c3aed; }

.recent-search {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 10px;
  padding: 0.5rem 1rem;
  margin: 0.25rem;
  display: inline-block;
  cursor: pointer;
  transition: all 0.3s ease;
  color: white;
}

.recent-search:hover {
  background: rgba(255, 255, 255, 0.2);
  transform: scale(1.05);
}

.trending-item {
  background: rgba(255, 255, 255, 0.95);
  border-radius: 10px;
  padding: 1rem;
  margin-bottom: 0.5rem;
  display: flex;
  align-items: center;
  cursor: pointer;
  transition: all 0.3s ease;
}

.trending-item:hover {
  background: rgba(102, 126, 234, 0.1);
  transform: translateX(5px);
}

.trending-rank {
  width: 30px;
  height: 30px;
  border-radius: 50%;
  background: #667eea;
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  margin-right: 1rem;
}

.trending-rank.top3 {
  background: linear-gradient(135deg, #fbbf24, #f59e0b);
}

#themeToggle {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 1000;
  background: var(--grad-primary);
  border: none;
  border-radius: 50%;
  width: 50px;
  height: 50px;
  color: white;
  font-size: 1.2rem;
  cursor: pointer;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
  transition: all 0.3s ease;
}

#themeToggle:hover {
  transform: scale(1.1);
}

.back-btn {
  position: fixed;
  top: 20px;
  left: 20px;
  z-index: 1000;
  background: rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 50%;
  width: 50px;
  height: 50px;
  color: white;
  font-size: 1.2rem;
  cursor: pointer;
  transition: all 0.3s ease;
}

.back-btn:hover {
  background: rgba(255, 255, 255, 0.3);
  transform: scale(1.1);
}

.dark {
  --grad-primary: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
}

.dark .search-container,
.dark .filter-section,
.dark .result-item,
.dark .trending-item {
  background: rgba(30, 30, 30, 0.95);
  color: white;
}

.dark .search-input,
.dark .filter-select {
  background: rgba(55, 65, 81, 0.5);
  border-color: #4b5563;
  color: white;
}

.dark .search-suggestions {
  background: rgba(30, 30, 30, 0.95);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.dark .suggestion-item {
  border-color: rgba(255, 255, 255, 0.1);
  color: white;
}

.dark .filter-label {
  color: #d1d5db;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

.fade-in {
  animation: fadeIn 0.3s ease-out;
}
</style>
</head>
<body>
<!-- ä¸»é¡Œåˆ‡æ›æŒ‰éˆ• -->
<button id="themeToggle" onclick="toggleTheme()">ğŸŒ“</button>

<!-- è¿”å›æŒ‰éˆ• -->
<button class="back-btn" onclick="goBack()" title="è¿”å›ä¸»é ">â†</button>

<!-- é é¢æ¨™é¡Œ -->
<div class="container mx-auto px-4 py-8">
  <div class="text-center mb-8">
    <h1 class="text-4xl md:text-6xl font-bold text-white mb-4">ğŸ” å…¨åŸŸæœå°‹</h1>
    <p class="text-xl text-white opacity-90">å¿«é€Ÿæ‰¾åˆ°æ‚¨éœ€è¦çš„æœå‹™å’Œè³‡è¨Š</p>
  </div>

  <!-- æœå°‹æ¡† -->
  <div class="search-container relative">
    <div class="relative">
      <input 
        type="text" 
        id="searchInput" 
        class="search-input" 
        placeholder="æœå°‹æˆ¿ç”¢å·¥å…·ã€ç”Ÿæ´»æœå‹™ã€éŠæˆ²..."
        autocomplete="off"
      >
      <div class="search-suggestions" id="searchSuggestions"></div>
    </div>
    
    <!-- ç†±é–€æœå°‹ -->
    <div class="mt-4">
      <div class="text-sm font-medium text-gray-600 dark:text-gray-400 mb-2">ğŸ”¥ ç†±é–€æœå°‹</div>
      <div id="hotSearches">
        <span class="recent-search" onclick="searchKeyword('æˆ¿è²¸è©¦ç®—')">æˆ¿è²¸è©¦ç®—</span>
        <span class="recent-search" onclick="searchKeyword('å¤©æ°£')">å¤©æ°£</span>
        <span class="recent-search" onclick="searchKeyword('åƒåœ¾è»Š')">åƒåœ¾è»Š</span>
        <span class="recent-search" onclick="searchKeyword('ç™¼ç¥¨å°ç')">ç™¼ç¥¨å°ç</span>
        <span class="recent-search" onclick="searchKeyword('éŠæˆ²')">éŠæˆ²</span>
        <span class="recent-search" onclick="searchKeyword('è£æ½¢ä¼°åƒ¹')">è£æ½¢ä¼°åƒ¹</span>
      </div>
    </div>
  </div>

  <!-- ç¯©é¸å™¨ -->
  <div class="filter-section">
    <h3 class="text-lg font-bold mb-4">ğŸ¯ ç¯©é¸å™¨</h3>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <div class="filter-group">
        <label class="filter-label">é¡åˆ¥</label>
        <select class="filter-select" id="categoryFilter">
          <option value="">å…¨éƒ¨é¡åˆ¥</option>
          <option value="property">æˆ¿ç”¢å·¥å…·</option>
          <option value="life">ç”Ÿæ´»æœå‹™</option>
          <option value="game">è¶£å‘³éŠæˆ²</option>
          <option value="service">å°ˆæ¥­æœå‹™</option>
        </select>
      </div>
      <div class="filter-group">
        <label class="filter-label">åŠŸèƒ½</label>
        <select class="filter-select" id="functionFilter">
          <option value="">å…¨éƒ¨åŠŸèƒ½</option>
          <option value="calculator">è¨ˆç®—å·¥å…·</option>
          <option value="information">è³‡è¨ŠæŸ¥è©¢</option>
          <option value="entertainment">å¨›æ¨‚ä¼‘é–’</option>
          <option value="utility">å¯¦ç”¨å·¥å…·</option>
        </select>
      </div>
      <div class="filter-group">
        <label class="filter-label">æ’åº</label>
        <select class="filter-select" id="sortFilter">
          <option value="relevance">ç›¸é—œåº¦</option>
          <option value="popularity">ç†±é–€åº¦</option>
          <option value="alphabetical">å­—æ¯é †åº</option>
          <option value="recent">æœ€è¿‘æ›´æ–°</option>
        </select>
      </div>
    </div>
  </div>

  <!-- æœå°‹è¶¨å‹¢ -->
  <div class="search-container">
    <h3 class="text-lg font-bold mb-4">ğŸ“ˆ æœå°‹è¶¨å‹¢</h3>
    <div id="trendingList">
      <div class="trending-item" onclick="searchKeyword('æˆ¿è²¸è©¦ç®—')">
        <div class="trending-rank top3">1</div>
        <div>
          <div class="font-bold">æˆ¿è²¸è©¦ç®—</div>
          <div class="text-sm text-gray-600 dark:text-gray-400">ç†±é–€åº¦ 95%</div>
        </div>
      </div>
      <div class="trending-item" onclick="searchKeyword('å¤©æ°£è³‡è¨Š')">
        <div class="trending-rank top3">2</div>
        <div>
          <div class="font-bold">å¤©æ°£è³‡è¨Š</div>
          <div class="text-sm text-gray-600 dark:text-gray-400">ç†±é–€åº¦ 88%</div>
        </div>
      </div>
      <div class="trending-item" onclick="searchKeyword('è¨˜æ†¶é…å°')">
        <div class="trending-rank top3">3</div>
        <div>
          <div class="font-bold">è¨˜æ†¶é…å°</div>
          <div class="text-sm text-gray-600 dark:text-gray-400">ç†±é–€åº¦ 82%</div>
        </div>
      </div>
      <div class="trending-item" onclick="searchKeyword('åƒåœ¾è»Šæé†’')">
        <div class="trending-rank">4</div>
        <div>
          <div class="font-bold">åƒåœ¾è»Šæé†’</div>
          <div class="text-sm text-gray-600 dark:text-gray-400">ç†±é–€åº¦ 76%</div>
        </div>
      </div>
      <div class="trending-item" onclick="searchKeyword('ç™¼ç¥¨å°ç')">
        <div class="trending-rank">5</div>
        <div>
          <div class="font-bold">ç™¼ç¥¨å°ç</div>
          <div class="text-sm text-gray-600 dark:text-gray-400">ç†±é–€åº¦ 71%</div>
        </div>
      </div>
    </div>
  </div>

  <!-- æœå°‹çµæœ -->
  <div id="searchResults" class="space-y-4">
    <!-- æœå°‹çµæœå°‡åœ¨é€™è£¡é¡¯ç¤º -->
  </div>

  <!-- æ¨è–¦å…§å®¹ -->
  <div id="recommendations" class="search-container">
    <h3 class="text-lg font-bold mb-4">ğŸ’¡ æ¨è–¦å…§å®¹</h3>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div class="result-item" onclick="openTool('loan-calc.html')">
        <div class="result-type property">æˆ¿ç”¢å·¥å…·</div>
        <h4 class="font-bold text-lg mb-2">ğŸ’° æˆ¿è²¸è©¦ç®—</h4>
        <p class="text-gray-600 dark:text-gray-400 text-sm">å¿«é€Ÿè¨ˆç®—æˆ¿è²¸æœˆä»˜é‡‘é¡ï¼Œå¹«åŠ©æ‚¨è¦åŠƒè³¼å±‹é ç®—</p>
      </div>
      <div class="result-item" onclick="openTool('games.html')">
        <div class="result-type game">è¶£å‘³éŠæˆ²</div>
        <h4 class="font-bold text-lg mb-2">ğŸ® éŠæˆ²å¤§å»³</h4>
        <p class="text-gray-600 dark:text-gray-400 text-sm">å¤šç¨®å°éŠæˆ²ï¼Œæ”¾é¬†å¨›æ¨‚çš„å¥½é¸æ“‡</p>
      </div>
      <div class="result-item" onclick="openTool('weather.html')">
        <div class="result-type service">ç”Ÿæ´»æœå‹™</div>
        <h4 class="font-bold text-lg mb-2">ğŸŒ¦ å¤©æ°£è³‡è¨Š</h4>
        <p class="text-gray-600 dark:text-gray-400 text-sm">å³æ™‚å¤©æ°£é å ±ï¼Œå‡ºé–€å‰å¿…æŸ¥</p>
      </div>
      <div class="result-item" onclick="openTool('receipt.html')">
        <div class="result-type service">ç”Ÿæ´»æœå‹™</div>
        <h4 class="font-bold text-lg mb-2">ğŸ§¾ ç™¼ç¥¨å°ç</h4>
        <p class="text-gray-600 dark:text-gray-400 text-sm">çµ±ä¸€ç™¼ç¥¨å°çæŸ¥è©¢ï¼Œè¼•é¬†å°çä¸éºæ¼</p>
      </div>
    </div>
  </div>
</div>

<script>
// æœå°‹æ•¸æ“š
const searchData = [
  { title: 'æˆ¿è²¸è©¦ç®—', description: 'å¿«é€Ÿè¨ˆç®—æˆ¿è²¸æœˆä»˜é‡‘é¡', type: 'property', url: 'loan-calc.html', keywords: ['æˆ¿è²¸', 'è©¦ç®—', 'è¨ˆç®—', 'è³¼å±‹', 'è²¸æ¬¾'] },
  { title: 'è£æ½¢ä¼°åƒ¹', description: 'è£æ½¢è²»ç”¨ä¼°ç®—å·¥å…·', type: 'property', url: 'decor-calc.html', keywords: ['è£æ½¢', 'ä¼°åƒ¹', 'è£ä¿®', 'è²»ç”¨'] },
  { title: 'ç¨…è²»è©¦ç®—', description: 'æˆ¿ç”¢ç›¸é—œç¨…è²»è¨ˆç®—', type: 'property', url: 'tax-calc.html', keywords: ['ç¨…è²»', 'è©¦ç®—', 'æˆ¿ç”¢ç¨…'] },
  { title: 'å³æ™‚åˆ©ç‡', description: 'éŠ€è¡Œåˆ©ç‡è³‡è¨ŠæŸ¥è©¢', type: 'property', url: 'rate.html', keywords: ['åˆ©ç‡', 'éŠ€è¡Œ', 'æˆ¿è²¸åˆ©ç‡'] },
  { title: 'é©—å±‹æª¢æ¸¬', description: 'å°ˆæ¥­é©—å±‹æ¸…å–®å·¥å…·', type: 'service', url: 'inspection.html', keywords: ['é©—å±‹', 'æª¢æ¸¬', 'æª¢æŸ¥'] },
  { title: 'å§”è¨—å‡ºç§Ÿ', description: 'æˆ¿å±‹å§”è¨—å‡ºç§Ÿæœå‹™', type: 'service', url: 'rental-mgmt.html', keywords: ['å§”è¨—', 'å‡ºç§Ÿ', 'ç§Ÿè³ƒ'] },
  { title: 'å¤©æ°£è³‡è¨Š', description: 'å³æ™‚å¤©æ°£é å ±æŸ¥è©¢', type: 'service', url: 'weather.html', keywords: ['å¤©æ°£', 'é å ±', 'æ°£è±¡'] },
  { title: 'åƒåœ¾è»Šæé†’', description: 'åƒåœ¾è»Šæ¸…é‹æ™‚é–“æé†’', type: 'service', url: 'garbage.html', keywords: ['åƒåœ¾è»Š', 'æ¸…é‹', 'æé†’'] },
  { title: 'ç™¼ç¥¨å°ç', description: 'çµ±ä¸€ç™¼ç¥¨å°çæŸ¥è©¢', type: 'service', url: 'receipt.html', keywords: ['ç™¼ç¥¨', 'å°ç', 'çµ±ä¸€ç™¼ç¥¨'] },
  { title: 'å…¬è»Šå³æ™‚', description: 'å…¬è»Šå³æ™‚è³‡è¨ŠæŸ¥è©¢', type: 'service', url: 'bus.html', keywords: ['å…¬è»Š', 'å³æ™‚', 'äº¤é€š'] },
  { title: 'éŠæˆ²å¤§å»³', description: 'å¤šç¨®è¶£å‘³å°éŠæˆ²', type: 'game', url: 'games.html', keywords: ['éŠæˆ²', 'å¨›æ¨‚', 'å°éŠæˆ²'] },
  { title: 'è¨˜æ†¶é…å°', description: 'è¨˜æ†¶åŠ›è¨“ç·´éŠæˆ²', type: 'game', url: 'games.html', keywords: ['è¨˜æ†¶', 'é…å°', 'éŠæˆ²'] },
  { title: 'æ»‘å‹•æ¶ˆé™¤', description: 'ç›Šæ™ºæ¶ˆé™¤éŠæˆ²', type: 'game', url: 'games.html', keywords: ['æ»‘å‹•', 'æ¶ˆé™¤', 'ç›Šæ™º'] },
  { title: 'åæ‡‰æ¸¬è©¦', description: 'åæ‡‰é€Ÿåº¦æ¸¬è©¦éŠæˆ²', type: 'game', url: 'games.html', keywords: ['åæ‡‰', 'æ¸¬è©¦', 'é€Ÿåº¦'] },
  { title: 'æ•¸å­—åˆä½µ', description: '2048æ•¸å­—åˆä½µéŠæˆ²', type: 'game', url: 'games.html', keywords: ['æ•¸å­—', 'åˆä½µ', '2048'] },
  { title: 'ä»Šæ—¥é‹å‹¢', description: 'æ¯æ—¥é‹å‹¢å åœ', type: 'game', url: 'fortune.html', keywords: ['é‹å‹¢', 'å åœ', 'ä»Šæ—¥'] },
  { title: 'MBTIæ¸¬é©—', description: 'æ€§æ ¼é¡å‹æ¸¬é©—', type: 'game', url: 'mbti.html', keywords: ['MBTI', 'æ€§æ ¼', 'æ¸¬é©—'] },
  { title: 'æ¯æ—¥é‡‘å¥', description: 'æ­£èƒ½é‡èªéŒ„åˆ†äº«', type: 'game', url: 'daily-quote.html', keywords: ['é‡‘å¥', 'èªéŒ„', 'æ­£èƒ½é‡'] }
];

// ä¸»é¡Œåˆ‡æ›
function toggleTheme() {
  document.body.classList.toggle('dark');
  localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
}

// è¼‰å…¥ä¸»é¡Œ
function loadTheme() {
  const savedTheme = localStorage.getItem('theme');
  if (savedTheme === 'dark') {
    document.body.classList.add('dark');
  }
}

// è¿”å›ä¸»é 
function goBack() {
  window.location.href = 'index.html';
}

// æœå°‹é—œéµå­—
function searchKeyword(keyword) {
  document.getElementById('searchInput').value = keyword;
  performSearch(keyword);
}

// åŸ·è¡Œæœå°‹
function performSearch(query) {
  if (!query.trim()) {
    showRecommendations();
    return;
  }

  const results = searchData.filter(item => {
    return item.title.toLowerCase().includes(query.toLowerCase()) ||
           item.description.toLowerCase().includes(query.toLowerCase()) ||
           item.keywords.some(keyword => keyword.toLowerCase().includes(query.toLowerCase()));
  });

  displayResults(results, query);
}

// é¡¯ç¤ºæœå°‹çµæœ
function displayResults(results, query) {
  const resultsContainer = document.getElementById('searchResults');
  const recommendationsContainer = document.getElementById('recommendations');

  if (results.length === 0) {
    resultsContainer.innerHTML = `
      <div class="search-container text-center">
        <div class="text-4xl mb-4">ğŸ”</div>
        <h3 class="text-xl font-bold mb-2">æ‰¾ä¸åˆ°ç›¸é—œçµæœ</h3>
        <p class="text-gray-600 dark:text-gray-400">è«‹å˜—è©¦å…¶ä»–é—œéµå­—æˆ–ç€è¦½æ¨è–¦å…§å®¹</p>
      </div>
    `;
    recommendationsContainer.style.display = 'block';
  } else {
    resultsContainer.innerHTML = `
      <div class="search-container">
        <h3 class="text-lg font-bold mb-4">æœå°‹çµæœ (${results.length} é …)</h3>
        <div class="space-y-4">
          ${results.map(item => `
            <div class="result-item fade-in" onclick="openTool('${item.url}')">
              <div class="result-type ${item.type}">${getTypeLabel(item.type)}</div>
              <h4 class="font-bold text-lg mb-2">${highlightMatch(item.title, query)}</h4>
              <p class="text-gray-600 dark:text-gray-400 text-sm">${highlightMatch(item.description, query)}</p>
            </div>
          `).join('')}
        </div>
      </div>
    `;
    recommendationsContainer.style.display = 'none';
  }
}

// é«˜äº®åŒ¹é…æ–‡å­—
function highlightMatch(text, query) {
  if (!query) return text;
  const regex = new RegExp(`(${query})`, 'gi');
  return text.replace(regex, '<mark class="bg-yellow-200 dark:bg-yellow-800">$1</mark>');
}

// ç²å–é¡å‹æ¨™ç±¤
function getTypeLabel(type) {
  const labels = {
    'property': 'æˆ¿ç”¢å·¥å…·',
    'service': 'ç”Ÿæ´»æœå‹™',
    'game': 'è¶£å‘³éŠæˆ²',
    'utility': 'å¯¦ç”¨å·¥å…·'
  };
  return labels[type] || 'å…¶ä»–';
}

// é¡¯ç¤ºæ¨è–¦å…§å®¹
function showRecommendations() {
  document.getElementById('searchResults').innerHTML = '';
  document.getElementById('recommendations').style.display = 'block';
}

// é–‹å•Ÿå·¥å…·
function openTool(url) {
  if (url.startsWith('http')) {
    window.open(url, '_blank');
  } else {
    window.location.href = url;
  }
}

// æœå°‹å»ºè­°
function showSuggestions(query) {
  const suggestionsContainer = document.getElementById('searchSuggestions');
  
  if (!query.trim()) {
    suggestionsContainer.style.display = 'none';
    return;
  }

  const suggestions = searchData
    .filter(item => 
      item.title.toLowerCase().includes(query.toLowerCase()) ||
      item.keywords.some(keyword => keyword.toLowerCase().includes(query.toLowerCase()))
    )
    .slice(0, 5);

  if (suggestions.length > 0) {
    suggestionsContainer.innerHTML = suggestions.map(item => `
      <div class="suggestion-item" onclick="selectSuggestion('${item.title}')">
        <div class="font-medium">${item.title}</div>
        <div class="text-sm text-gray-600 dark:text-gray-400">${item.description}</div>
      </div>
    `).join('');
    suggestionsContainer.style.display = 'block';
  } else {
    suggestionsContainer.style.display = 'none';
  }
}

// é¸æ“‡å»ºè­°
function selectSuggestion(title) {
  document.getElementById('searchInput').value = title;
  document.getElementById('searchSuggestions').style.display = 'none';
  performSearch(title);
}

// åˆå§‹åŒ–
document.addEventListener('DOMContentLoaded', function() {
  loadTheme();
  
  // æª¢æŸ¥æ˜¯å¦æœ‰å¾ä¸»é å‚³ä¾†çš„æœå°‹é—œéµå­—
  const savedQuery = localStorage.getItem('searchQuery');
  if (savedQuery) {
    document.getElementById('searchInput').value = savedQuery;
    performSearch(savedQuery);
    localStorage.removeItem('searchQuery'); // æ¸…é™¤å·²ä½¿ç”¨çš„æŸ¥è©¢
  }
  
  const searchInput = document.getElementById('searchInput');
  
  // æœå°‹è¼¸å…¥äº‹ä»¶
  searchInput.addEventListener('input', function() {
    const query = this.value;
    showSuggestions(query);
    clearTimeout(this.searchTimeout);
    this.searchTimeout = setTimeout(() => performSearch(query), 300);
  });

  // é»æ“Šå¤–éƒ¨é—œé–‰å»ºè­°
  document.addEventListener('click', function(e) {
    if (!e.target.closest('.search-container')) {
      document.getElementById('searchSuggestions').style.display = 'none';
    }
  });

  // ç¯©é¸å™¨è®Šæ›´äº‹ä»¶
  document.getElementById('categoryFilter').addEventListener('change', applyFilters);
  document.getElementById('functionFilter').addEventListener('change', applyFilters);
  document.getElementById('sortFilter').addEventListener('change', applyFilters);
});

// æ‡‰ç”¨ç¯©é¸å™¨
function applyFilters() {
  const category = document.getElementById('categoryFilter').value;
  const functionType = document.getElementById('functionFilter').value;
  const sort = document.getElementById('sortFilter').value;
  
  let filteredResults = searchData;
  
  if (category) {
    filteredResults = filteredResults.filter(item => item.type === category);
  }
  
  // é€™è£¡å¯ä»¥æ·»åŠ æ›´å¤šç¯©é¸é‚è¼¯
  
  displayResults(filteredResults, '');
}
</script>
</body>
</html>
