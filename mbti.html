<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MBTI性格測驗 - 濬瑒房產生活平台</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root {
  --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  --accent-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
  --success-gradient: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
  --warning-gradient: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
  --glass-bg: rgba(255, 255, 255, 0.95);
  --glass-border: rgba(255, 255, 255, 0.3);
  --shadow-soft: 0 8px 32px rgba(0, 0, 0, 0.1);
  --shadow-hover: 0 12px 40px rgba(0, 0, 0, 0.15);
  --border-radius: 20px;
  --transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
  background-size: 400% 400%;
  animation: gradientShift 15s ease infinite;
  min-height: 100vh;
  line-height: 1.6;
  color: #2d3748;
}

@keyframes gradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.glass-card {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  border-radius: var(--border-radius);
  border: 1px solid var(--glass-border);
  box-shadow: var(--shadow-soft);
  transition: var(--transition);
}

.glass-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-hover);
}

.question-card {
  background: rgba(255, 255, 255, 0.98);
  border-radius: 24px;
  padding: 2rem;
  margin-bottom: 1.5rem;
  transition: var(--transition);
  border: 1px solid rgba(255, 255, 255, 0.4);
  position: relative;
  overflow: hidden;
}

.question-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: var(--primary-gradient);
}

.option-button {
  background: rgba(255, 255, 255, 0.9);
  border: 2px solid #e2e8f0;
  border-radius: 16px;
  padding: 1.5rem;
  width: 100%;
  text-align: left;
  transition: var(--transition);
  cursor: pointer;
  position: relative;
  overflow: hidden;
  backdrop-filter: blur(10px);
}

.option-button::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
  transition: left 0.5s;
}

.option-button:hover::before {
  left: 100%;
}

.option-button:hover {
  border-color: #667eea;
  background: rgba(102, 126, 234, 0.1);
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(102, 126, 234, 0.2);
}

.option-button.selected {
  border-color: #667eea;
  background: rgba(102, 126, 234, 0.15);
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
}

.option-button.selected::after {
  content: '✓';
  position: absolute;
  top: 1rem;
  right: 1rem;
  background: var(--primary-gradient);
  color: white;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: bold;
}

.result-card {
  background: var(--primary-gradient);
  color: white;
  border-radius: var(--border-radius);
  padding: 3rem 2rem;
  text-align: center;
  position: relative;
  overflow: hidden;
}

.result-card::before {
  content: '';
  position: absolute;
  top: -50%;
  right: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
  animation: rotate 20s linear infinite;
}

@keyframes rotate {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.progress-container {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 50px;
  height: 12px;
  overflow: hidden;
  position: relative;
}

.progress-fill {
  background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
  height: 100%;
  border-radius: 50px;
  transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
}

.progress-fill::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  background-image: linear-gradient(
    -45deg,
    rgba(255, 255, 255, 0.2) 25%,
    transparent 25%,
    transparent 50%,
    rgba(255, 255, 255, 0.2) 50%,
    rgba(255, 255, 255, 0.2) 75%,
    transparent 75%,
    transparent
  );
  background-size: 50px 50px;
  animation: move 2s linear infinite;
}

@keyframes move {
  0% { background-position: 0 0; }
  100% { background-position: 50px 50px; }
}

.trait-bar {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 25px;
  height: 8px;
  overflow: hidden;
  margin: 0.5rem 0;
}

.trait-fill {
  height: 100%;
  border-radius: 25px;
  transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
}

.trait-fill.e { background: linear-gradient(90deg, #ff6b6b, #ee5a24); }
.trait-fill.i { background: linear-gradient(90deg, #4834d4, #686de0); }
.trait-fill.n { background: linear-gradient(90deg, #00d2d3, #54a0ff); }
.trait-fill.s { background: linear-gradient(90deg, #5f27cd, #341f97); }
.trait-fill.f { background: linear-gradient(90deg, #ff9ff3, #f368e0); }
.trait-fill.t { background: linear-gradient(90deg, #ff6348, #ff4757); }
.trait-fill.j { background: linear-gradient(90deg, #2ed573, #1e90ff); }
.trait-fill.p { background: linear-gradient(90deg, #ffa502, #ff6348); }

#themeToggle {
  position: fixed;
  top: 1.5rem;
  right: 1.5rem;
  background: var(--primary-gradient);
  color: #fff;
  border: none;
  padding: 1rem;
  border-radius: 50%;
  z-index: 50;
  transition: var(--transition);
  cursor: pointer;
  font-size: 1.2rem;
  width: 50px;
  height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: var(--shadow-soft);
}

#themeToggle:hover {
  transform: scale(1.1);
  box-shadow: var(--shadow-hover);
}

.animate-fade-in {
  animation: fadeIn 0.6s ease-out;
}

.animate-slide-up {
  animation: slideUp 0.8s ease-out;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from { 
    opacity: 0;
    transform: translateY(30px);
  }
  to { 
    opacity: 1;
    transform: translateY(0);
  }
}

.type-icon {
  font-size: 4rem;
  margin-bottom: 1rem;
  animation: bounce 2s infinite;
}

@keyframes bounce {
  0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
  40% { transform: translateY(-10px); }
  60% { transform: translateY(-5px); }
}

.strength-item, .weakness-item, .career-item {
  padding: 0.75rem 1rem;
  margin: 0.5rem 0;
  border-radius: 12px;
  transition: var(--transition);
  position: relative;
  overflow: hidden;
}

.strength-item {
  background: linear-gradient(135deg, rgba(67, 233, 123, 0.1), rgba(56, 249, 215, 0.1));
  border-left: 4px solid #43e97b;
}

.weakness-item {
  background: linear-gradient(135deg, rgba(250, 112, 154, 0.1), rgba(254, 225, 64, 0.1));
  border-left: 4px solid #fa709a;
}

.career-item {
  background: linear-gradient(135deg, rgba(79, 172, 254, 0.1), rgba(0, 242, 254, 0.1));
  border-left: 4px solid #4facfe;
}

.pulse {
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

/* 響應式設計 */
@media (max-width: 768px) {
  .question-card {
    padding: 1.5rem;
    margin-bottom: 1rem;
  }
  
  .option-button {
    padding: 1.25rem;
  }
  
  .result-card {
    padding: 2rem 1.5rem;
  }
  
  .type-icon {
    font-size: 3rem;
  }
}
</style>
</head>
<body>
<!-- 主題切換 -->
<button id="themeToggle" aria-label="切換主題模式">
  <i class="fas fa-sun"></i>
</button>

<!-- 返回按鈕 -->
<button onclick="history.back()" class="fixed top-4 left-4 glass-card p-3 z-50 hover:scale-105 transition">
  <i class="fas fa-arrow-left text-lg"></i>
</button>

<!-- 標題區 -->
<header class="text-center py-12 relative overflow-hidden">
  <div class="absolute inset-0 bg-gradient-to-br from-purple-600/20 via-blue-600/20 to-pink-600/20"></div>
  <div class="relative z-10">
    <div class="type-icon mb-4">
      <i class="fas fa-brain"></i>
    </div>
    <h1 class="text-5xl font-bold text-white mb-4 animate-fade-in">MBTI 性格測驗</h1>
    <p class="text-xl text-white/90 mb-6 animate-slide-up">深度了解你的性格類型與潛能</p>
    <div class="flex justify-center items-center space-x-4 text-white/80">
      <div class="flex items-center">
        <i class="fas fa-clock mr-2"></i>
        <span>約 5-8 分鐘</span>
      </div>
      <div class="flex items-center">
        <i class="fas fa-users mr-2"></i>
        <span>16 種性格類型</span>
      </div>
      <div class="flex items-center">
        <i class="fas fa-chart-line mr-2"></i>
        <span>專業分析</span>
      </div>
    </div>
  </div>
</header>

<main class="px-4 py-8 max-w-4xl mx-auto space-y-8">
  <!-- 測驗進度 -->
  <section class="glass-card p-8 animate-slide-up">
    <div class="flex justify-between items-center mb-6">
      <div class="flex items-center">
        <i class="fas fa-chart-pie text-2xl text-purple-600 mr-3"></i>
        <h2 class="text-2xl font-bold">測驗進度</h2>
      </div>
      <div class="text-right">
        <span class="text-2xl font-bold text-purple-600" id="progressText">1 / 20</span>
        <div class="text-sm text-gray-500">已完成</div>
      </div>
    </div>
    <div class="progress-container">
      <div class="progress-fill" id="progressFill" style="width: 5%"></div>
    </div>
  </section>

  <!-- 測驗問題 -->
  <section id="questionSection" class="question-card animate-slide-up">
    <div class="flex items-center mb-6">
      <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full flex items-center justify-center text-white font-bold text-lg mr-4" id="questionNumber">1</div>
      <h2 class="text-2xl font-bold" id="questionTitle">性格傾向測試</h2>
    </div>
    <p class="text-xl mb-8 text-gray-700 leading-relaxed" id="questionText">在聚會中，你更傾向於：</p>
    <div class="space-y-4">
      <button class="option-button group" onclick="selectOption('E')">
        <div class="flex items-center justify-between">
          <div class="flex items-center">
            <div class="w-10 h-10 bg-gradient-to-br from-green-400 to-blue-500 rounded-full flex items-center justify-center text-white mr-4 group-hover:scale-110 transition-transform">
              <i class="fas fa-users"></i>
            </div>
            <div>
              <div class="font-semibold text-lg">與很多人交談，認識新朋友</div>
              <div class="text-sm text-gray-600">外向型 (Extraversion)</div>
            </div>
          </div>
          <i class="fas fa-chevron-right text-gray-400 group-hover:text-purple-500 transition-colors"></i>
        </div>
      </button>
      <button class="option-button group" onclick="selectOption('I')">
        <div class="flex items-center justify-between">
          <div class="flex items-center">
            <div class="w-10 h-10 bg-gradient-to-br from-purple-400 to-pink-500 rounded-full flex items-center justify-center text-white mr-4 group-hover:scale-110 transition-transform">
              <i class="fas fa-user-friends"></i>
            </div>
            <div>
              <div class="font-semibold text-lg">與少數幾個親密朋友深入交談</div>
              <div class="text-sm text-gray-600">內向型 (Introversion)</div>
            </div>
          </div>
          <i class="fas fa-chevron-right text-gray-400 group-hover:text-purple-500 transition-colors"></i>
        </div>
      </button>
    </div>
    <div class="mt-8 flex justify-between items-center">
      <button onclick="previousQuestion()" class="px-6 py-3 glass-card text-gray-600 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed hover:bg-white/50 transition-all" id="prevBtn" disabled>
        <i class="fas fa-arrow-left mr-2"></i>上一題
      </button>
      <div class="text-center">
        <div class="text-sm text-gray-500 mb-1">請選擇一個選項</div>
        <div class="w-2 h-2 bg-purple-500 rounded-full mx-auto animate-pulse"></div>
      </div>
      <button onclick="nextQuestion()" class="px-6 py-3 bg-gradient-to-r from-purple-500 to-blue-500 text-white rounded-xl disabled:opacity-50 disabled:cursor-not-allowed hover:from-purple-600 hover:to-blue-600 transition-all transform hover:scale-105" id="nextBtn" disabled>
        下一題<i class="fas fa-arrow-right ml-2"></i>
      </button>
    </div>
  </section>

  <!-- 測驗結果 -->
  <section id="resultSection" class="result-card animate-fade-in" style="display:none;">
    <div class="relative z-10">
      <div class="flex items-center justify-center mb-6">
        <i class="fas fa-star text-4xl mr-4 animate-pulse"></i>
        <h2 class="text-3xl font-bold">測驗完成！</h2>
        <i class="fas fa-star text-4xl ml-4 animate-pulse"></i>
      </div>
      
      <div class="mb-8">
        <div class="type-icon mb-4" id="typeIcon">
          <i class="fas fa-user"></i>
        </div>
        <div class="text-6xl font-bold mb-2" id="mbtiType">ENFP</div>
        <div class="text-2xl mb-4 opacity-90" id="mbtiTitle">競選者</div>
        <div class="text-lg opacity-90 max-w-2xl mx-auto leading-relaxed" id="mbtiDescription">
          你是一個充滿熱情、富有創造力的人，喜歡探索新的可能性和與他人建立深層次的聯繫。
        </div>
      </div>
      
      <!-- 性格維度分析 -->
      <div class="grid grid-cols-2 gap-6 mb-8">
        <div class="bg-white/10 backdrop-blur-sm rounded-xl p-4">
          <div class="flex items-center justify-between mb-3">
            <span class="text-sm font-semibold">外向性 vs 內向性</span>
            <span class="text-lg font-bold" id="extroversion">75%</span>
          </div>
          <div class="trait-bar">
            <div class="trait-fill e" id="extroversionBar" style="width: 75%"></div>
          </div>
        </div>
        <div class="bg-white/10 backdrop-blur-sm rounded-xl p-4">
          <div class="flex items-center justify-between mb-3">
            <span class="text-sm font-semibold">直覺性 vs 感覺性</span>
            <span class="text-lg font-bold" id="intuition">80%</span>
          </div>
          <div class="trait-bar">
            <div class="trait-fill n" id="intuitionBar" style="width: 80%"></div>
          </div>
        </div>
        <div class="bg-white/10 backdrop-blur-sm rounded-xl p-4">
          <div class="flex items-center justify-between mb-3">
            <span class="text-sm font-semibold">情感性 vs 思考性</span>
            <span class="text-lg font-bold" id="feeling">85%</span>
          </div>
          <div class="trait-bar">
            <div class="trait-fill f" id="feelingBar" style="width: 85%"></div>
          </div>
        </div>
        <div class="bg-white/10 backdrop-blur-sm rounded-xl p-4">
          <div class="flex items-center justify-between mb-3">
            <span class="text-sm font-semibold">知覺性 vs 判斷性</span>
            <span class="text-lg font-bold" id="perceiving">70%</span>
          </div>
          <div class="trait-bar">
            <div class="trait-fill p" id="perceivingBar" style="width: 70%"></div>
          </div>
        </div>
      </div>
      
      <!-- 性格類型詳細說明 -->
      <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6 mb-6">
        <h3 class="text-xl font-bold mb-4 flex items-center">
          <i class="fas fa-info-circle mr-3"></i>
          性格類型說明
        </h3>
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 text-center">
          <div class="bg-white/5 rounded-lg p-3">
            <div class="text-2xl mb-2" id="typeLetter1">E</div>
            <div class="text-sm opacity-80" id="typeDesc1">外向型</div>
          </div>
          <div class="bg-white/5 rounded-lg p-3">
            <div class="text-2xl mb-2" id="typeLetter2">N</div>
            <div class="text-sm opacity-80" id="typeDesc2">直覺型</div>
          </div>
          <div class="bg-white/5 rounded-lg p-3">
            <div class="text-2xl mb-2" id="typeLetter3">F</div>
            <div class="text-sm opacity-80" id="typeDesc3">情感型</div>
          </div>
          <div class="bg-white/5 rounded-lg p-3">
            <div class="text-2xl mb-2" id="typeLetter4">P</div>
            <div class="text-sm opacity-80" id="typeDesc4">知覺型</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 性格特質 -->
  <section id="traitsSection" class="glass-card p-8 animate-slide-up" style="display:none;">
    <h2 class="text-3xl font-bold mb-8 text-center flex items-center justify-center">
      <i class="fas fa-star text-yellow-500 mr-3"></i>
      性格特質分析
      <i class="fas fa-star text-yellow-500 ml-3"></i>
    </h2>
    
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <!-- 優點 -->
      <div class="strength-item">
        <div class="flex items-center mb-4">
          <div class="w-12 h-12 bg-gradient-to-br from-green-400 to-emerald-500 rounded-full flex items-center justify-center text-white mr-4">
            <i class="fas fa-thumbs-up"></i>
          </div>
          <h3 class="text-xl font-bold text-green-700">優勢特質</h3>
        </div>
        <ul class="space-y-3" id="strengths">
          <li class="flex items-start">
            <i class="fas fa-check-circle text-green-500 mr-3 mt-1"></i>
            <span class="text-gray-700">富有創造力和想像力</span>
          </li>
          <li class="flex items-start">
            <i class="fas fa-check-circle text-green-500 mr-3 mt-1"></i>
            <span class="text-gray-700">熱情洋溢，充滿活力</span>
          </li>
          <li class="flex items-start">
            <i class="fas fa-check-circle text-green-500 mr-3 mt-1"></i>
            <span class="text-gray-700">善於與人建立聯繫</span>
          </li>
        </ul>
      </div>
      
      <!-- 需要注意的地方 -->
      <div class="weakness-item">
        <div class="flex items-center mb-4">
          <div class="w-12 h-12 bg-gradient-to-br from-orange-400 to-red-500 rounded-full flex items-center justify-center text-white mr-4">
            <i class="fas fa-exclamation-triangle"></i>
          </div>
          <h3 class="text-xl font-bold text-orange-700">發展建議</h3>
        </div>
        <ul class="space-y-3" id="weaknesses">
          <li class="flex items-start">
            <i class="fas fa-lightbulb text-orange-500 mr-3 mt-1"></i>
            <span class="text-gray-700">有時過於理想化</span>
          </li>
          <li class="flex items-start">
            <i class="fas fa-lightbulb text-orange-500 mr-3 mt-1"></i>
            <span class="text-gray-700">可能缺乏實用性</span>
          </li>
          <li class="flex items-start">
            <i class="fas fa-lightbulb text-orange-500 mr-3 mt-1"></i>
            <span class="text-gray-700">容易分心</span>
          </li>
        </ul>
      </div>
      
      <!-- 適合的職業 -->
      <div class="career-item">
        <div class="flex items-center mb-4">
          <div class="w-12 h-12 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center text-white mr-4">
            <i class="fas fa-briefcase"></i>
          </div>
          <h3 class="text-xl font-bold text-blue-700">適合職業</h3>
        </div>
        <ul class="space-y-3" id="careers">
          <li class="flex items-start">
            <i class="fas fa-palette text-blue-500 mr-3 mt-1"></i>
            <span class="text-gray-700">藝術家、設計師</span>
          </li>
          <li class="flex items-start">
            <i class="fas fa-heart text-blue-500 mr-3 mt-1"></i>
            <span class="text-gray-700">心理諮詢師</span>
          </li>
          <li class="flex items-start">
            <i class="fas fa-chart-line text-blue-500 mr-3 mt-1"></i>
            <span class="text-gray-700">行銷專員</span>
          </li>
        </ul>
      </div>
    </div>
    
    <!-- 性格匹配度 -->
    <div class="mt-8 bg-gradient-to-r from-purple-50 to-blue-50 rounded-2xl p-6">
      <h3 class="text-xl font-bold mb-4 text-center flex items-center justify-center">
        <i class="fas fa-heart text-red-500 mr-2"></i>
        與你性格匹配的類型
      </h3>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
        <div class="bg-white/80 rounded-xl p-3">
          <div class="text-lg font-bold text-purple-600" id="matchType1">INTJ</div>
          <div class="text-sm text-gray-600">最佳匹配</div>
        </div>
        <div class="bg-white/80 rounded-xl p-3">
          <div class="text-lg font-bold text-blue-600" id="matchType2">INFJ</div>
          <div class="text-sm text-gray-600">良好匹配</div>
        </div>
        <div class="bg-white/80 rounded-xl p-3">
          <div class="text-lg font-bold text-green-600" id="matchType3">ENTP</div>
          <div class="text-sm text-gray-600">朋友關係</div>
        </div>
        <div class="bg-white/80 rounded-xl p-3">
          <div class="text-lg font-bold text-orange-600" id="matchType4">INFP</div>
          <div class="text-sm text-gray-600">互補關係</div>
        </div>
      </div>
    </div>
  </section>

  <!-- 重新測驗 -->
  <section id="retakeSection" class="glass-card p-8 text-center animate-fade-in" style="display:none;">
    <div class="max-w-md mx-auto">
      <div class="w-20 h-20 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full flex items-center justify-center text-white text-3xl mx-auto mb-6">
        <i class="fas fa-redo"></i>
      </div>
      <h2 class="text-2xl font-bold mb-4">重新測驗</h2>
      <p class="text-gray-600 mb-6 leading-relaxed">想要更深入了解自己的性格嗎？重新測驗可能會給你不同的洞察。</p>
      <div class="space-y-4">
        <button onclick="restartTest()" class="w-full bg-gradient-to-r from-purple-500 to-blue-500 text-white px-8 py-4 rounded-xl font-semibold hover:from-purple-600 hover:to-blue-600 transition-all transform hover:scale-105 shadow-lg">
          <i class="fas fa-brain mr-2"></i>重新開始測驗
        </button>
        <button onclick="shareResults()" class="w-full glass-card text-gray-600 px-8 py-4 rounded-xl font-semibold hover:bg-white/50 transition-all">
          <i class="fas fa-share-alt mr-2"></i>分享結果
        </button>
      </div>
    </div>
  </section>
</main>

<script>
// 主題切換
document.getElementById('themeToggle').addEventListener('click', () => {
  document.body.classList.toggle('dark');
  const isDark = document.body.classList.contains('dark');
  document.getElementById('themeToggle').textContent = isDark ? '🌙' : '🌞';
});

// 測驗資料 - 更專業的問題
const questions = [
  {
    question: "在社交聚會中，你更傾向於：",
    options: [
      { text: "與很多人交談，認識新朋友，享受熱鬧的氛圍", type: "E", icon: "fas fa-users" },
      { text: "與少數幾個親密朋友深入交談，避免過度刺激", type: "I", icon: "fas fa-user-friends" }
    ]
  },
  {
    question: "面對新項目時，你通常：",
    options: [
      { text: "先了解整體概念和可能性，再處理細節", type: "N", icon: "fas fa-lightbulb" },
      { text: "先收集具體事實和數據，再制定計劃", type: "S", icon: "fas fa-chart-bar" }
    ]
  },
  {
    question: "做重要決定時，你主要依賴：",
    options: [
      { text: "考慮對他人的影響和價值觀", type: "F", icon: "fas fa-heart" },
      { text: "客觀的事實分析和邏輯推理", type: "T", icon: "fas fa-brain" }
    ]
  },
  {
    question: "你的生活方式偏好：",
    options: [
      { text: "有計劃、有條理，喜歡預先安排", type: "J", icon: "fas fa-calendar-check" },
      { text: "靈活、隨性，喜歡保持開放選項", type: "P", icon: "fas fa-random" }
    ]
  },
  {
    question: "在團隊會議中，你通常：",
    options: [
      { text: "積極發言，帶動討論，享受互動過程", type: "E", icon: "fas fa-comments" },
      { text: "仔細聆聽，深思後才發言", type: "I", icon: "fas fa-ear-listen" }
    ]
  },
  {
    question: "學習新技能時，你更喜歡：",
    options: [
      { text: "探索創意應用和理論背景", type: "N", icon: "fas fa-rocket" },
      { text: "學習具體步驟和實用技巧", type: "S", icon: "fas fa-tools" }
    ]
  },
  {
    question: "評價他人的工作時，你更重視：",
    options: [
      { text: "他們的動機、努力和個人成長", type: "F", icon: "fas fa-seedling" },
      { text: "他們的效率、準確性和結果", type: "T", icon: "fas fa-trophy" }
    ]
  },
  {
    question: "處理日常工作時，你更喜歡：",
    options: [
      { text: "按既定計劃和流程執行", type: "J", icon: "fas fa-list-check" },
      { text: "根據情況靈活調整方法", type: "P", icon: "fas fa-arrows-spin" }
    ]
  },
  {
    question: "當你感到疲憊時，你更傾向於：",
    options: [
      { text: "與朋友聚會或參加活動來恢復精力", type: "E", icon: "fas fa-glass-cheers" },
      { text: "獨處休息或進行安靜的活動", type: "I", icon: "fas fa-book-open" }
    ]
  },
  {
    question: "面對複雜問題時，你習慣：",
    options: [
      { text: "從宏觀角度思考，尋找創新解決方案", type: "N", icon: "fas fa-puzzle-piece" },
      { text: "分析具體細節，尋找實用解決方案", type: "S", icon: "fas fa-microscope" }
    ]
  },
  {
    question: "在爭議中，你更關注：",
    options: [
      { text: "維護和諧關係，避免傷害他人", type: "F", icon: "fas fa-peace" },
      { text: "追求真理和公正，堅持原則", type: "T", icon: "fas fa-balance-scale" }
    ]
  },
  {
    question: "你更喜歡的工作環境：",
    options: [
      { text: "有明確規則和預期結果", type: "J", icon: "fas fa-building" },
      { text: "充滿變化和自主性", type: "P", icon: "fas fa-campground" }
    ]
  },
  {
    question: "在壓力下，你的反應是：",
    options: [
      { text: "尋求他人支持，通過交流緩解壓力", type: "E", icon: "fas fa-hands-helping" },
      { text: "獨自思考，通過內省來處理壓力", type: "I", icon: "fas fa-meditation" }
    ]
  },
  {
    question: "你更喜歡的資訊類型：",
    options: [
      { text: "抽象概念和理論框架", type: "N", icon: "fas fa-project-diagram" },
      { text: "具體事實和實際應用", type: "S", icon: "fas fa-clipboard-list" }
    ]
  },
  {
    question: "面對批評時，你更容易：",
    options: [
      { text: "關注批評的情感層面和關係影響", type: "F", icon: "fas fa-heart-broken" },
      { text: "分析批評的邏輯性和建設性", type: "T", icon: "fas fa-search" }
    ]
  },
  {
    question: "你的時間管理風格：",
    options: [
      { text: "嚴格按照時間表執行，討厭延誤", type: "J", icon: "fas fa-clock" },
      { text: "保持彈性，適應變化", type: "P", icon: "fas fa-hourglass-half" }
    ]
  },
  {
    question: "在學習新知識時，你偏好：",
    options: [
      { text: "通過討論和分享來學習", type: "E", icon: "fas fa-user-graduate" },
      { text: "通過閱讀和思考來學習", type: "I", icon: "fas fa-book-reader" }
    ]
  },
  {
    question: "你更重視的品質：",
    options: [
      { text: "創新思維和遠見", type: "N", icon: "fas fa-eye" },
      { text: "實用性和可靠性", type: "S", icon: "fas fa-shield-alt" }
    ]
  },
  {
    question: "在團隊決策中，你傾向於：",
    options: [
      { text: "考慮團隊成員的感受和需求", type: "F", icon: "fas fa-users-cog" },
      { text: "基於客觀標準做出最佳選擇", type: "T", icon: "fas fa-gavel" }
    ]
  },
  {
    question: "你更喜歡的項目類型：",
    options: [
      { text: "有明確期限和具體目標的項目", type: "J", icon: "fas fa-target" },
      { text: "開放式探索和創新的項目", type: "P", icon: "fas fa-compass" }
    ]
  }
];

// 完整的MBTI類型資料庫
const mbtiTypes = {
  'ENFP': {
    title: '競選者',
    description: '你是一個充滿熱情、富有創造力的人，喜歡探索新的可能性和與他人建立深層次的聯繫。',
    strengths: ['富有創造力和想像力', '熱情洋溢，充滿活力', '善於與人建立聯繫', '適應性強'],
    weaknesses: ['有時過於理想化', '可能缺乏實用性', '容易分心', '避免衝突'],
    careers: ['藝術家、設計師', '心理諮詢師', '行銷專員', '教師'],
    icon: 'fas fa-magic',
    matches: ['INTJ', 'INFJ', 'ENTP', 'INFP']
  },
  'ENFJ': {
    title: '主人公',
    description: '你是一個天生的領導者，關心他人，善於激勵和指導他人實現潛能。',
    strengths: ['天生的領導能力', '善於激勵他人', '具有同理心', '組織能力強'],
    weaknesses: ['過於理想化', '容易過度承擔責任', '避免衝突', '可能忽視自己的需求'],
    careers: ['教師、培訓師', '人力資源專員', '社會工作者', '政治家'],
    icon: 'fas fa-crown',
    matches: ['INFP', 'ISFP', 'ENFP', 'ENTP']
  },
  'ENTP': {
    title: '辯論家',
    description: '你是一個聰明、好奇的思想家，喜歡挑戰現狀，探索新的可能性。',
    strengths: ['創新思維', '善於辯論', '適應性強', '充滿好奇心'],
    weaknesses: ['容易感到無聊', '缺乏耐心', '可能過於挑剔', '不善於細節'],
    careers: ['企業家', '律師', '記者', '發明家'],
    icon: 'fas fa-lightbulb',
    matches: ['INFJ', 'INTJ', 'ENFP', 'ENTJ']
  },
  'ENTJ': {
    title: '指揮官',
    description: '你是一個天生的領導者，具有強烈的決心和組織能力，善於制定戰略。',
    strengths: ['天生的領導能力', '戰略思維', '決斷力強', '組織能力出色'],
    weaknesses: ['可能過於專斷', '缺乏耐心', '不善表達情感', '過於競爭'],
    careers: ['CEO、高階主管', '律師', '政治家', '投資銀行家'],
    icon: 'fas fa-chess-king',
    matches: ['INTP', 'INTJ', 'ENTP', 'ENFP']
  },
  'INFP': {
    title: '調停者',
    description: '你是一個理想主義者，重視個人價值觀，追求真實和有意義的生活。',
    strengths: ['富有同情心', '忠於價值觀', '創意思維', '善於傾聽'],
    weaknesses: ['過於理想化', '避免衝突', '可能過度敏感', '缺乏實用性'],
    careers: ['作家', '心理諮詢師', '藝術家', '社會工作者'],
    icon: 'fas fa-dove',
    matches: ['ENFJ', 'ENTJ', 'INFJ', 'ENFP']
  },
  'INFJ': {
    title: '提倡者',
    description: '你是一個神秘而富有洞察力的人，具有強烈的使命感和同理心。',
    strengths: ['富有洞察力', '具有使命感', '創意思維', '善於理解他人'],
    weaknesses: ['過於完美主義', '容易感到孤獨', '避免衝突', '可能過度理想化'],
    careers: ['心理諮詢師', '作家', '牧師', '人權工作者'],
    icon: 'fas fa-eye',
    matches: ['ENFP', 'ENTP', 'INFP', 'INTJ']
  },
  'INTP': {
    title: '思想家',
    description: '你是一個邏輯性強、獨立的思想家，喜歡探索複雜的理論和概念。',
    strengths: ['邏輯思維強', '客觀分析', '創新思維', '獨立自主'],
    weaknesses: ['不善表達情感', '可能過於挑剔', '缺乏實用性', '容易感到無聊'],
    careers: ['科學家', '工程師', '哲學家', '軟體開發者'],
    icon: 'fas fa-brain',
    matches: ['ENTJ', 'ESTJ', 'INTJ', 'ENTP']
  },
  'INTJ': {
    title: '建築師',
    description: '你是一個獨立、有策略的思想家，喜歡制定長遠計劃並堅持執行。',
    strengths: ['戰略思維', '獨立自主', '邏輯清晰', '堅持目標'],
    weaknesses: ['過於完美主義', '不善表達情感', '缺乏耐心', '過於批判'],
    careers: ['工程師', '科學家', '企業家', '顧問'],
    icon: 'fas fa-drafting-compass',
    matches: ['ENFP', 'ENTP', 'INFP', 'INFJ']
  },
  'ESFP': {
    title: '娛樂家',
    description: '你是一個充滿活力、友善的人，喜歡享受生活並與他人分享快樂。',
    strengths: ['充滿活力', '友善親切', '實用主義', '善於應變'],
    weaknesses: ['可能缺乏長期規劃', '避免衝突', '容易感到無聊', '可能過於衝動'],
    careers: ['演員', '銷售代表', '活動策劃', '旅遊業'],
    icon: 'fas fa-star',
    matches: ['ISFJ', 'ISTJ', 'ESFJ', 'ESTJ']
  },
  'ESFJ': {
    title: '執政官',
    description: '你是一個關愛他人、負責任的人，善於維護和諧的社會關係。',
    strengths: ['負責任', '善於照顧他人', '實用主義', '組織能力強'],
    weaknesses: ['可能過度關心他人看法', '避免衝突', '缺乏靈活性', '可能忽視自己的需求'],
    careers: ['護士', '教師', '人力資源', '社會工作者'],
    icon: 'fas fa-handshake',
    matches: ['ISFP', 'ISTP', 'ESFP', 'ESTP']
  },
  'ESTP': {
    title: '企業家',
    description: '你是一個充滿活力、實用主義的人，喜歡行動和即時的結果。',
    strengths: ['充滿活力', '實用主義', '善於應變', '樂觀積極'],
    weaknesses: ['可能缺乏長期規劃', '容易感到無聊', '可能過於衝動', '避免抽象思考'],
    careers: ['銷售代表', '運動員', '企業家', '緊急救援'],
    icon: 'fas fa-rocket',
    matches: ['ISFJ', 'ISTJ', 'ESFJ', 'ESTJ']
  },
  'ESTJ': {
    title: '總經理',
    description: '你是一個負責任、有組織能力的人，善於管理和執行任務。',
    strengths: ['負責任', '組織能力強', '實用主義', '決斷力強'],
    weaknesses: ['可能過於僵化', '缺乏靈活性', '可能過於專斷', '不善表達情感'],
    careers: ['管理者', '律師', '會計師', '軍官'],
    icon: 'fas fa-briefcase',
    matches: ['ISFP', 'ISTP', 'ESFP', 'ESTP']
  },
  'ISFP': {
    title: '探險家',
    description: '你是一個溫柔、靈活的人，重視個人價值觀，喜歡探索和體驗。',
    strengths: ['富有同情心', '靈活性強', '忠於價值觀', '實用主義'],
    weaknesses: ['避免衝突', '可能過度敏感', '缺乏長期規劃', '可能過於理想化'],
    careers: ['藝術家', '設計師', '攝影師', '護士'],
    icon: 'fas fa-palette',
    matches: ['ESFJ', 'ESTJ', 'ISFJ', 'ISTJ']
  },
  'ISFJ': {
    title: '守護者',
    description: '你是一個負責任、關愛他人的人，善於維護傳統和照顧他人。',
    strengths: ['負責任', '善於照顧他人', '實用主義', '忠誠可靠'],
    weaknesses: ['可能過度關心他人看法', '避免衝突', '缺乏靈活性', '可能忽視自己的需求'],
    careers: ['護士', '教師', '社工', '圖書管理員'],
    icon: 'fas fa-shield-alt',
    matches: ['ESFP', 'ESTP', 'ISFP', 'ISTP']
  },
  'ISTP': {
    title: '鑑賞家',
    description: '你是一個冷靜、實用的人，善於解決實際問題，喜歡獨立工作。',
    strengths: ['實用主義', '善於解決問題', '冷靜理性', '獨立自主'],
    weaknesses: ['不善表達情感', '可能過於冷漠', '缺乏長期規劃', '避免承諾'],
    careers: ['工程師', '機械師', '飛行員', '程式設計師'],
    icon: 'fas fa-cogs',
    matches: ['ESFJ', 'ESTJ', 'ISFJ', 'ISTJ']
  },
  'ISTJ': {
    title: '物流師',
    description: '你是一個負責任、實用的人，重視傳統，善於執行和維護秩序。',
    strengths: ['負責任', '實用主義', '忠誠可靠', '組織能力強'],
    weaknesses: ['可能過於僵化', '缺乏靈活性', '避免變化', '不善表達情感'],
    careers: ['會計師', '法官', '軍官', '管理者'],
    icon: 'fas fa-clipboard-check',
    matches: ['ESFP', 'ESTP', 'ISFP', 'ISTP']
  }
};

// 測驗狀態
let currentQuestion = 0;
let answers = [];
let scores = { E: 0, I: 0, N: 0, S: 0, F: 0, T: 0, J: 0, P: 0 };

// 初始化測驗
function initTest() {
  currentQuestion = 0;
  answers = [];
  scores = { E: 0, I: 0, N: 0, S: 0, F: 0, T: 0, J: 0, P: 0 };
  showQuestion();
}

// 顯示問題
function showQuestion() {
  const question = questions[currentQuestion];
  document.getElementById('questionNumber').textContent = currentQuestion + 1;
  document.getElementById('questionTitle').textContent = `性格傾向測試`;
  document.getElementById('questionText').textContent = question.question;
  
  const optionsContainer = document.querySelector('.space-y-4');
  optionsContainer.innerHTML = '';
  
  question.options.forEach((option, index) => {
    const button = document.createElement('button');
    button.className = 'option-button group';
    
    const typeLabels = {
      'E': '外向型 (Extraversion)',
      'I': '內向型 (Introversion)',
      'N': '直覺型 (Intuition)',
      'S': '感覺型 (Sensing)',
      'F': '情感型 (Feeling)',
      'T': '思考型 (Thinking)',
      'J': '判斷型 (Judging)',
      'P': '知覺型 (Perceiving)'
    };
    
    const gradientColors = {
      'E': 'from-green-400 to-blue-500',
      'I': 'from-purple-400 to-pink-500',
      'N': 'from-blue-400 to-indigo-500',
      'S': 'from-orange-400 to-red-500',
      'F': 'from-pink-400 to-purple-500',
      'T': 'from-indigo-400 to-blue-500',
      'J': 'from-emerald-400 to-teal-500',
      'P': 'from-yellow-400 to-orange-500'
    };
    
    button.innerHTML = `
      <div class="flex items-center justify-between">
        <div class="flex items-center">
          <div class="w-10 h-10 bg-gradient-to-br ${gradientColors[option.type]} rounded-full flex items-center justify-center text-white mr-4 group-hover:scale-110 transition-transform">
            <i class="${option.icon}"></i>
          </div>
          <div>
            <div class="font-semibold text-lg">${option.text}</div>
            <div class="text-sm text-gray-600">${typeLabels[option.type]}</div>
          </div>
        </div>
        <i class="fas fa-chevron-right text-gray-400 group-hover:text-purple-500 transition-colors"></i>
      </div>
    `;
    button.onclick = () => selectOption(option.type);
    optionsContainer.appendChild(button);
  });
  
  updateProgress();
  updateButtons();
}

// 選擇選項
function selectOption(type) {
  // 清除之前的選擇
  document.querySelectorAll('.option-button').forEach(btn => {
    btn.classList.remove('selected');
  });
  
  // 標記當前選擇
  event.target.closest('.option-button').classList.add('selected');
  
  answers[currentQuestion] = type;
  scores[type]++;
  
  document.getElementById('nextBtn').disabled = false;
}

// 下一題
function nextQuestion() {
  if (currentQuestion < questions.length - 1) {
    currentQuestion++;
    showQuestion();
  } else {
    showResults();
  }
}

// 上一題
function previousQuestion() {
  if (currentQuestion > 0) {
    currentQuestion--;
    showQuestion();
    
    // 恢復之前的選擇
    if (answers[currentQuestion]) {
      setTimeout(() => {
        const buttons = document.querySelectorAll('.option-button');
        buttons.forEach(btn => {
          if (btn.textContent.includes(answers[currentQuestion])) {
            btn.classList.add('selected');
          }
        });
      }, 100);
    }
  }
}

// 更新進度
function updateProgress() {
  const progress = ((currentQuestion + 1) / questions.length) * 100;
  document.getElementById('progressFill').style.width = progress + '%';
  document.getElementById('progressText').textContent = `${currentQuestion + 1} / ${questions.length}`;
}

// 更新按鈕狀態
function updateButtons() {
  document.getElementById('prevBtn').disabled = currentQuestion === 0;
  document.getElementById('nextBtn').disabled = !answers[currentQuestion];
}

// 顯示結果
function showResults() {
  // 計算MBTI類型
  const mbtiType = 
    (scores.E > scores.I ? 'E' : 'I') +
    (scores.N > scores.S ? 'N' : 'S') +
    (scores.F > scores.T ? 'F' : 'T') +
    (scores.J > scores.P ? 'J' : 'P');
  
  // 獲取類型資料
  const typeData = mbtiTypes[mbtiType] || {
    title: '探索者',
    description: '你是一個獨特的人，具有多樣化的性格特質。',
    strengths: ['適應性強', '開放思維', '平衡發展'],
    weaknesses: ['可能缺乏明確方向', '需要更多自我認識'],
    careers: ['多領域專家', '自由職業者', '創業者'],
    icon: 'fas fa-user',
    matches: ['ENFP', 'ENTP', 'INFP', 'INFJ']
  };
  
  // 計算百分比和動畫
  const ePercent = Math.round((scores.E / (scores.E + scores.I)) * 100);
  const nPercent = Math.round((scores.N / (scores.N + scores.S)) * 100);
  const fPercent = Math.round((scores.F / (scores.F + scores.T)) * 100);
  const pPercent = Math.round((scores.P / (scores.J + scores.P)) * 100);
  
  // 顯示結果
  document.getElementById('typeIcon').innerHTML = `<i class="${typeData.icon}"></i>`;
  document.getElementById('mbtiType').textContent = mbtiType;
  document.getElementById('mbtiTitle').textContent = typeData.title;
  document.getElementById('mbtiDescription').textContent = typeData.description;
  
  // 更新性格維度
  document.getElementById('extroversion').textContent = ePercent + '%';
  document.getElementById('intuition').textContent = nPercent + '%';
  document.getElementById('feeling').textContent = fPercent + '%';
  document.getElementById('perceiving').textContent = pPercent + '%';
  
  // 動畫更新進度條
  setTimeout(() => {
    document.getElementById('extroversionBar').style.width = ePercent + '%';
    document.getElementById('intuitionBar').style.width = nPercent + '%';
    document.getElementById('feelingBar').style.width = fPercent + '%';
    document.getElementById('perceivingBar').style.width = pPercent + '%';
  }, 500);
  
  // 更新性格類型說明
  document.getElementById('typeLetter1').textContent = mbtiType[0];
  document.getElementById('typeLetter2').textContent = mbtiType[1];
  document.getElementById('typeLetter3').textContent = mbtiType[2];
  document.getElementById('typeLetter4').textContent = mbtiType[3];
  
  const typeDescriptions = {
    'E': '外向型', 'I': '內向型',
    'N': '直覺型', 'S': '感覺型',
    'F': '情感型', 'T': '思考型',
    'J': '判斷型', 'P': '知覺型'
  };
  
  document.getElementById('typeDesc1').textContent = typeDescriptions[mbtiType[0]];
  document.getElementById('typeDesc2').textContent = typeDescriptions[mbtiType[1]];
  document.getElementById('typeDesc3').textContent = typeDescriptions[mbtiType[2]];
  document.getElementById('typeDesc4').textContent = typeDescriptions[mbtiType[3]];
  
  // 顯示特質
  document.getElementById('strengths').innerHTML = 
    typeData.strengths.map(s => `
      <li class="flex items-start">
        <i class="fas fa-check-circle text-green-500 mr-3 mt-1"></i>
        <span class="text-gray-700">${s}</span>
      </li>
    `).join('');
    
  document.getElementById('weaknesses').innerHTML = 
    typeData.weaknesses.map(w => `
      <li class="flex items-start">
        <i class="fas fa-lightbulb text-orange-500 mr-3 mt-1"></i>
        <span class="text-gray-700">${w}</span>
      </li>
    `).join('');
    
  document.getElementById('careers').innerHTML = 
    typeData.careers.map(c => `
      <li class="flex items-start">
        <i class="fas fa-briefcase text-blue-500 mr-3 mt-1"></i>
        <span class="text-gray-700">${c}</span>
      </li>
    `).join('');
  
  // 更新匹配類型
  if (typeData.matches) {
    document.getElementById('matchType1').textContent = typeData.matches[0];
    document.getElementById('matchType2').textContent = typeData.matches[1];
    document.getElementById('matchType3').textContent = typeData.matches[2];
    document.getElementById('matchType4').textContent = typeData.matches[3];
  }
  
  // 顯示結果區塊
  document.getElementById('questionSection').style.display = 'none';
  document.getElementById('resultSection').style.display = 'block';
  document.getElementById('traitsSection').style.display = 'block';
  document.getElementById('retakeSection').style.display = 'block';
  
  // 添加動畫效果
  document.getElementById('resultSection').classList.add('animate-fade-in');
  document.getElementById('traitsSection').classList.add('animate-slide-up');
  
  document.getElementById('resultSection').scrollIntoView({ behavior: 'smooth' });
}

// 重新測驗
function restartTest() {
  document.getElementById('resultSection').style.display = 'none';
  document.getElementById('traitsSection').style.display = 'none';
  document.getElementById('retakeSection').style.display = 'none';
  document.getElementById('questionSection').style.display = 'block';
  
  // 移除動畫類
  document.getElementById('resultSection').classList.remove('animate-fade-in');
  document.getElementById('traitsSection').classList.remove('animate-slide-up');
  
  initTest();
}

// 分享結果
function shareResults() {
  const mbtiType = document.getElementById('mbtiType').textContent;
  const mbtiTitle = document.getElementById('mbtiTitle').textContent;
  
  const shareText = `我剛剛完成了MBTI性格測驗！我的性格類型是 ${mbtiType} - ${mbtiTitle}。你也來測測看吧！`;
  const shareUrl = window.location.href;
  
  if (navigator.share) {
    navigator.share({
      title: 'MBTI性格測驗結果',
      text: shareText,
      url: shareUrl
    });
  } else {
    // 複製到剪貼板
    navigator.clipboard.writeText(`${shareText}\n${shareUrl}`).then(() => {
      alert('結果已複製到剪貼板！');
    });
  }
}

// 主題切換功能
document.getElementById('themeToggle').addEventListener('click', () => {
  document.body.classList.toggle('dark');
  const isDark = document.body.classList.contains('dark');
  const icon = document.querySelector('#themeToggle i');
  icon.className = isDark ? 'fas fa-moon' : 'fas fa-sun';
  
  // 保存主題偏好
  localStorage.setItem('mbti-theme', isDark ? 'dark' : 'light');
});

// 載入保存的主題
document.addEventListener('DOMContentLoaded', () => {
  const savedTheme = localStorage.getItem('mbti-theme');
  if (savedTheme === 'dark') {
    document.body.classList.add('dark');
    document.querySelector('#themeToggle i').className = 'fas fa-moon';
  }
});

// 添加鍵盤導航支持
document.addEventListener('keydown', (e) => {
  if (e.key === 'ArrowLeft' && !document.getElementById('prevBtn').disabled) {
    previousQuestion();
  } else if (e.key === 'ArrowRight' && !document.getElementById('nextBtn').disabled) {
    nextQuestion();
  }
});

// 初始化
initTest();
</script>
</body>
</html>
