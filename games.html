<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="æ¿¬ç‘’æˆ¿ç”¢ç”Ÿæ´»å¹³å° - è¶£å‘³å°éŠæˆ²">
<title>éŠæˆ²å¤§å»³ - æ¿¬ç‘’æˆ¿ç”¢ç”Ÿæ´»å¹³å°</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="preload" href="https://cdn.tailwindcss.com" as="script">
<style>
:root {
  --grad-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  --grad-secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  --grad-success: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
  --grad-warning: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
  --grad-danger: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
  --grad-info: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Arial', sans-serif;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  min-height: 100vh;
  overflow-x: hidden;
}

/* ä¸»é¡Œåˆ‡æ› */
.dark {
  --grad-primary: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
  --grad-secondary: linear-gradient(135deg, #0f3460 0%, #533483 100%);
  --grad-success: linear-gradient(135deg, #0f4c75 0%, #3282b8 100%);
  --grad-warning: linear-gradient(135deg, #0f4c75 0%, #bbe1fa 100%);
  --grad-danger: linear-gradient(135deg, #2c1810 0%, #8b4513 100%);
  --grad-info: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
}

.dark body {
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
}

/* ç»ç’ƒæ•ˆæœ */
.glass {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(16px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}

.dark .glass {
  background: rgba(0, 0, 0, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.08);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

/* éŠæˆ²å¡ç‰‡ */
.game-card {
  background: rgba(255, 255, 255, 0.95);
  border-radius: 12px;
  padding: 1rem;
  box-shadow: 0 6px 24px rgba(0, 0, 0, 0.08);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.dark .game-card {
  background: rgba(30, 30, 30, 0.95);
  color: white;
}

.game-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transition: left 0.5s;
}

.game-card:hover::before {
  left: 100%;
}

.game-card:hover {
  transform: translateY(-4px) scale(1.02);
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
}

/* å‹•ç•« */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-12px); }
}

@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.03); }
}

@keyframes rotate {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes bounce {
  0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
  40% { transform: translateY(-6px); }
  60% { transform: translateY(-3px); }
}

@keyframes glow {
  0%, 100% { box-shadow: 0 0 8px rgba(102, 126, 234, 0.4); }
  50% { box-shadow: 0 0 16px rgba(102, 126, 234, 0.6), 0 0 24px rgba(102, 126, 234, 0.4); }
}

@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.float { animation: float 4s ease-in-out infinite; }
.pulse { animation: pulse 3s ease-in-out infinite; }
.rotate { animation: rotate 12s linear infinite; }
.bounce { animation: bounce 1.5s ease-in-out infinite; }
.glow { animation: glow 3s ease-in-out infinite; }
.slide-in { animation: slideInUp 0.6s ease-out; }
.fade-in { animation: fadeIn 0.8s ease-out; }

/* éŠæˆ²åœ–æ¨™ */
.game-icon {
  font-size: 2.5rem;
  margin-bottom: 0.5rem;
  display: block;
}

/* éŠæˆ²åœ–æ¡ˆæŒ‰éˆ• */
.game-icon-btn {
  background: rgba(255, 255, 255, 0.95);
  border-radius: 12px;
  padding: 0.75rem 0.5rem;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  border: 1px solid rgba(255, 255, 255, 0.2);
  cursor: pointer;
  text-align: center;
  min-height: 100px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

.dark .game-icon-btn {
  background: rgba(30, 30, 30, 0.95);
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.game-icon-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transition: left 0.5s;
}

.game-icon-btn:hover::before {
  left: 100%;
}

.game-icon-btn:hover {
  transform: translateY(-2px) scale(1.05);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
}

.game-icon-emoji {
  font-size: 2rem;
  margin-bottom: 0.25rem;
  display: block;
}

.game-icon-title {
  font-size: 0.75rem;
  font-weight: 600;
  color: #333;
  margin-bottom: 0.25rem;
  line-height: 1.2;
}

.dark .game-icon-title {
  color: white;
}

.game-icon-score {
  font-size: 0.65rem;
  color: #666;
  opacity: 0.8;
}

.dark .game-icon-score {
  color: #ccc;
}

/* åˆ†æ•¸é¡¯ç¤º */
.score-display {
  background: rgba(102, 126, 234, 0.1);
  border-radius: 8px;
  padding: 0.5rem;
  margin-bottom: 0.5rem;
}

.dark .score-display {
  background: rgba(102, 126, 234, 0.2);
}

/* æŒ‰éˆ•æ¨£å¼ */
.btn-game {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  border-radius: 12px;
  padding: 10px 20px;
  font-weight: 600;
  font-size: 0.875rem;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
}

.btn-game:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 16px rgba(102, 126, 234, 0.25);
}

.btn-game:active {
  transform: translateY(0);
}

.btn-game::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transition: left 0.5s;
}

.btn-game:hover::before {
  left: 100%;
}

/* ä¸»é¡Œåˆ‡æ›æŒ‰éˆ• */
#themeToggle {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 1000;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border: none;
  border-radius: 50%;
  width: 50px;
  height: 50px;
  color: white;
  font-size: 1.2rem;
  cursor: pointer;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
  transition: all 0.3s ease;
}

#themeToggle:hover {
  transform: scale(1.1);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
}

/* è¿”å›æŒ‰éˆ• */
.back-btn {
  position: fixed;
  top: 20px;
  left: 20px;
  z-index: 1000;
  background: rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 50%;
  width: 50px;
  height: 50px;
  color: white;
  font-size: 1.2rem;
  cursor: pointer;
  transition: all 0.3s ease;
}

.back-btn:hover {
  background: rgba(255, 255, 255, 0.3);
  transform: scale(1.1);
}

/* æ‰‹æ©Ÿå„ªåŒ– */
.game-area {
  touch-action: manipulation;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* è§¸æ§å„ªåŒ– */
.touch-manipulation {
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* é˜²æ­¢æ‰‹æ©Ÿä¸Šçš„é›™æ“Šç¸®æ”¾ */
.game-icon-btn {
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}

/* éŠæˆ²æŒ‰éˆ•è§¸æ§å„ªåŒ– */
.btn-game {
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* é˜²æ­¢æ‰‹æ©Ÿä¸Šçš„æ»¾å‹• */
.game-modal {
  touch-action: none;
  overflow: hidden;
}

.game-modal-content {
  touch-action: manipulation;
  -webkit-overflow-scrolling: touch;
}

/* éŸ¿æ‡‰å¼è¨­è¨ˆ */
@media (max-width: 1024px) {
  .container {
    padding-left: 0.75rem;
    padding-right: 0.75rem;
  }
  
  .game-card {
    padding: 0.875rem;
  }
  
  .game-icon {
    font-size: 2.25rem;
  }
  
  .game-icon-btn {
    min-height: 90px;
    padding: 0.625rem 0.375rem;
  }
  
  .game-icon-emoji {
    font-size: 1.75rem;
  }
  
  .game-icon-title {
    font-size: 0.7rem;
  }
  
  .game-icon-score {
    font-size: 0.6rem;
  }
}

@media (max-width: 768px) {
  .game-card {
    padding: 0.75rem;
    margin-bottom: 0.5rem;
  }
  
  .game-icon {
    font-size: 2rem;
  }
  
  .game-icon-btn {
    min-height: 85px;
    padding: 0.5rem 0.25rem;
  }
  
  .game-icon-emoji {
    font-size: 1.5rem;
  }
  
  .game-icon-title {
    font-size: 0.65rem;
  }
  
  .game-icon-score {
    font-size: 0.55rem;
  }
  
  #themeToggle, .back-btn {
    width: 40px;
    height: 40px;
    font-size: 0.9rem;
  }
  
  .game-modal-content {
    padding: 0.75rem;
    max-width: 95vw;
    max-height: 95vh;
    margin: 0.5rem;
    box-sizing: border-box;
  }
  
  .btn-game {
    padding: 7px 14px;
    font-size: 0.75rem;
  }
  
  .grid {
    gap: 0;
  }
}

@media (max-width: 480px) {
  .container {
    padding-left: 0.5rem;
    padding-right: 0.5rem;
  }
  
  .game-card {
    padding: 0.625rem;
    margin-bottom: 0.375rem;
  }
  
  .game-icon {
    font-size: 1.75rem;
  }
  
  .game-icon-btn {
    min-height: 80px;
    padding: 0.375rem 0.125rem;
  }
  
  .game-icon-emoji {
    font-size: 1.25rem;
  }
  
  .game-icon-title {
    font-size: 0.6rem;
  }
  
  .game-icon-score {
    font-size: 0.5rem;
  }
  
  .btn-game {
    padding: 6px 12px;
    font-size: 0.7rem;
  }
  
  .grid {
    gap: 0;
  }
  
  .text-4xl {
    font-size: 1.75rem;
  }
  
  .text-6xl {
    font-size: 2.5rem;
  }
  
  .game-modal {
    padding: 0.5rem;
  }
  
  .game-modal-content {
    padding: 0.5rem;
    max-width: 96vw;
    max-height: 96vh;
    margin: 0.5rem;
    box-sizing: border-box;
  }
  
  .game-area .grid {
    gap: 0.25rem;
    padding: 0.25rem;
  }
}

/* éŠæˆ²æ¨¡æ…‹æ¡† */
.game-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.75);
  backdrop-filter: blur(8px);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 2000;
  padding: 1rem;
  box-sizing: border-box;
}

.game-modal.active {
  display: flex;
}

.game-modal-content {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px);
  border-radius: 12px;
  padding: 1rem;
  width: 100%;
  max-width: 90vw;
  height: 100%;
  max-height: 90vh;
  overflow: hidden;
  position: relative;
  border: 1px solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
}

.dark .game-modal-content {
  background: rgba(26, 26, 46, 0.95);
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.close-modal {
  position: absolute;
  top: 15px;
  right: 20px;
  background: none;
  border: none;
  font-size: 1.5rem;
  cursor: pointer;
  color: #666;
}

.dark .close-modal {
  color: #ccc;
}

.close-modal:hover {
  color: #333;
}

.dark .close-modal:hover {
  color: #fff;
}

/* éŠæˆ²å…§å®¹å€åŸŸ */
#gameContent {
  flex: 1;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  min-height: 0;
}

/* éŠæˆ²å€åŸŸè‡ªé©æ‡‰ */
.game-area {
  flex: 1;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  min-height: 0;
}

/* éŠæˆ²ç¶²æ ¼è‡ªé©æ‡‰ */
.game-area .grid {
  flex: 1;
  overflow: hidden;
  display: grid;
  gap: 0;
  padding: 0;
}

/* ç¢ºä¿éŠæˆ²å…§å®¹ä¸æœƒæº¢å‡º */
.game-area .grid > * {
  min-height: 0;
  overflow: hidden;
}

/* æ‰‹æ©Ÿç‰ˆå°èˆªåˆ—å„ªåŒ– */
@media (max-width: 640px) {
  .bottom-nav {
    flex-wrap: nowrap;
    justify-content: space-around;
    padding: 0.5rem 0.25rem;
  }
  
  .bottom-nav button {
    flex: 1;
    min-width: 0;
    padding: 0.25rem 0.1rem;
    font-size: 0.7rem;
  }
  
  .bottom-nav button span:first-child {
    font-size: 1rem;
    margin-bottom: 0.125rem;
  }
}
</style>
</head>
<body>
<!-- ä¸»é¡Œåˆ‡æ›æŒ‰éˆ• -->
<button id="themeToggle" onclick="toggleTheme()" class="float">ğŸŒ“</button>

<!-- è¿”å›æŒ‰éˆ• -->
<button class="back-btn" onclick="goBack()" title="è¿”å›ä¸»é ">â†</button>

  <!-- é é¢æ¨™é¡Œ -->
  <div class="container mx-auto px-3 py-3 pb-16">
    <div class="text-center mb-4">
      <h1 class="text-2xl md:text-4xl font-bold text-white mb-2 glow slide-in">ğŸ® éŠæˆ²å¤§å»³</h1>
      <p class="text-base text-white opacity-90 fade-in">é¸æ“‡ä½ å–œæ­¡çš„éŠæˆ²ï¼Œæ”¾é¬†ä¸€ä¸‹ï¼</p>
    </div>

  <!-- ç¸½åˆ†é¡¯ç¤º -->
  <div class="glass rounded-xl p-2 mb-3 text-center">
    <h2 class="text-base font-bold text-white mb-1">ğŸ† ç¸½ç©åˆ†</h2>
    <div class="score-display">
      <span id="totalScore" class="text-xl font-bold text-indigo-600">0</span>
      <p class="text-gray-600 dark:text-gray-300 mt-1 text-xs">ç¹¼çºŒéŠæˆ²ç²å¾—æ›´å¤šç©åˆ†ï¼</p>
    </div>
  </div>

  <!-- éŠæˆ²æŒ‰éˆ•ç¶²æ ¼ -->
  <div class="grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2 mb-3">
    <!-- Wordle æ–‡å­—çŒœè¬ -->
    <div class="game-icon-btn touch-manipulation" onclick="openGame('wordle')" ontouchstart="openGame('wordle')" title="Wordle - çŒœå‡º5å­—æ¯å–®è©">
      <div class="game-icon-emoji float">ğŸ“</div>
      <div class="game-icon-title">Wordle</div>
      <div class="game-icon-score">æœ€é«˜: <span id="wordleHighScore">0</span></div>
    </div>

    <!-- 2048 æ•¸å­—åˆä½µ -->
    <div class="game-icon-btn touch-manipulation" onclick="openGame('game2048')" ontouchstart="openGame('game2048')" title="2048 - åˆä½µæ•¸å­—é”åˆ°2048">
      <div class="game-icon-emoji glow">ğŸ”¢</div>
      <div class="game-icon-title">2048</div>
      <div class="game-icon-score">æœ€é«˜: <span id="game2048HighScore">0</span></div>
    </div>

    <!-- è¨˜æ†¶é…å°éŠæˆ² -->
    <div class="game-icon-btn touch-manipulation" onclick="openGame('memory')" ontouchstart="openGame('memory')" title="è¨˜æ†¶é…å° - é»æ“Šç¿»ç‰Œæ‰¾å‡ºç›¸åŒå¡ç‰‡">
      <div class="game-icon-emoji pulse">ğŸ§ </div>
      <div class="game-icon-title">è¨˜æ†¶é…å°</div>
      <div class="game-icon-score">æœ€é«˜: <span id="memoryHighScore">0</span></div>
    </div>

    <!-- åæ‡‰æ¸¬è©¦éŠæˆ² -->
    <div class="game-icon-btn touch-manipulation" onclick="openGame('reaction')" ontouchstart="openGame('reaction')" title="åæ‡‰æ¸¬è©¦ - æ¸¬è©¦ä½ çš„åæ‡‰é€Ÿåº¦">
      <div class="game-icon-emoji bounce">âš¡</div>
      <div class="game-icon-title">åæ‡‰æ¸¬è©¦</div>
      <div class="game-icon-score">æœ€é«˜: <span id="reactionHighScore">0</span></div>
    </div>

    <!-- æ•¸ç¨éŠæˆ² -->
    <div class="game-icon-btn touch-manipulation" onclick="openGame('sudoku')" ontouchstart="openGame('sudoku')" title="æ•¸ç¨ - ç¶“å…¸æ•¸å­—é‚è¼¯éŠæˆ²">
      <div class="game-icon-emoji rotate">ğŸ”²</div>
      <div class="game-icon-title">æ•¸ç¨</div>
      <div class="game-icon-score">æœ€é«˜: <span id="sudokuHighScore">0</span></div>
    </div>

    <!-- ä¿„ç¾…æ–¯æ–¹å¡Š -->
    <div class="game-icon-btn touch-manipulation" onclick="openGame('tetris')" ontouchstart="openGame('tetris')" title="ä¿„ç¾…æ–¯æ–¹å¡Š - ç¶“å…¸ç›Šæ™ºéŠæˆ²">
      <div class="game-icon-emoji float">ğŸ§©</div>
      <div class="game-icon-title">ä¿„ç¾…æ–¯æ–¹å¡Š</div>
      <div class="game-icon-score">æœ€é«˜: <span id="tetrisHighScore">0</span></div>
    </div>

    <!-- è²ªåƒè›‡ -->
    <div class="game-icon-btn touch-manipulation" onclick="openGame('snake')" ontouchstart="openGame('snake')" title="è²ªåƒè›‡ - ç¶“å…¸è¡—æ©ŸéŠæˆ²">
      <div class="game-icon-emoji pulse">ğŸ</div>
      <div class="game-icon-title">è²ªåƒè›‡</div>
      <div class="game-icon-score">æœ€é«˜: <span id="snakeHighScore">0</span></div>
    </div>

    <!-- æ‰“åœ°é¼  -->
    <div class="game-icon-btn touch-manipulation" onclick="openGame('whack')" ontouchstart="openGame('whack')" title="æ‰“åœ°é¼  - é»æ“Šå‡ºç¾çš„åœ°é¼ ">
      <div class="game-icon-emoji bounce">ğŸ¹</div>
      <div class="game-icon-title">æ‰“åœ°é¼ </div>
      <div class="game-icon-score">æœ€é«˜: <span id="whackHighScore">0</span></div>
    </div>


    <!-- ç¿»è½‰å¡ç‰‡ -->
    <div class="game-icon-btn touch-manipulation" onclick="openGame('flipcard')" ontouchstart="openGame('flipcard')" title="ç¿»è½‰å¡ç‰‡ - è¨˜æ†¶åŠ›æŒ‘æˆ°">
      <div class="game-icon-emoji float">ğŸƒ</div>
      <div class="game-icon-title">ç¿»è½‰å¡ç‰‡</div>
      <div class="game-icon-score">æœ€é«˜: <span id="flipcardHighScore">0</span></div>
    </div>

    <!-- å‰ªåˆ€çŸ³é ­å¸ƒ -->
    <div class="game-icon-btn touch-manipulation" onclick="openGame('rps')" ontouchstart="openGame('rps')" title="å‰ªåˆ€çŸ³é ­å¸ƒ - ç¶“å…¸å°æˆ°éŠæˆ²">
      <div class="game-icon-emoji pulse">âœ‚ï¸</div>
      <div class="game-icon-title">å‰ªåˆ€çŸ³é ­å¸ƒ</div>
      <div class="game-icon-score">æœ€é«˜: <span id="rpsHighScore">0</span></div>
    </div>

    <!-- æ¶ˆé™¤ä¸‰æ¶ˆ -->
    <div class="game-icon-btn touch-manipulation" onclick="openGame('match3')" ontouchstart="openGame('match3')" title="ä¸‰æ¶ˆéŠæˆ² - é€£ç·šæ¶ˆé™¤å¯¶çŸ³">
      <div class="game-icon-emoji bounce">ğŸ’</div>
      <div class="game-icon-title">ä¸‰æ¶ˆéŠæˆ²</div>
      <div class="game-icon-score">æœ€é«˜: <span id="match3HighScore">0</span></div>
    </div>
  </div>

  <!-- æˆå°±ç³»çµ± -->
  <div class="glass rounded-xl p-3">
    <h2 class="text-lg font-bold text-white mb-2 text-center">ğŸ… æˆå°±ç³»çµ±</h2>
    <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
      <div class="achievement-item text-center p-2 rounded-lg bg-white bg-opacity-10">
        <div class="text-lg mb-1">ğŸ®</div>
        <div class="text-xs text-white">éŠæˆ²æ–°æ‰‹</div>
        <div class="text-xs text-gray-300">ç©é3å€‹éŠæˆ²</div>
      </div>
      <div class="achievement-item text-center p-2 rounded-lg bg-white bg-opacity-10">
        <div class="text-lg mb-1">ğŸ†</div>
        <div class="text-xs text-white">ç©åˆ†é”äºº</div>
        <div class="text-xs text-gray-300">ç²å¾—5000åˆ†</div>
      </div>
      <div class="achievement-item text-center p-2 rounded-lg bg-white bg-opacity-10">
        <div class="text-lg mb-1">ğŸ“</div>
        <div class="text-xs text-white">Wordleå¤§å¸«</div>
        <div class="text-xs text-gray-300">Wordleé€£å‹10æ¬¡</div>
      </div>
      <div class="achievement-item text-center p-2 rounded-lg bg-white bg-opacity-10">
        <div class="text-lg mb-1">ğŸ§©</div>
        <div class="text-xs text-white">ç›Šæ™ºä¹‹ç‹</div>
        <div class="text-xs text-gray-300">å®Œæˆæ‰€æœ‰ç›Šæ™ºéŠæˆ²</div>
      </div>
    </div>
  </div>
</div>

<!-- éŠæˆ²æ¨¡æ…‹æ¡† -->
<div id="gameModal" class="game-modal">
  <div class="game-modal-content">
    <button class="close-modal" onclick="closeGame()">Ã—</button>
    <div id="gameContent"></div>
  </div>
</div>

<script src="mobile-games.js"></script>
<script>
// ä¸»é¡Œåˆ‡æ›
function toggleTheme() {
  document.body.classList.toggle('dark');
  localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
}

// è¼‰å…¥ä¸»é¡Œ
function loadTheme() {
  const savedTheme = localStorage.getItem('theme');
  if (savedTheme === 'dark') {
    document.body.classList.add('dark');
  }
}

// è¿”å›ä¸»é 
function goBack() {
  window.location.href = 'index.html';
}

// éŠæˆ²æ•¸æ“š
let gameData = {
  totalScore: 0,
  highScores: {
    wordle: 0,
    game2048: 0,
    memory: 0,
    reaction: 0,
    sudoku: 0,
    tetris: 0,
    snake: 0,
    whack: 0,
    flipcard: 0,
    rps: 0,
    match3: 0
  },
  achievements: {
    gameNewbie: false,
    scoreMaster: false,
    memoryMaster: false,
    speedKing: false,
    wordleMaster: false,
    puzzleKing: false
  }
};

// è¼‰å…¥éŠæˆ²æ•¸æ“š
function loadGameData() {
  const saved = localStorage.getItem('gameData');
  if (saved) {
    gameData = JSON.parse(saved);
    updateScoreDisplay();
  }
}

// å„²å­˜éŠæˆ²æ•¸æ“š
function saveGameData() {
  localStorage.setItem('gameData', JSON.stringify(gameData));
}

// æ›´æ–°åˆ†æ•¸é¡¯ç¤º
function updateScoreDisplay() {
  document.getElementById('totalScore').textContent = gameData.totalScore;
  document.getElementById('wordleHighScore').textContent = gameData.highScores.wordle;
  document.getElementById('game2048HighScore').textContent = gameData.highScores.game2048;
  document.getElementById('memoryHighScore').textContent = gameData.highScores.memory;
  document.getElementById('reactionHighScore').textContent = gameData.highScores.reaction;
  document.getElementById('sudokuHighScore').textContent = gameData.highScores.sudoku;
  document.getElementById('tetrisHighScore').textContent = gameData.highScores.tetris;
  document.getElementById('snakeHighScore').textContent = gameData.highScores.snake;
  document.getElementById('whackHighScore').textContent = gameData.highScores.whack;
  document.getElementById('flipcardHighScore').textContent = gameData.highScores.flipcard;
  document.getElementById('rpsHighScore').textContent = gameData.highScores.rps;
  document.getElementById('match3HighScore').textContent = gameData.highScores.match3;
}

// é–‹å•ŸéŠæˆ²
function openGame(gameType) {
  console.log('é–‹å•ŸéŠæˆ²:', gameType);
  const modal = document.getElementById('gameModal');
  const content = document.getElementById('gameContent');
  
  if (!modal || !content) {
    console.error('æ‰¾ä¸åˆ°æ¨¡æ…‹æ¡†å…ƒç´ ');
    return;
  }
  
  // æ¸…ç†ä¹‹å‰çš„éŠæˆ²
  if (currentGameInstance) {
    closeGame();
  }
  
  // å…ˆé¡¯ç¤ºæ¨¡æ…‹æ¡†
  modal.classList.add('active');
  console.log('æ¨¡æ…‹æ¡†å·²é¡¯ç¤º');
  
  switch(gameType) {
    case 'wordle':
      content.innerHTML = createWordleGame();
      setTimeout(() => startWordleGame(), 100);
      break;
    case 'game2048':
      content.innerHTML = create2048Game();
      setTimeout(() => start2048Game(), 100);
      break;
    case 'memory':
      content.innerHTML = createMemoryGame();
      setTimeout(() => startMemoryGame(), 100);
      break;
    case 'reaction':
      content.innerHTML = createReactionGame();
      setTimeout(() => startReactionGame(), 100);
      break;
    case 'sudoku':
      content.innerHTML = createSudokuGame();
      setTimeout(() => startSudokuGame(), 100);
      break;
    case 'tetris':
      content.innerHTML = createTetrisGame();
      setTimeout(() => startTetrisGame(), 100);
      break;
    case 'snake':
      content.innerHTML = createSnakeGame();
      setTimeout(() => startSnakeGame(), 100);
      break;
    case 'whack':
      content.innerHTML = createWhackGame();
      setTimeout(() => startWhackGame(), 100);
      break;
    case 'flipcard':
      content.innerHTML = createFlipcardGame();
      setTimeout(() => startFlipcardGame(), 100);
      break;
    case 'rps':
      content.innerHTML = createRPSGame();
      setTimeout(() => startRPSGame(), 100);
      break;
    case 'match3':
      content.innerHTML = createMatch3Game();
      setTimeout(() => startMatch3Game(), 100);
      break;
  }
}

// é—œé–‰éŠæˆ²
function closeGame() {
  const modal = document.getElementById('gameModal');
  modal.classList.remove('active');
  
  // æ¸…ç†éŠæˆ²å¯¦ä¾‹
  if (currentGameInstance) {
    // åœæ­¢æ‰€æœ‰è¨ˆæ™‚å™¨
    if (currentGameInstance.timer) {
      clearInterval(currentGameInstance.timer);
    }
    if (currentGameInstance.gameLoop) {
      clearInterval(currentGameInstance.gameLoop);
    }
    if (currentGameInstance.timeoutId) {
      clearTimeout(currentGameInstance.timeoutId);
    }
    
    // æ¸…ç†å…¨å±€å‡½æ•¸
    if (window.selectNumber) {
      delete window.selectNumber;
    }
    if (window.closeNumberSelector) {
      delete window.closeNumberSelector;
    }
    if (window.makeGuess) {
      delete window.makeGuess;
    }
    
    currentGameInstance = null;
  }
  
  // æ¸…ç†æ¨¡æ…‹æ¡†å…§å®¹
  const content = document.getElementById('gameContent');
  if (content) {
    content.innerHTML = '';
  }
}

// æ›´æ–°åˆ†æ•¸
function updateScore(gameType, score) {
  if (score > gameData.highScores[gameType]) {
    gameData.highScores[gameType] = score;
  }
  gameData.totalScore += score;
  updateScoreDisplay();
  saveGameData();
  checkAchievements();
}

// æª¢æŸ¥æˆå°±
function checkAchievements() {
  // éŠæˆ²æ–°æ‰‹
  const gamesPlayed = Object.values(gameData.highScores).filter(score => score > 0).length;
  if (gamesPlayed >= 3 && !gameData.achievements.gameNewbie) {
    gameData.achievements.gameNewbie = true;
    showAchievement('éŠæˆ²æ–°æ‰‹', 'ğŸ®');
  }
  
  // ç©åˆ†é”äºº
  if (gameData.totalScore >= 5000 && !gameData.achievements.scoreMaster) {
    gameData.achievements.scoreMaster = true;
    showAchievement('ç©åˆ†é”äºº', 'ğŸ†');
  }
  
  // Wordleå¤§å¸«
  if (gameData.highScores.wordle >= 500 && !gameData.achievements.wordleMaster) {
    gameData.achievements.wordleMaster = true;
    showAchievement('Wordleå¤§å¸«', 'ğŸ“');
  }
  
  // ç›Šæ™ºä¹‹ç‹
  const puzzleGames = ['sudoku', 'game2048', 'memory'];
  const puzzleCompleted = puzzleGames.every(game => gameData.highScores[game] > 0);
  if (puzzleCompleted && !gameData.achievements.puzzleKing) {
    gameData.achievements.puzzleKing = true;
    showAchievement('ç›Šæ™ºä¹‹ç‹', 'ğŸ§©');
  }
}

// é¡¯ç¤ºæˆå°±
function showAchievement(title, icon) {
  const notification = document.createElement('div');
  notification.className = 'fixed top-20 right-4 bg-green-500 text-white p-4 rounded-lg shadow-lg z-50';
  notification.innerHTML = `
    <div class="flex items-center">
      <span class="text-2xl mr-2">${icon}</span>
      <div>
        <div class="font-bold">æˆå°±è§£é–ï¼</div>
        <div class="text-sm">${title}</div>
      </div>
    </div>
  `;
  
  document.body.appendChild(notification);
  
  setTimeout(() => {
    notification.remove();
  }, 3000);
}

// è¨˜æ†¶é…å°éŠæˆ²
function createMemoryGame() {
  return `
    <div class="text-center h-full flex flex-col">
      <h2 class="text-xl font-bold mb-2">ğŸ§  è¨˜æ†¶é…å°</h2>
      <div class="mb-2 flex justify-center gap-3 text-xs">
        <span>åˆ†æ•¸: <span id="memoryScore" class="font-bold">0</span></span>
        <span>æ™‚é–“: <span id="memoryTime" class="font-bold">90</span>s</span>
        <span>ç§»å‹•: <span id="memoryMoves" class="font-bold">0</span></span>
      </div>
      <div id="memoryGrid" class="game-area flex-1 mb-2"></div>
      <div class="flex justify-center gap-2">
        <button onclick="startMemoryGame()" class="btn-game text-xs px-3 py-1">é–‹å§‹éŠæˆ²</button>
        <button onclick="closeGame()" class="btn-game text-xs px-3 py-1">é—œé–‰</button>
      </div>
    </div>
  `;
}

// æ»‘å‹•æ¶ˆé™¤éŠæˆ²
function createEliminateGame() {
  return `
    <div class="text-center">
      <h2 class="text-2xl font-bold mb-4">ğŸ¯ æ»‘å‹•æ¶ˆé™¤</h2>
      <div class="mb-4 flex justify-center gap-4 text-sm">
        <span>åˆ†æ•¸: <span id="eliminateScore" class="font-bold">0</span></span>
        <span>ç›®æ¨™: <span id="eliminateTarget" class="font-bold">1000</span></span>
        <span>æ­¥æ•¸: <span id="eliminateMoves" class="font-bold">30</span></span>
      </div>
      <div id="eliminateGrid" class="game-area mb-4"></div>
      <div class="text-xs text-gray-600 mb-4">æ»‘å‹•ç›¸é„°æ–¹å¡Šå‰µé€ ä¸‰å€‹é€£ç·š</div>
      <div class="flex justify-center gap-2">
        <button onclick="startEliminateGame()" class="btn-game text-sm">é–‹å§‹éŠæˆ²</button>
        <button onclick="closeGame()" class="btn-game text-sm">é—œé–‰</button>
      </div>
    </div>
  `;
}

// åæ‡‰æ¸¬è©¦éŠæˆ²
function createReactionGame() {
  return `
    <div class="text-center h-full flex flex-col">
      <h2 class="text-xl font-bold mb-2">âš¡ åæ‡‰æ¸¬è©¦</h2>
      <div id="reactionArea" class="game-area flex-1 mb-2"></div>
      <div class="text-xs text-gray-600 mb-2">ç­‰æŒ‰éˆ•è®Šç¶ è‰²æ™‚å¿«é€Ÿé»æ“Š</div>
      <div class="flex justify-center gap-2">
        <button onclick="startReactionGame()" class="btn-game text-xs px-3 py-1">é–‹å§‹éŠæˆ²</button>
        <button onclick="closeGame()" class="btn-game text-xs px-3 py-1">é—œé–‰</button>
      </div>
    </div>
  `;
}

// æ•¸å­—åˆä½µéŠæˆ²
function createMergeGame() {
  return `
    <div class="text-center">
      <h2 class="text-2xl font-bold mb-4">ğŸ”¢ æ•¸å­—åˆä½µ</h2>
      <div class="mb-4">
        <span class="text-lg">åˆ†æ•¸: <span id="mergeScore" class="font-bold">0</span></span>
      </div>
      <div id="mergeGrid" class="game-area mb-4"></div>
      <div id="mergeArea" class="mb-4">
        <div class="text-xs text-gray-600 mb-2">æ»‘å‹•è¢å¹•æ§åˆ¶æ–¹å‘</div>
        <div class="flex justify-center gap-1">
          <button onclick="currentGameInstance.move('up')" class="w-12 h-12 bg-gray-300 rounded text-lg">â†‘</button>
        </div>
        <div class="flex justify-center gap-1">
          <button onclick="currentGameInstance.move('left')" class="w-12 h-12 bg-gray-300 rounded text-lg">â†</button>
          <button onclick="currentGameInstance.move('down')" class="w-12 h-12 bg-gray-300 rounded text-lg">â†“</button>
          <button onclick="currentGameInstance.move('right')" class="w-12 h-12 bg-gray-300 rounded text-lg">â†’</button>
        </div>
      </div>
      <div class="flex justify-center gap-2">
        <button onclick="startMergeGame()" class="btn-game text-sm">é–‹å§‹éŠæˆ²</button>
        <button onclick="closeGame()" class="btn-game text-sm">é—œé–‰</button>
      </div>
    </div>
  `;
}

// æ•¸å­—æ‹¼åœ–éŠæˆ²
function createPuzzleGame() {
  return `
    <div class="text-center">
      <h2 class="text-3xl font-bold mb-4">ğŸ§© æ•¸å­—æ‹¼åœ–</h2>
      <div class="mb-4">
        <span class="text-lg">ç§»å‹•æ¬¡æ•¸: <span id="puzzleMoves">0</span></span>
        <span class="text-lg ml-4">æ™‚é–“: <span id="puzzleTime">0</span>s</span>
      </div>
      <div id="puzzleGrid" class="grid grid-cols-4 gap-1 max-w-md mx-auto"></div>
      <div class="mt-4">
        <button onclick="startPuzzleGame()" class="btn-game mr-2">é–‹å§‹éŠæˆ²</button>
        <button onclick="closeGame()" class="btn-game">é—œé–‰</button>
      </div>
    </div>
  `;
}

// æˆ¿ç”¢å¤§å¯Œç¿éŠæˆ²
function createMonopolyGame() {
  return `
    <div class="text-center">
      <h2 class="text-3xl font-bold mb-4">ğŸ  æˆ¿ç”¢å¤§å¯Œç¿</h2>
      <div class="mb-4">
        <span class="text-lg">è³‡é‡‘: $<span id="monopolyMoney">1000</span></span>
        <span class="text-lg ml-4">å›åˆ: <span id="monopolyRound">1</span></span>
      </div>
      <div id="monopolyBoard" class="grid grid-cols-4 gap-2 max-w-lg mx-auto"></div>
      <div class="mt-4">
        <button onclick="startMonopolyGame()" class="btn-game mr-2">é–‹å§‹éŠæˆ²</button>
        <button onclick="closeGame()" class="btn-game">é—œé–‰</button>
      </div>
    </div>
  `;
}

// å¹¸é‹è½‰ç›¤éŠæˆ²
function createWheelGame() {
  return `
    <div class="text-center">
      <h2 class="text-3xl font-bold mb-4">ğŸ¯ å¹¸é‹è½‰ç›¤</h2>
      <div class="mb-4">
        <span class="text-lg">ç©åˆ†: <span id="wheelScore">0</span></span>
        <span class="text-lg ml-4">æ¬¡æ•¸: <span id="wheelSpins">3</span></span>
      </div>
      <div class="relative w-64 h-64 mx-auto mb-4">
        <canvas id="wheelCanvas" width="256" height="256" class="border-4 border-gray-300 rounded-full"></canvas>
        <div class="absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-2">
          <div class="w-0 h-0 border-l-4 border-r-4 border-b-8 border-l-transparent border-r-transparent border-b-red-500"></div>
        </div>
      </div>
      <div class="mt-4">
        <button onclick="spinWheel()" class="btn-game mr-2">è½‰å‹•è½‰ç›¤</button>
        <button onclick="closeGame()" class="btn-game">é—œé–‰</button>
      </div>
    </div>
  `;
}

// 2048éŠæˆ²
function create2048Game() {
  return `
    <div class="text-center h-full flex flex-col">
      <h2 class="text-xl font-bold mb-2">ğŸ”¢ 2048</h2>
      <div class="mb-2 flex justify-center gap-3 text-xs">
        <span>åˆ†æ•¸: <span id="mergeScore" class="font-bold">0</span></span>
        <span>æœ€é«˜: <span id="game2048Best" class="font-bold">0</span></span>
      </div>
      <div id="mergeGrid" class="game-area flex-1 mb-2"></div>
      <div id="mergeArea" class="mb-2">
        <div class="text-xs text-gray-600 mb-1">æ»‘å‹•è¢å¹•æ§åˆ¶æ–¹å‘</div>
        <div class="flex justify-center gap-1 mb-1">
          <button onclick="currentGameInstance.move('up')" class="w-10 h-10 bg-gray-300 rounded text-sm touch-manipulation">â†‘</button>
        </div>
        <div class="flex justify-center gap-1">
          <button onclick="currentGameInstance.move('left')" class="w-10 h-10 bg-gray-300 rounded text-sm touch-manipulation">â†</button>
          <button onclick="currentGameInstance.move('down')" class="w-10 h-10 bg-gray-300 rounded text-sm touch-manipulation">â†“</button>
          <button onclick="currentGameInstance.move('right')" class="w-10 h-10 bg-gray-300 rounded text-sm touch-manipulation">â†’</button>
        </div>
      </div>
      <div class="flex justify-center gap-2">
        <button onclick="start2048Game()" class="btn-game text-xs px-3 py-1">é–‹å§‹éŠæˆ²</button>
        <button onclick="closeGame()" class="btn-game text-xs px-3 py-1">é—œé–‰</button>
      </div>
    </div>
  `;
}

// Wordle éŠæˆ²
function createWordleGame() {
  return `
    <div class="text-center h-full flex flex-col">
      <h2 class="text-xl font-bold mb-2">ğŸ“ Wordle</h2>
      <div class="mb-2 flex justify-center gap-3 text-xs">
        <span>å›åˆ: <span id="wordleRound" class="font-bold">1</span>/6</span>
        <span>é€£å‹: <span id="wordleStreak" class="font-bold">0</span></span>
      </div>
      <div id="wordleStatus" class="mb-2 text-xs font-bold text-center">
        <span class="text-gray-600">é»æ“Šã€Œé–‹å§‹éŠæˆ²ã€é–‹å§‹çŒœè©</span>
      </div>
      <div id="wordleGrid" class="game-area flex-1 mb-2"></div>
      <div id="wordleKeyboard" class="mb-2"></div>
      <div class="text-xs text-gray-600 mb-2">çŒœå‡º5å­—æ¯å–®è©ï¼Œç¶ è‰²=æ­£ç¢ºä½ç½®ï¼Œé»ƒè‰²=éŒ¯èª¤ä½ç½®</div>
      <div id="wordleControls" class="flex justify-center gap-2">
        <button onclick="startWordleGame()" class="btn-game text-xs px-3 py-1">é–‹å§‹éŠæˆ²</button>
        <button onclick="closeGame()" class="btn-game text-xs px-3 py-1">é—œé–‰</button>
      </div>
    </div>
  `;
}

// æ•¸ç¨éŠæˆ²
function createSudokuGame() {
  return `
    <div class="text-center h-full flex flex-col">
      <h2 class="text-xl font-bold mb-2">ğŸ”² æ•¸ç¨</h2>
      <div class="mb-2 flex justify-center gap-3 text-xs">
        <span>æ™‚é–“: <span id="sudokuTime" class="font-bold">0</span>s</span>
        <span>éŒ¯èª¤: <span id="sudokuErrors" class="font-bold">0</span></span>
      </div>
      <div id="sudokuGrid" class="game-area flex-1 mb-2"></div>
      
      <!-- æ•¸å­—é¸æ“‡éµç›¤ -->
      <div id="sudokuNumberPad" class="mb-2">
        <div class="text-xs text-gray-600 mb-1">é¸æ“‡æ•¸å­—</div>
        <div class="grid grid-cols-3 gap-1 max-w-xs mx-auto">
          <button onclick="currentGameInstance.selectNumber(1)" class="w-10 h-10 bg-blue-500 text-white rounded-lg text-sm font-bold hover:bg-blue-600 touch-manipulation">1</button>
          <button onclick="currentGameInstance.selectNumber(2)" class="w-10 h-10 bg-blue-500 text-white rounded-lg text-sm font-bold hover:bg-blue-600 touch-manipulation">2</button>
          <button onclick="currentGameInstance.selectNumber(3)" class="w-10 h-10 bg-blue-500 text-white rounded-lg text-sm font-bold hover:bg-blue-600 touch-manipulation">3</button>
          <button onclick="currentGameInstance.selectNumber(4)" class="w-10 h-10 bg-blue-500 text-white rounded-lg text-sm font-bold hover:bg-blue-600 touch-manipulation">4</button>
          <button onclick="currentGameInstance.selectNumber(5)" class="w-10 h-10 bg-blue-500 text-white rounded-lg text-sm font-bold hover:bg-blue-600 touch-manipulation">5</button>
          <button onclick="currentGameInstance.selectNumber(6)" class="w-10 h-10 bg-blue-500 text-white rounded-lg text-sm font-bold hover:bg-blue-600 touch-manipulation">6</button>
          <button onclick="currentGameInstance.selectNumber(7)" class="w-10 h-10 bg-blue-500 text-white rounded-lg text-sm font-bold hover:bg-blue-600 touch-manipulation">7</button>
          <button onclick="currentGameInstance.selectNumber(8)" class="w-10 h-10 bg-blue-500 text-white rounded-lg text-sm font-bold hover:bg-blue-600 touch-manipulation">8</button>
          <button onclick="currentGameInstance.selectNumber(9)" class="w-10 h-10 bg-blue-500 text-white rounded-lg text-sm font-bold hover:bg-blue-600 touch-manipulation">9</button>
        </div>
        <div class="flex justify-center gap-1 mt-1">
          <button onclick="currentGameInstance.clearCell()" class="w-16 h-8 bg-red-500 text-white rounded-lg text-xs font-bold hover:bg-red-600 touch-manipulation">æ¸…é™¤</button>
          <button onclick="currentGameInstance.hint()" class="w-16 h-8 bg-yellow-500 text-white rounded-lg text-xs font-bold hover:bg-yellow-600 touch-manipulation">æç¤º</button>
        </div>
      </div>
      
      <div class="text-xs text-gray-600 mb-2">é»æ“Šç©ºç™½æ ¼å­ï¼Œç„¶å¾Œé¸æ“‡æ•¸å­—</div>
      <div class="flex justify-center gap-2">
        <button onclick="startSudokuGame()" class="btn-game text-xs px-3 py-1">é–‹å§‹éŠæˆ²</button>
        <button onclick="closeGame()" class="btn-game text-xs px-3 py-1">é—œé–‰</button>
      </div>
    </div>
  `;
}

// ä¿„ç¾…æ–¯æ–¹å¡Š
function createTetrisGame() {
  return `
    <div class="text-center h-full flex flex-col">
      <h2 class="text-xl font-bold mb-2">ğŸ§© ä¿„ç¾…æ–¯æ–¹å¡Š</h2>
      <div class="mb-2 flex justify-center gap-3 text-xs">
        <span>åˆ†æ•¸: <span id="tetrisScore" class="font-bold">0</span></span>
        <span>ç­‰ç´š: <span id="tetrisLevel" class="font-bold">1</span></span>
        <span>è¡Œæ•¸: <span id="tetrisLines" class="font-bold">0</span></span>
      </div>
      <div id="tetrisGrid" class="game-area flex-1 mb-2"></div>
      
      <!-- æ‰‹æ©Ÿè§¸æ§æŒ‰éˆ• -->
      <div class="mb-2">
        <div class="text-xs text-gray-600 mb-1">è§¸æ§æ§åˆ¶</div>
        <div class="flex justify-center gap-1 mb-1">
          <button onclick="currentGameInstance.movePiece(-1, 0)" class="w-10 h-10 bg-blue-500 text-white rounded-lg text-sm font-bold touch-manipulation">â†</button>
          <button onclick="currentGameInstance.rotatePiece()" class="w-10 h-10 bg-purple-500 text-white rounded-lg text-sm font-bold touch-manipulation">â†»</button>
          <button onclick="currentGameInstance.movePiece(1, 0)" class="w-10 h-10 bg-blue-500 text-white rounded-lg text-sm font-bold touch-manipulation">â†’</button>
        </div>
        <div class="flex justify-center gap-1">
          <button onclick="currentGameInstance.movePiece(0, 1)" class="w-10 h-10 bg-green-500 text-white rounded-lg text-sm font-bold touch-manipulation">â†“</button>
          <button onclick="currentGameInstance.hardDrop()" class="w-20 h-10 bg-red-500 text-white rounded-lg text-xs font-bold touch-manipulation">å¿«é€Ÿä¸‹é™</button>
        </div>
      </div>
      
      <div class="text-xs text-gray-600 mb-2">æ»‘å‹•è¢å¹•æ§åˆ¶ï¼šå·¦å³ç§»å‹•ï¼Œå‘ä¸‹åŠ é€Ÿï¼Œå‘ä¸Šæ—‹è½‰</div>
      <div class="flex justify-center gap-2">
        <button onclick="startTetrisGame()" class="btn-game text-xs px-3 py-1">é–‹å§‹éŠæˆ²</button>
        <button onclick="closeGame()" class="btn-game text-xs px-3 py-1">é—œé–‰</button>
      </div>
    </div>
  `;
}

// è²ªåƒè›‡
function createSnakeGame() {
  return `
    <div class="text-center h-full flex flex-col">
      <h2 class="text-xl font-bold mb-2">ğŸ è²ªåƒè›‡</h2>
      <div class="mb-2 flex justify-center gap-3 text-xs">
        <span>åˆ†æ•¸: <span id="snakeScore" class="font-bold">0</span></span>
        <span>é•·åº¦: <span id="snakeLength" class="font-bold">1</span></span>
      </div>
      <div id="snakeGrid" class="game-area flex-1 mb-2"></div>
      <div class="text-xs text-gray-600 mb-2">ä½¿ç”¨æ–¹å‘éµæ§åˆ¶è›‡çš„ç§»å‹•</div>
      <div class="flex justify-center gap-2">
        <button onclick="startSnakeGame()" class="btn-game text-xs px-3 py-1">é–‹å§‹éŠæˆ²</button>
        <button onclick="closeGame()" class="btn-game text-xs px-3 py-1">é—œé–‰</button>
      </div>
    </div>
  `;
}

// æ‰“åœ°é¼ 
function createWhackGame() {
  return `
    <div class="text-center h-full flex flex-col">
      <h2 class="text-xl font-bold mb-2">ğŸ¹ æ‰“åœ°é¼ </h2>
      <div class="mb-2 flex justify-center gap-3 text-xs">
        <span>åˆ†æ•¸: <span id="whackScore" class="font-bold">0</span></span>
        <span>æ™‚é–“: <span id="whackTime" class="font-bold">30</span>s</span>
        <span>æ“Šä¸­: <span id="whackHits" class="font-bold">0</span></span>
      </div>
      <div id="whackGrid" class="game-area flex-1 mb-2"></div>
      <div class="text-xs text-gray-600 mb-2">é»æ“Šå‡ºç¾çš„åœ°é¼ ï¼Œç²å¾—é«˜åˆ†</div>
      <div class="flex justify-center gap-2">
        <button onclick="startWhackGame()" class="btn-game text-xs px-3 py-1">é–‹å§‹éŠæˆ²</button>
        <button onclick="closeGame()" class="btn-game text-xs px-3 py-1">é—œé–‰</button>
      </div>
    </div>
  `;
}


// ç¿»è½‰å¡ç‰‡ - ç°¡å–®é…å°éŠæˆ²
function createFlipcardGame() {
  return `
    <div class="text-center h-full flex flex-col">
      <h2 class="text-xl font-bold mb-2">ğŸƒ ç¿»è½‰å¡ç‰‡</h2>
      <div class="mb-2 flex justify-center gap-3 text-xs">
        <span>åˆ†æ•¸: <span id="flipcardScore" class="font-bold">0</span></span>
        <span>ç¿»è½‰: <span id="flipcardFlips" class="font-bold">0</span></span>
        <span>é…å°: <span id="flipcardPairs" class="font-bold">0</span>/8</span>
      </div>
      <div id="flipcardGrid" class="game-area flex-1 mb-2"></div>
      <div class="text-xs text-gray-600 mb-2">é»æ“Šå¡ç‰‡ç¿»è½‰ï¼Œæ‰¾å‡ºç›¸åŒçš„åœ–æ¡ˆé…å°</div>
      <div class="flex justify-center gap-2">
        <button onclick="startFlipcardGame()" class="btn-game text-xs px-3 py-1">é–‹å§‹éŠæˆ²</button>
        <button onclick="resetFlipcardGame()" class="btn-game text-xs px-3 py-1">é‡æ–°é–‹å§‹</button>
        <button onclick="closeGame()" class="btn-game text-xs px-3 py-1">é—œé–‰</button>
      </div>
    </div>
  `;
}

// å‰ªåˆ€çŸ³é ­å¸ƒ
function createRPSGame() {
  return `
    <div class="text-center h-full flex flex-col">
      <h2 class="text-xl font-bold mb-2">âœ‚ï¸ å‰ªåˆ€çŸ³é ­å¸ƒ</h2>
      <div class="mb-2 flex justify-center gap-3 text-xs">
        <span>åˆ†æ•¸: <span id="rpsScore" class="font-bold">0</span></span>
        <span>é€£å‹: <span id="rpsStreak" class="font-bold">0</span></span>
        <span>å›åˆ: <span id="rpsRound" class="font-bold">0</span></span>
      </div>
      
      <!-- é›»è…¦é¸æ“‡ -->
      <div class="mb-2">
        <div class="text-xs text-gray-600 mb-1">é›»è…¦é¸æ“‡</div>
        <div id="computerChoice" class="text-4xl">ğŸ¤–</div>
      </div>
      
      <!-- ç©å®¶é¸æ“‡ -->
      <div class="mb-2">
        <div class="text-xs text-gray-600 mb-1">ä½ çš„é¸æ“‡</div>
        <div class="flex justify-center gap-2">
          <button onclick="currentGameInstance.playRound('rock')" class="w-12 h-12 bg-gray-500 text-white rounded-full text-xl hover:bg-gray-600 touch-manipulation">ğŸª¨</button>
          <button onclick="currentGameInstance.playRound('paper')" class="w-12 h-12 bg-blue-500 text-white rounded-full text-xl hover:bg-blue-600 touch-manipulation">ğŸ“„</button>
          <button onclick="currentGameInstance.playRound('scissors')" class="w-12 h-12 bg-red-500 text-white rounded-full text-xl hover:bg-red-600 touch-manipulation">âœ‚ï¸</button>
        </div>
      </div>
      
      <!-- çµæœé¡¯ç¤º -->
      <div id="rpsResult" class="mb-2 text-sm font-bold"></div>
      
      <div class="flex justify-center gap-2">
        <button onclick="startRPSGame()" class="btn-game text-xs px-3 py-1">é–‹å§‹éŠæˆ²</button>
        <button onclick="closeGame()" class="btn-game text-xs px-3 py-1">é—œé–‰</button>
      </div>
    </div>
  `;
}

// ä¸‰æ¶ˆéŠæˆ² (ä½¿ç”¨æ¶ˆé™¤éŠæˆ²é‚è¼¯)
function createMatch3Game() {
  return `
    <div class="text-center h-full flex flex-col">
      <h2 class="text-xl font-bold mb-2">ğŸ’ ä¸‰æ¶ˆéŠæˆ²</h2>
      <div class="mb-2 flex justify-center gap-3 text-xs">
        <span>åˆ†æ•¸: <span id="eliminateScore" class="font-bold">0</span></span>
        <span>ç›®æ¨™: <span id="eliminateTarget" class="font-bold">1000</span></span>
        <span>æ­¥æ•¸: <span id="eliminateMoves" class="font-bold">30</span></span>
      </div>
      <div id="eliminateGrid" class="game-area flex-1 mb-2"></div>
      <div class="text-xs text-gray-600 mb-2">æ»‘å‹•ç›¸é„°æ–¹å¡Šå‰µé€ ä¸‰å€‹é€£ç·š</div>
      <div class="flex justify-center gap-2">
        <button onclick="startMatch3Game()" class="btn-game text-xs px-3 py-1">é–‹å§‹éŠæˆ²</button>
        <button onclick="closeGame()" class="btn-game text-xs px-3 py-1">é—œé–‰</button>
      </div>
    </div>
  `;
}

// ç¿»è½‰å¡ç‰‡éŠæˆ²å‡½æ•¸
let flipcardGameInstance = null;

function startFlipcardGame() {
  if (flipcardGameInstance) {
    flipcardGameInstance = null;
  }
  flipcardGameInstance = new FlipcardGame();
  flipcardGameInstance.init();
}

function resetFlipcardGame() {
  if (flipcardGameInstance) {
    flipcardGameInstance.resetGame();
  } else {
    startFlipcardGame();
  }
}

// åˆå§‹åŒ–
document.addEventListener('DOMContentLoaded', function() {
  loadTheme();
  loadGameData();
});
</script>

<!-- ğŸ“ åº•éƒ¨å°èˆª -->
<nav class="fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-lg border-t border-gray-200 flex justify-around py-2 bottom-nav z-50" role="navigation" aria-label="ä¸»è¦å°èˆª">
  <button onclick="window.location.href='index.html'" class="flex flex-col items-center text-gray-600 text-xs hover:text-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 rounded-lg px-3 py-2 min-w-[60px]" aria-label="å›åˆ°é¦–é ">
    <span class="text-lg mb-1">ğŸ </span><span>é¦–é </span>
  </button>
  <button onclick="openTool('expense-tracker.html')" class="flex flex-col items-center text-gray-600 text-xs hover:text-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 rounded-lg px-3 py-2 min-w-[60px]" aria-label="è¨˜å¸³">
    <span class="text-lg mb-1">ğŸ“</span><span>è¨˜å¸³</span>
  </button>
  <button class="flex flex-col items-center text-indigo-600 text-xs font-semibold px-3 py-2 min-w-[60px]" aria-label="éŠæˆ²å¤§å»³">
    <span class="text-lg mb-1">ğŸ®</span><span>éŠæˆ²</span>
  </button>
  <button onclick="openTool('local-life.html')" class="flex flex-col items-center text-gray-600 text-xs hover:text-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 rounded-lg px-3 py-2 min-w-[60px]" aria-label="åœ¨åœ°ç”Ÿæ´»">
    <span class="text-lg mb-1">ğŸ¹</span><span>ç”Ÿæ´»</span>
  </button>
  <button onclick="openTool('worship.html')" class="flex flex-col items-center text-gray-600 text-xs hover:text-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 rounded-lg px-3 py-2 min-w-[60px]" aria-label="æ‹œæ‹œå°ˆå€">
    <span class="text-lg mb-1">ğŸ™</span><span>æ‹œæ‹œ</span>
  </button>
</nav>

<script>
// å·¥å…·é–‹å•ŸåŠŸèƒ½
function openTool(url) {
  if (url.startsWith('http')) {
    // æª¢æ¸¬æ˜¯å¦ç‚ºæ‰‹æ©Ÿç‰ˆ
    const isMobile = window.innerWidth <= 768 || /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    
    if (isMobile) {
      // æ‰‹æ©Ÿç‰ˆï¼šåœ¨ç•¶å‰è¦–çª—æ‰“é–‹å¤–éƒ¨é€£çµ
      window.location.href = url;
    } else {
      // æ¡Œé¢ç‰ˆï¼šåœ¨æ–°è¦–çª—æ‰“é–‹å¤–éƒ¨é€£çµ
      window.open(url, '_blank', 'noopener,noreferrer');
    }
  } else {
    // å…§éƒ¨é€£çµåœ¨åŸè¦–çª—æ‰“é–‹
    window.location.href = url;
  }
}
</script>
</body>
</html>
