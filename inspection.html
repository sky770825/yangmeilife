<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>驗屋檢測 - 濬瑒房產生活平台</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
:root {
  --grad-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  --grad-success: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
  --grad-warning: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
  --grad-danger: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
}

body {
  font-family: 'Arial', sans-serif;
  background: var(--grad-primary);
  min-height: 100vh;
}

.glass {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.inspection-card {
  background: rgba(255, 255, 255, 0.95);
  border-radius: 15px;
  padding: 1.5rem;
  margin-bottom: 1rem;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
}

.inspection-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
}

.checklist-item {
  display: flex;
  align-items: center;
  padding: 0.75rem;
  border-radius: 10px;
  margin-bottom: 0.5rem;
  transition: all 0.3s ease;
}

.checklist-item:hover {
  background: rgba(102, 126, 234, 0.1);
}

.checklist-item.completed {
  background: rgba(34, 197, 94, 0.1);
  border-left: 4px solid #22c55e;
}

.checklist-item.issue {
  background: rgba(239, 68, 68, 0.1);
  border-left: 4px solid #ef4444;
}

.checkbox {
  width: 20px;
  height: 20px;
  border: 2px solid #d1d5db;
  border-radius: 4px;
  margin-right: 1rem;
  cursor: pointer;
  transition: all 0.3s ease;
}

.checkbox.checked {
  background: #22c55e;
  border-color: #22c55e;
  position: relative;
}

.checkbox.checked::after {
  content: '✓';
  position: absolute;
  color: white;
  font-size: 12px;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

.progress-bar {
  width: 100%;
  height: 8px;
  background: #e5e7eb;
  border-radius: 4px;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #22c55e, #16a34a);
  transition: width 0.3s ease;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.animate-pulse {
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

#themeToggle {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 1000;
  background: var(--grad-primary);
  border: none;
  border-radius: 50%;
  width: 50px;
  height: 50px;
  color: white;
  font-size: 1.2rem;
  cursor: pointer;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
  transition: all 0.3s ease;
}

#themeToggle:hover {
  transform: scale(1.1);
}

.back-btn {
  position: fixed;
  top: 20px;
  left: 20px;
  z-index: 1000;
  background: rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 50%;
  width: 50px;
  height: 50px;
  color: white;
  font-size: 1.2rem;
  cursor: pointer;
  transition: all 0.3s ease;
}

.back-btn:hover {
  background: rgba(255, 255, 255, 0.3);
  transform: scale(1.1);
}

.dark {
  --grad-primary: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
}

.dark .inspection-card {
  background: rgba(30, 30, 30, 0.95);
  color: white;
}

.dark .checklist-item:hover {
  background: rgba(102, 126, 234, 0.2);
}

.dark .checkbox {
  border-color: #6b7280;
}
</style>
</head>
<body>
<!-- 主題切換按鈕 -->
<button id="themeToggle" onclick="toggleTheme()">🌓</button>

<!-- 返回按鈕 -->
<button class="back-btn" onclick="goBack()" title="返回主頁">←</button>

<!-- 頁面標題 -->
<div class="container mx-auto px-4 py-8">
  <div class="text-center mb-8">
    <h1 class="text-4xl md:text-6xl font-bold text-white mb-4">🔍 驗屋檢測</h1>
    <p class="text-xl text-white opacity-90">專業驗屋清單，確保購屋品質</p>
  </div>

  <!-- 驗屋進度 -->
  <div class="glass rounded-2xl p-6 mb-8 text-center">
    <h2 class="text-2xl font-bold text-white mb-4">📊 驗屋進度</h2>
    <div class="progress-bar mb-4">
      <div class="progress-fill" id="progressFill" style="width: 0%"></div>
    </div>
    <div class="text-white">
      <span id="progressText">0</span> / <span id="totalItems">0</span> 項目已完成
    </div>
  </div>

  <!-- 驗屋清單 -->
  <div class="space-y-6">
    <!-- 結構檢查 -->
    <div class="inspection-card">
      <h3 class="text-xl font-bold mb-4 flex items-center">
        <span class="text-2xl mr-2">🏗️</span>
        結構檢查
      </h3>
      <div id="structureChecklist">
        <div class="checklist-item" data-category="structure">
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <div class="flex-1">
            <div class="font-medium">牆面裂縫檢查</div>
            <div class="text-sm text-gray-600 dark:text-gray-400">檢查牆面是否有龜裂、滲水痕跡</div>
          </div>
          <div class="text-sm text-gray-500">重要</div>
        </div>
        <div class="checklist-item" data-category="structure">
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <div class="flex-1">
            <div class="font-medium">天花板檢查</div>
            <div class="text-sm text-gray-600 dark:text-gray-400">檢查天花板是否平整、無滲水</div>
          </div>
          <div class="text-sm text-gray-500">重要</div>
        </div>
        <div class="checklist-item" data-category="structure">
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <div class="flex-1">
            <div class="font-medium">地板檢查</div>
            <div class="text-sm text-gray-600 dark:text-gray-400">檢查地板是否平整、無空鼓</div>
          </div>
          <div class="text-sm text-gray-500">重要</div>
        </div>
      </div>
    </div>

    <!-- 水電檢查 -->
    <div class="inspection-card">
      <h3 class="text-xl font-bold mb-4 flex items-center">
        <span class="text-2xl mr-2">⚡</span>
        水電檢查
      </h3>
      <div id="utilityChecklist">
        <div class="checklist-item" data-category="utility">
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <div class="flex-1">
            <div class="font-medium">水壓測試</div>
            <div class="text-sm text-gray-600 dark:text-gray-400">測試所有水龍頭水壓是否正常</div>
          </div>
          <div class="text-sm text-gray-500">重要</div>
        </div>
        <div class="checklist-item" data-category="utility">
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <div class="flex-1">
            <div class="font-medium">排水測試</div>
            <div class="text-sm text-gray-600 dark:text-gray-400">測試廚房、浴室排水是否順暢</div>
          </div>
          <div class="text-sm text-gray-500">重要</div>
        </div>
        <div class="checklist-item" data-category="utility">
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <div class="flex-1">
            <div class="font-medium">電源插座測試</div>
            <div class="text-sm text-gray-600 dark:text-gray-400">測試所有插座是否通電</div>
          </div>
          <div class="text-sm text-gray-500">重要</div>
        </div>
        <div class="checklist-item" data-category="utility">
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <div class="flex-1">
            <div class="font-medium">開關測試</div>
            <div class="text-sm text-gray-600 dark:text-gray-400">測試所有電燈開關是否正常</div>
          </div>
          <div class="text-sm text-gray-500">一般</div>
        </div>
      </div>
    </div>

    <!-- 門窗檢查 -->
    <div class="inspection-card">
      <h3 class="text-xl font-bold mb-4 flex items-center">
        <span class="text-2xl mr-2">🚪</span>
        門窗檢查
      </h3>
      <div id="doorWindowChecklist">
        <div class="checklist-item" data-category="doors">
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <div class="flex-1">
            <div class="font-medium">門鎖功能</div>
            <div class="text-sm text-gray-600 dark:text-gray-400">測試大門、房間門鎖是否正常</div>
          </div>
          <div class="text-sm text-gray-500">重要</div>
        </div>
        <div class="checklist-item" data-category="doors">
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <div class="flex-1">
            <div class="font-medium">窗戶開關</div>
            <div class="text-sm text-gray-600 dark:text-gray-400">測試窗戶開關是否順暢</div>
          </div>
          <div class="text-sm text-gray-500">一般</div>
        </div>
        <div class="checklist-item" data-category="doors">
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <div class="flex-1">
            <div class="font-medium">紗窗檢查</div>
            <div class="text-sm text-gray-600 dark:text-gray-400">檢查紗窗是否完整無破損</div>
          </div>
          <div class="text-sm text-gray-500">一般</div>
        </div>
      </div>
    </div>

    <!-- 設備檢查 -->
    <div class="inspection-card">
      <h3 class="text-xl font-bold mb-4 flex items-center">
        <span class="text-2xl mr-2">🔧</span>
        設備檢查
      </h3>
      <div id="applianceChecklist">
        <div class="checklist-item" data-category="appliances">
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <div class="flex-1">
            <div class="font-medium">熱水器</div>
            <div class="text-sm text-gray-600 dark:text-gray-400">測試熱水器是否正常運作</div>
          </div>
          <div class="text-sm text-gray-500">重要</div>
        </div>
        <div class="checklist-item" data-category="appliances">
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <div class="flex-1">
            <div class="font-medium">空調設備</div>
            <div class="text-sm text-gray-600 dark:text-gray-400">測試冷氣、暖氣是否正常</div>
          </div>
          <div class="text-sm text-gray-500">重要</div>
        </div>
        <div class="checklist-item" data-category="appliances">
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <div class="flex-1">
            <div class="font-medium">瓦斯設備</div>
            <div class="text-sm text-gray-600 dark:text-gray-400">檢查瓦斯管線和設備安全性</div>
          </div>
          <div class="text-sm text-gray-500">重要</div>
        </div>
      </div>
    </div>

    <!-- 環境檢查 -->
    <div class="inspection-card">
      <h3 class="text-xl font-bold mb-4 flex items-center">
        <span class="text-2xl mr-2">🌱</span>
        環境檢查
      </h3>
      <div id="environmentChecklist">
        <div class="checklist-item" data-category="environment">
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <div class="flex-1">
            <div class="font-medium">噪音測試</div>
            <div class="text-sm text-gray-600 dark:text-gray-400">檢查室內外噪音程度</div>
          </div>
          <div class="text-sm text-gray-500">一般</div>
        </div>
        <div class="checklist-item" data-category="environment">
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <div class="flex-1">
            <div class="font-medium">採光檢查</div>
            <div class="text-sm text-gray-600 dark:text-gray-400">檢查各房間採光是否充足</div>
          </div>
          <div class="text-sm text-gray-500">一般</div>
        </div>
        <div class="checklist-item" data-category="environment">
          <div class="checkbox" onclick="toggleCheck(this)"></div>
          <div class="flex-1">
            <div class="font-medium">通風檢查</div>
            <div class="text-sm text-gray-600 dark:text-gray-400">檢查空氣流通是否良好</div>
          </div>
          <div class="text-sm text-gray-500">一般</div>
        </div>
      </div>
    </div>
  </div>

  <!-- 驗屋報告 -->
  <div class="inspection-card mt-8">
    <h3 class="text-xl font-bold mb-4 flex items-center">
      <span class="text-2xl mr-2">📋</span>
      驗屋報告
    </h3>
    <div class="space-y-4">
      <div>
        <label class="block text-sm font-medium mb-2">發現問題記錄</label>
        <textarea id="issueNotes" class="w-full p-3 border border-gray-300 rounded-lg resize-none" rows="4" placeholder="記錄發現的問題..."></textarea>
      </div>
      <div>
        <label class="block text-sm font-medium mb-2">建議改善事項</label>
        <textarea id="suggestions" class="w-full p-3 border border-gray-300 rounded-lg resize-none" rows="4" placeholder="記錄建議改善的事項..."></textarea>
      </div>
      <div class="flex gap-4">
        <button onclick="generateReport()" class="flex-1 bg-blue-500 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-600 transition">
          📄 生成報告
        </button>
        <button onclick="saveReport()" class="flex-1 bg-green-500 text-white py-3 px-6 rounded-lg font-medium hover:bg-green-600 transition">
          💾 儲存報告
        </button>
      </div>
    </div>
  </div>
</div>

<script>
// 主題切換
function toggleTheme() {
  document.body.classList.toggle('dark');
  localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
}

// 載入主題
function loadTheme() {
  const savedTheme = localStorage.getItem('theme');
  if (savedTheme === 'dark') {
    document.body.classList.add('dark');
  }
}

// 返回主頁
function goBack() {
  window.location.href = '主頁.html';
}

// 驗屋數據
let inspectionData = {
  completed: [],
  issues: [],
  notes: '',
  suggestions: ''
};

// 載入驗屋數據
function loadInspectionData() {
  const saved = localStorage.getItem('inspectionData');
  if (saved) {
    inspectionData = JSON.parse(saved);
    updateUI();
  }
}

// 儲存驗屋數據
function saveInspectionData() {
  localStorage.setItem('inspectionData', JSON.stringify(inspectionData));
}

// 切換檢查項目
function toggleCheck(checkbox) {
  const item = checkbox.parentElement;
  const isCompleted = checkbox.classList.contains('checked');
  
  if (isCompleted) {
    checkbox.classList.remove('checked');
    item.classList.remove('completed');
    // 從完成列表中移除
    const itemText = item.querySelector('.font-medium').textContent;
    inspectionData.completed = inspectionData.completed.filter(item => item !== itemText);
  } else {
    checkbox.classList.add('checked');
    item.classList.add('completed');
    // 添加到完成列表
    const itemText = item.querySelector('.font-medium').textContent;
    inspectionData.completed.push(itemText);
  }
  
  updateProgress();
  saveInspectionData();
}

// 更新進度
function updateProgress() {
  const totalItems = document.querySelectorAll('.checklist-item').length;
  const completedItems = document.querySelectorAll('.checkbox.checked').length;
  const progress = Math.round((completedItems / totalItems) * 100);
  
  document.getElementById('progressFill').style.width = progress + '%';
  document.getElementById('progressText').textContent = completedItems;
  document.getElementById('totalItems').textContent = totalItems;
}

// 更新UI
function updateUI() {
  // 恢復檢查狀態
  const items = document.querySelectorAll('.checklist-item');
  items.forEach(item => {
    const itemText = item.querySelector('.font-medium').textContent;
    const checkbox = item.querySelector('.checkbox');
    
    if (inspectionData.completed.includes(itemText)) {
      checkbox.classList.add('checked');
      item.classList.add('completed');
    }
  });
  
  updateProgress();
  
  // 恢復文字內容
  document.getElementById('issueNotes').value = inspectionData.notes || '';
  document.getElementById('suggestions').value = inspectionData.suggestions || '';
}

// 生成報告
function generateReport() {
  const completedItems = document.querySelectorAll('.checkbox.checked').length;
  const totalItems = document.querySelectorAll('.checklist-item').length;
  const progress = Math.round((completedItems / totalItems) * 100);
  
  const issues = document.getElementById('issueNotes').value;
  const suggestions = document.getElementById('suggestions').value;
  
  const report = `
驗屋檢測報告
================
檢測日期: ${new Date().toLocaleDateString('zh-TW')}
完成進度: ${completedItems}/${totalItems} (${progress}%)

檢查結果:
${inspectionData.completed.map(item => `✓ ${item}`).join('\n')}

發現問題:
${issues || '無'}

建議改善:
${suggestions || '無'}

報告生成時間: ${new Date().toLocaleString('zh-TW')}
  `;
  
  // 創建下載連結
  const blob = new Blob([report], { type: 'text/plain;charset=utf-8' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `驗屋報告_${new Date().toISOString().split('T')[0]}.txt`;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
  
  alert('驗屋報告已生成並下載！');
}

// 儲存報告
function saveReport() {
  inspectionData.notes = document.getElementById('issueNotes').value;
  inspectionData.suggestions = document.getElementById('suggestions').value;
  saveInspectionData();
  alert('報告已儲存！');
}

// 初始化
document.addEventListener('DOMContentLoaded', function() {
  loadTheme();
  loadInspectionData();
});
</script>
</body>
</html>
